(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about~b1bc70ec"],{2226:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header",{staticStyle:{"margin-bottom":"60px"}}),a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",tile:"",dark:t.$store.getters.getTheme}},[a("v-list",{attrs:{dense:""}},[a("p",[t._v("Navigointi")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[a("v-divider"),t._l(t.items,(function(e,i){return a("div",{key:i},[a("v-list-item",{attrs:{disabled:t.$router.currentRoute.path===e.path},on:{click:function(a){return t.changePage(e.path)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1),a("v-divider")],1)}))],2)],1)],1)],1),a("v-container",[t.errors.length?a("div",{attrs:{id:"errordiv"}},[a("ul",{staticClass:"collection with-header",staticStyle:{border:"1px solid red"}},[a("li",{staticClass:"collection-header",staticStyle:{background:"rgba(0,0,0,0)"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")])],1),t._l(t.errors,(function(e,i){return a("li",{key:i,staticClass:"collection-item",attrs:{id:"error"}},[a("p",{staticClass:"flow-text"},[t._v(t._s(i+1)+". "+t._s(e))])])}))],2)]):t._e(),t.loading?a("div",[a("h2",[t._v("Valmistellaan kilpailua...")]),a("ProgressBarQuery")],1):a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme}},[a("v-row",{staticClass:"valign-wrapper"},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("h1",[t._v("Yleisnäkymä")])]),a("v-col",{attrs:{md:"3"}},[a("div",{staticClass:"text-center"},[a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("p",{class:{"black-text":!t.$store.getters.getTheme,"white-text":t.$store.getters.getTheme}},[t._v(" Kello/Kilpailuaika ")]),a("v-btn",t._g(t._b({attrs:{text:"",outlined:"",color:"red darken-4",dark:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-timer")])],1)]}}],null,!1,2568892169),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",{staticClass:"headline"}),a("Timedate"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Sulje ")])],1)],1)],1)],1)])],1),a("v-row",{staticClass:"section",class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme}},[a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" "+t._s(t.competition.name)+" ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-calendar-today")])],1),a("v-list-item-title",[t._v("Päivämäärä")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.formatted_start_date)+" - "+t._s(t.formatted_end_date))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-clock-time-four")])],1),a("v-list-item-title",[t._v("Kilpailuaika")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.competition.start_time)+" - "+t._s(t.competition.end_time))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"green darken-4"}},[t._v("mdi-state-machine")])],1),a("v-list-item-title",[t._v("Tila")]),a("v-list-item-subtitle",{class:{"green-text":"Kaikki maalissa"===t.competition.state,"blue-text":"Kaikki maalissa"!==t.competition.state}},[a("b",[t._v(t._s(t.competition.state))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-card-account-details-outline")])],1),a("v-list-item-title",[t._v("Ilmoittautuneita")]),a("v-list-item-subtitle",{class:{"green-text":t.competition.signees.length,"red-text":!t.competition.signees.length}},[a("b",[t._v(t._s(t.competition.signees.length))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"blue darken-4"}},[t._v("mdi-water-alert")])],1),a("v-list-item-title",[t._v("Vielä vesillä")]),t.competition.signees.length?a("v-list-item-subtitle",{class:{"green-text":!t.competition.signees.length-t.$store.getters.getFinishedSignees.length,"red-text":t.competition.signees.length}},[a("b",[t._v(t._s(t.hasNotReturnedPercentage)+"%")]),t._v(" ("+t._s(t.competition.signees.length-t.$store.getters.getFinishedSignees.length)+" / "+t._s(t.competition.signees.length)+") ")]):a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v("Ketään ei vielä vesillä!")])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"blue"}},[t._v("mdi-fish")])],1),a("v-list-item-title",[t._v("Saalista saaneita")]),t.competition.signees.length?a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(t.hasGottenFishPercentage)+"%")]),t._v(" ("+t._s(t.$store.getters.getPointSignees.length)+" / "+t._s(t.competition.signees.length)+") ")]):a("v-list-item-subtitle",{staticClass:"red-text"},[a("b",[t._v("Ei vielä ilmoittautuneita!")])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"yellow darken-4"}},[t._v("mdi-seal")])],1),a("v-list-item-title",[t._v("Kalaa saatu yhteensä")]),t.competition.signees.length?a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(t.competition.total_weights/1e3)+" kg")])]):a("v-list-item-subtitle",{staticClass:"red-text"},[a("b",[t._v("Ei vielä ilmoittautuneita!")])])],1)],1)],1)],1)],1)],1)])],1)},s=[],n=(a("99af"),a("96cf"),a("1da1")),r=a("7149"),o=a("b3a7"),l=a("96c7"),c=a("a822"),u=a("4d5c"),d=a.n(u),m={name:"Overview",components:{Timedate:o["a"],ProgressBarQuery:c["default"],Header:l["default"]},data:function(){return{competition:null,loading:!1,errors:[],formatted_start_date:null,formatted_end_date:null,dialog:!1,hasNotReturnedPercentage:0,hasGottenFishPercentage:0,selectedItem:0,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}]}},created:function(){if(null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition")),e=t["id"];this.refreshCompetition(e)}else console.log("No competition in localstorage!")},mounted:function(){if(this.checkLogin(),location.href="#",location.href="#app",null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition")),e=t["id"];this.refreshCompetition(e)}else console.log("No competition in localstorage!")},methods:{changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):d.a.toast({html:"Olet jo tällä sivulla!"})},refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.errors=[],a.prev=2,a.next=5,r["a"].getCompetitions({_id:t});case 5:i=a.sent,i?(e.competition=i,e.$store.commit("refreshCompetition",e.competition),localStorage.setItem("cup",e.competition.cup_id),s=e.$moment(e.competition.start_date),n=e.$moment(e.competition.end_date),e.formatted_start_date="".concat(s.date(),".").concat(s.month()+1,".").concat(s.year()),e.formatted_end_date="".concat(n.date(),".").concat(n.month()+1,".").concat(n.year()),e.hasGottenFishPercentage=Math.round(e.$store.getters.getPointSignees.length/e.competition.signees.length*100*100)/100,e.hasNotReturnedPercentage=Math.round((e.competition.signees.length-e.$store.getters.getFinishedSignees.length)/i.signees.length*100*100)/100):e.competition={name:"Kilpailua ei löytynyt tietokannasta..."},a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),console.log(a.t0.message);case 12:e.loading=!1;case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))()},checkLogin:function(){var t=JSON.parse(localStorage.getItem("user")),e=localStorage.getItem("jwt");null!=t&&null!=e?(this.$store.state.logged_in=!0,1==t.is_admin?this.$store.state.is_admin=!0:this.$store.state.is_admin=!1):(t&&localStorage.removeItem("user"),e&&localStorage.removeItem("jwt"),this.$store.state.logged_in=!1,this.$store.state.is_admin=!1,d.a.toast({html:"Tapahtui virhe... Kirjaudu sisään uudestaan"}))}}},p=m,h=a("2877"),_=a("6544"),v=a.n(_),g=a("0798"),f=a("8336"),b=a("b0af"),k=a("99d9"),x=a("62ad"),w=a("a523"),y=a("169a"),C=a("ce7e"),$=a("132d"),T=a("8860"),S=a("da13"),j=a("5d23"),V=a("1baa"),I=a("34c3"),P=a("f774"),E=a("0fd9"),K=a("2fa4"),D=Object(h["a"])(p,i,s,!1,null,null,null);e["default"]=D.exports;v()(D,{VAlert:g["a"],VBtn:f["a"],VCard:b["a"],VCardActions:k["a"],VCardTitle:k["c"],VCol:x["a"],VContainer:w["a"],VDialog:y["a"],VDivider:C["a"],VIcon:$["a"],VList:T["a"],VListItem:S["a"],VListItemContent:j["a"],VListItemGroup:V["a"],VListItemIcon:I["a"],VListItemSubtitle:j["b"],VListItemTitle:j["c"],VNavigationDrawer:P["a"],VRow:E["a"],VSpacer:K["a"]})},"38eb":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme},staticStyle:{"margin-top":"70px","margin-bottom":"5px"}},[t.$store.state.logged_in?a("Header"):a("MainHeader"),a("v-row",[a("v-col",{attrs:{md:"3","offset-md":"8"}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",tile:"",dark:t.$store.getters.getTheme}},[a("v-list",{attrs:{dense:""}},[a("p",[t._v("Navigointi")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},t._l(t.items,(function(e,i){return a("v-list-item",{key:i,attrs:{disabled:e.disabled},on:{click:function(a){return t.changePage(e.path)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)})),1)],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("h1",[t._v("Kilpailujen tuloksia")])])],1),t.competitions.length?a("v-row",{staticClass:"scroll_table"},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",items:t.competitions,"item-text":"select","item-value":"_id",label:"Valitse näytettävä kilpailu",loading:t.loading,outlined:"","return-object":"","single-line":""},on:{input:t.pickCompetition},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-list-item-icon",[e.item.isFinished?a("v-icon",{attrs:{color:"green"}},[t._v("mdi-trophy")]):a("v-icon",{attrs:{color:"yellow"}},[t._v("mdi-trophy")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.item.name+", "+e.item.locality)}}),a("v-list-item-subtitle",{staticClass:"green--text",domProps:{innerHTML:t._s(e.item.cup_name+" ("+t.$moment(e.item.start_date).format("YYYY")+")")}}),a("v-list-item-subtitle",{staticClass:"blue--text",domProps:{innerHTML:t._s(t.$moment(e.item.start_date).format("DD.MM.YYYY"))}}),e.item.isFinished?t._e():a("v-list-item-subtitle",[t._v("Kesken!")])],1)]}}],null,!1,4023905239),model:{value:t.selected_competition,callback:function(e){t.selected_competition=e},expression:"selected_competition"}})],1)],1):t._e(),a("v-row",[a("v-col",{staticStyle:{"margin-bottom":"20px"},attrs:{md:"3","offset-md":"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"yellow",disabled:!t.competition},on:{click:t.cancelSelection}},[a("i",{staticClass:"material-icons left"},[t._v("remove_circle")]),t._v("Peruuta valinta ")])],1),a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-dialog",{attrs:{scrollable:"","max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:t.$store.getters.getTheme,large:"",outlined:"",loading:t.loading_competition,disabled:!t.biggest_amounts_results.length||!t.competition}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa kaikki tulokset ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v("Valitse mitä lataus sisältää")]),a("v-divider"),a("v-card-text",{staticStyle:{height:"300px",width:"100%"}},[a("v-checkbox",{attrs:{label:"Tilastoja",disabled:!t.biggest_amounts_results.length,color:"indigo darken-3",value:"stats"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Normaalikilpailun tulokset",color:"indigo darken-3",value:"normal"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),t.isTeamCompetition?a("v-checkbox",{attrs:{disabled:!t.team_results.length,label:"Tiimikilpailun tulokset",color:"indigo darken-3",value:"team"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}):t._e(),a("v-checkbox",{attrs:{disabled:!t.biggest_fishes_results.length,label:"Suurimmat yksittäiset kalat",color:"indigo darken-3",value:"biggest_fishes"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Suurimmat kalasaaliit",color:"indigo darken-3",value:"biggest_amounts"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length&&!t.biggest_amounts_results.length,label:"Suurimmat yksittäiset kalat / kalasaaliit (Voittajat)",color:"indigo darken-3",value:"biggest_winners"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}})],1),a("v-divider"),a("v-card-actions",[a("v-col",[a("v-btn",{attrs:{outlined:"",color:"red darken-4",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Sulje")])],1),a("v-col",[a("v-btn",{attrs:{outlined:"",color:"green darken-4",text:""},on:{click:t.choosePrints}},[t._v("Lataa")])],1)],1)],1)],1)],1)],1),t.loading?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan kilpailuja... ")]),a("ProgressBarQuery")],1)],1):t._e(),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#stats"}},[t._v("Tilastoja")]),a("v-tab",{attrs:{href:"#normal-competition",disabled:!t.selected_competition}},[t._v("Normaalikilpailu")]),t.isTeamCompetition?a("v-tab",{attrs:{href:"#team-competition",disabled:!t.selected_competition}},[t._v("Tiimikilpailu")]):a("v-tab",{attrs:{href:"#team-competition",disabled:""}},[t._v("Ei Tiimikilpailua")]),a("v-tab",{attrs:{href:"#biggest-fishes",disabled:!t.selected_competition}},[t._v("Suurimmat Kalat")]),a("v-tab",{attrs:{href:"#biggest-fish-amounts",disabled:!t.selected_competition}},[t._v("Suurimmat Kalasaaliit")])],1),!t.loading&&t.selected_competition?a("v-tabs-items",{staticStyle:{background:"rgba(0,0,0,0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"stats"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"8"}},[a("v-btn",{staticStyle:{"margin-bottom":"20px"},attrs:{large:"",outlined:"",dark:t.$store.getters.getTheme,loading:t.loading_competition,disabled:!t.biggest_amounts_results.length},on:{click:function(e){return t.saveStatsAsPDF("Tilastoja")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf")],1)],1)],1),t.competition?a("v-row",[a("v-col",[t.competition.normal_points.length?a("v-row",{staticStyle:{"min-height":"400px"}},[a("v-col",{staticStyle:{"margin-bottom":"50px"},attrs:{sm:"12",md:"5","offset-md":"1"}},[t.fishes_chart_data?a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-card-title",[a("h4",{staticClass:"headline mb-1"},[t._v(" "+t._s(t.fishes_chart_title)+" ")])]),a("doughnut-chart",{attrs:{"chart-data":t.fishes_chart_data,"chart-id":"fishes_chart",title:t.fishes_chart_title}})],1)]}}],null,!1,1847150614)})],1):t._e()]),a("v-col",{attrs:{sm:"12",md:"5"}},[t.signee_chart_data?a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-card-title",[a("h4",{staticClass:"headline mb-1"},[t._v(" "+t._s(t.signee_chart_title)+" ")])]),a("pie-chart",{attrs:{"chart-data":t.signee_chart_data,"chart-id":"signee_chart",title:t.signee_chart_title}})],1)]}}],null,!1,4159745268)})],1):t._e()])],1):a("v-row",[a("v-col",{attrs:{md:"12"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1):t._e(),t.competition?a("v-row",[a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" Kalalajien määritykset ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[t._l(t.calculated_fish_weights,(function(e,i){return a("div",{key:i},[a("v-list-item",[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(" x "+t._s(e.multiplier))])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on,n=i.attrs;return[a("span",t._g(t._b({},"span",n,!1),s),[a("b",[t._v(t._s(e.minsize)+" cm")])])]}}],null,!0)},[a("span",[t._v(t._s(e.minsize))])])],1),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[t._v(" "+t._s(e.weights?Math.round(100*(e.weights/1e3+Number.EPSILON))/100:0)+" kg ")])],1),a("v-divider")],1)})),a("v-list-item",[a("v-list-item-title",[t._v(" Saalista yhteensä ")]),a("v-list-item-subtitle",[a("h4",{staticClass:"green-text"},[a("b",[t._v(t._s(Math.round(100*(t.calculated_total_weights/1e3+Number.EPSILON))/100)+" kg")])])])],1)],2)],1)],1)],1),a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" Yleisiä tilastoja ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[a("v-list-item",[a("v-list-item-title",[t._v("Cup pistekerroin")]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v("x "+t._s(t.competition.cup_points_multiplier))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-title",[a("b",[t._v("Ilmoittautuneita yhteensä")])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(t.signees.length))]),t._v(" venettä ")])],1),a("v-divider"),a("v-list-item",[a("v-list-item-title",[a("b",[t._v("Saalista saaneita")])]),a("v-divider",{attrs:{vertical:""}}),t.$store.getters.getPointSignees.length?a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(Math.round(t.$store.getters.getPointSignees.length/t.competition.signees.length*100*100)/100)+"% ("+t._s(t.$store.getters.getPointSignees.length)+" / "+t._s(t.signees.length)+")")])]):a("v-list-item-subtitle",{staticClass:"red-text"},[a("b",[t._v("0% (0/0)")])])],1)],1)],1)],1)],1)],1)]}}],null,!1,3985178034)})],1)],1):t._e()],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"normal-competition"}},[a("v-row",[a("v-col",{staticStyle:{"padding-top":"50px","padding-bottom":"20px"},attrs:{md:"10","offset-md":"1"}},[a("v-row",[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.normal_options},on:{input:t.switchNormalResults},model:{value:t.selected_normal,callback:function(e){t.selected_normal=e},expression:"selected_normal"}})],1),t.normal_points.length||t.signees.length&&"Ilmoittautuneet"===t.selected_normal?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{large:"",outlined:"",dark:t.$store.getters.getTheme,loading:t.loading_competition},on:{click:function(e){t.saveAsPDF("Normaalikilpailun tulokset ("+t.selected_normal+")","#normal-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.normal_points.length||t.signees.length&&"Ilmoittautuneet"===t.selected_normal?a("v-row",{staticClass:"row"},[a("v-col",{attrs:{md:"12"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v(" Normaalikilpailu ("+t._s(t.selected_normal)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.results,search:t.search},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},"Ilmoittautuneet"===t.selected_normal?{key:"item.boat_number",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.boat_number))])]}}:null,{key:"item.total_points",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.total_points.toLocaleString())+" p")])]}},{key:"item.cup_points_total",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:t.getColorPoints(i.cup_points_total)}},[t._v(t._s(i.cup_points_total))])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1)],1),t.isTeamCompetition?a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"team-competition"}},[t.team_results.length?a("v-row",[a("v-col",{staticStyle:{"padding-top":"50px"},attrs:{md:"3","offset-md":"8"}},[a("v-btn",{attrs:{large:"",outlined:"",dark:t.$store.getters.getTheme,loading:t.loading_competition},on:{click:function(e){return t.saveAsPDF("Tiimikilpailun tulokset","#team-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf ")],1)],1)],1):t._e(),a("v-row",[t.team_results.length?a("v-col",{staticStyle:{"padding-bottom":"20px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Tiimikilpailu ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_team,callback:function(e){t.search_team=e},expression:"search_team"}})],1),a("v-data-table",{attrs:{headers:t.team_headers,items:t.team_results,search:t.search_team},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.points",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.points.toLocaleString())+" p")])]}}],null,!0)})],1)],1):a("v-col",[t.loading?t._e():a("v-col"),t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])],1)],1)],1):t._e(),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fishes"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_names},on:{input:t.calculateBiggestFishes},model:{value:t.selected_biggest_fish,callback:function(e){t.selected_biggest_fish=e},expression:"selected_biggest_fish"}})],1),t.biggest_fishes_results.length?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{large:"",outlined:"",dark:t.$store.getters.getTheme,loading:t.loading_competition},on:{click:function(e){t.saveAsPDF("Suurimmat kalat ("+t.selected_biggest_fish+")","#biggest-fishes-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.biggest_fishes_results.length?a("v-row",[a("v-col",{staticStyle:{"margin-bottom":"40px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t.results_found_fishes?a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalat ("+t._s(t.selected_biggest_fish)+" "+t._s(t.results_found_fishes)+") ")]):a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalat ("+t._s(t.selected_biggest_fish)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_fishes,callback:function(e){t.search_fishes=e},expression:"search_fishes"}})],1),a("v-data-table",{attrs:{headers:t.biggest_fishes_headers,items:t.biggest_fishes_results,search:t.search_fishes},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.name",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.name))])]}},{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fish-amounts"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_amount_names},on:{input:t.calculateBiggestAmounts},model:{value:t.selected_biggest_amount,callback:function(e){t.selected_biggest_amount=e},expression:"selected_biggest_amount"}})],1),t.biggest_amounts_results.length?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{large:"",outlined:"",dark:t.$store.getters.getTheme,loading:t.loading_competition,disabled:!t.biggest_amounts_results.length},on:{click:function(e){t.saveAsPDF("Suurimmat kalat ("+t.selected_biggest_amount+")","#biggest-amounts-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.biggest_amounts_results.length?a("v-row",[t._v("> "),a("v-col",[t.results_found_amounts?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+" "+t._s(t.results_found_amounts)+") ")]):a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+") ")])])],1):t._e(),t.biggest_amounts_results.length?a("v-row",[a("v-col",{staticStyle:{"margin-bottom":"40px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t.results_found_amounts?a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+" "+t._s(t.results_found_amounts)+") ")]):a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_amounts,callback:function(e){t.search_amounts=e},expression:"search_amounts"}})],1),a("v-data-table",{attrs:{headers:t.biggest_amounts_headers,items:t.biggest_amounts_results,search:t.search_amounts},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.name",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.name))])]}},{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1):a("v-row",[t.loading_competition||t.loading?t._e():a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kilpailua ei valittuna ")])])],1),t.competition?a("div",[t.loading_competition?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",tile:"",loading:t.loading_competition,color:"blue darken-4"},on:{click:function(e){return t.refreshCompetition(!0)}}},[a("i",{staticClass:"material-icons left"},[t._v("update")]),t._v("Päivitä tulokset ")])],1)],1)],1):t._e()],1)],1)],1)},s=[],n=(a("99af"),a("4de4"),a("4160"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),r=a("96c7"),o=a("e683"),l=a("4d5c"),c=a.n(l),u=a("7149"),d=a("a822"),m=a("748a"),p=a("e5e9"),h=a("e0b1"),_={name:"PublicResults",components:{ProgressBarQuery:d["default"],Header:r["default"],MainHeader:o["a"],PieChart:m["a"],DoughnutChart:p["a"]},data:function(){return{competitions:[],competition:null,selected_competition:null,loading:!1,loading_competition:!1,tab:null,signees:[],fish_names:[],fish_amount_names:[],table_fish_names:[],results:[],normal_points:[],normal_weights:[],team_results:[],biggest_fishes:{},biggest_fishes_results:[],selected_biggest_fish:null,biggest_amounts:{},biggest_amounts_results:[],selected_biggest_amount:null,results_found_fishes:"",results_found_amounts:"",isTeamCompetition:!0,calculated_total_weights:null,calculated_fish_weights:null,selected_normal:null,fishes_chart:null,signees_chart:null,normal_options:["Pisteet","Kalat","Ilmoittautuneet"],headers:[],biggest_fishes_headers:[],biggest_amounts_headers:[],normal_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Tulos",value:"total_points"},{text:"Cup sij. pisteet",value:"cup_placement_points"},{text:"Cup osal. pisteet",value:"cup_participation_points"},{text:"Yht.",value:"cup_points_total"}],signee_headers:[],team_headers:[{text:"Sijoitus",value:"placement"},{text:"Tiimi",value:"name"},{text:"Jäsen 1",value:"captain_name_1"},{text:"Jäsen 2",value:"captain_name_2"},{text:"Jäsen 3",value:"captain_name_3"},{text:"Pisteet",value:"points"}],winner_headers:[{text:"Kalalaji",value:"name"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],biggest_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],search:"",search_team:"",search_fishes:"",search_amounts:"",selected_print:[],dialog:!1,signee_chart_data:null,fishes_chart_data:null,fishes_chart_title:null,signee_chart_title:null,selectedItem:0,items:[{text:"Kilpailujen tuloksia",icon:"mdi-seal",path:"/public-results",disabled:!0},{text:"Cuppien tuloksia",icon:"mdi-trophy",path:"/public-cups",disabled:!1}]}},created:function(){this.saveAllAsPDF=h["a"].saveAllAsPDF,this.saveStatsAsPDF=h["a"].saveStatsAsPDF,this.saveAsPDF=h["a"].saveAsPDF,this.dictToArray=h["a"].dictToArray,this.capitalize_words=h["a"].capitalize_words,this.replaceAll=h["a"].replaceAll,this.formatDate=h["a"].formatDate,this.range=h["a"].range,this.getColorPoints=h["a"].getColorPoints,this.getColor=h["a"].getColor,this.drawCharts=h["a"].drawCharts,this.sortDict=h["a"].sortDict,this.onafterprint=h["a"].onafterprint,this.onbeforeprint=h["a"].onbeforeprint},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c.a.AutoInit(),t.checkLogin(),e.prev=2,t.loading=!0,a={isPublic:!0},e.next=7,u["a"].getCompetitions(a);case 7:t.competitions=e.sent,t.competitions.length?(t.competitions.forEach((function(e){e.start_date=t.$moment(e.start_date),e.end_date=t.$moment(e.end_date),e.select="".concat(e.name,", ").concat(e.start_date.year(),"  (").concat(e.cup_name,")")})),t.competitions.sort((function(t,e){return e.start_date.isAfter(t.start_date)})),t.$store.commit("refreshCompetition",t.competition),t.refreshCompetition(!1)):(t.signees=[],t.biggest_fishes=[],t.biggest_amounts=[]),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.error(e.t0.message);case 14:t.loading=!1,location.href="#",location.href="#app";case 17:case"end":return e.stop()}}),e,null,[[2,11]])})))()},methods:{choosePrints:function(){this.dialog=!1,this.saveAllAsPDF(this.tab)},changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):c.a.toast({html:"Olet jo tällä sivulla!"})},cancelSelection:function(){this.competition=null,this.selected_competition=null,localStorage.removeItem("competition")},calculateBiggestFishes:function(){var t=this.biggest_fishes,e=1;if(this.results_found_fishes=null,this.selected_biggest_fish||(this.selected_biggest_fish="Voittajat"),"Voittajat"===this.selected_biggest_fish)this.biggest_fishes_headers=this.winner_headers,this.biggest_fishes,this.biggest_fishes_results=this.sortDict(t);else{var a=[];this.biggest_fishes_headers=this.biggest_headers,t[this.selected_biggest_fish]?(a=t[this.selected_biggest_fish].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),this.results_found_amounts=""):this.results_found_fishes="- Ei tuloksia";var i=-1,s=-1;this.biggest_fishes_results=a,this.biggest_fishes_results.forEach((function(t){i===t.weight?t.placement=s:(t.placement=s=e,i=t.weight),e++}))}},calculateBiggestAmounts:function(){var t=this.biggest_amounts,e=1;if(this.results_found_amount="",this.selected_biggest_amount||(this.selected_biggest_amount="Voittajat"),"Voittajat"===this.selected_biggest_amount)this.biggest_amounts_headers=this.winner_headers,this.biggest_amounts,this.biggest_amounts_results=this.sortDict(t);else{this.biggest_amounts_headers=this.biggest_headers;var a=[];t[this.selected_biggest_amount]?(a=t[this.selected_biggest_amount].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),a=a.filter((function(t){return parseInt(t.weight)>0})),this.results_found_amounts=""):this.results_found_amount="- Ei tuloksia";var i=-1,s=-1;this.biggest_amounts_results=a,this.biggest_amounts_results.forEach((function(t){i===t.weight?t.placement=s:(t.placement=s=e,i=t.weight),e++}))}},calculateAll:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.calculateBiggestFishes(),t.calculateBiggestAmounts();case 2:case"end":return e.stop()}}),e)})))()},switchNormalResults:function(){var t=this;this.selected_normal||(this.selected_normal="Pisteet"),"Pisteet"===this.selected_normal&&(this.headers=this.normal_headers,this.results=this.normal_points),"Kalat"===this.selected_normal&&(this.headers=[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"}],this.results=this.normal_weights,this.table_fish_names.forEach((function(e){t.headers.push({text:e,value:e})})),this.headers.push({text:"Tulos",value:"total_points"})),"Ilmoittautuneet"===this.selected_normal&&(this.headers=this.signee_headers,this.results=this.$store.getters.getSignees)},refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.competition){a.next=15;break}if(e.loading_competition=!0,!t){a.next=7;break}return a.next=5,u["a"].getCompetitions({_id:e.competition._id});case 5:i=a.sent,i&&(e.competition=i,e.$store.commit("refreshCompetition",e.competition),localStorage.setItem("competition",JSON.stringify({id:i._id,start_date:i.start_date,end_date:i.end_date})));case 7:e.fish_names=[],e.fish_amount_names=[],e.table_fish_names=[],e.selected_print=[],e.signee_headers=[{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Lähtöpaikka",value:"starting_place"}],s=1;try{e.isTeamCompetition=e.$store.getters.isTeamCompetition,e.signees=e.$store.getters.getResultSignees,e.normal_points=e.competition.normal_points,e.normal_weights=e.competition.normal_weights,e.isTeamCompetition&&(e.signee_headers.push({text:"Tiimi",value:"team"}),e.team_results=e.competition.team_results,n=-1,r=-1,e.team_results.forEach((function(t){n===t.points?t.placement=r:(t.placement=r=s,n=t.points),s++}))),e.biggest_fishes=e.$store.getters.getBiggestFishes,e.biggest_amounts=e.$store.getters.getBiggestAmounts,e.calculated_total_weights=e.$store.getters.getCompetitionTotalWeights,e.calculated_fish_weights=e.competition.fishes,e.selected_normal="Pisteet",o=e.$store.getters.getCompetitionFishes,e.fish_names.push("Voittajat"),e.fish_amount_names.push("Voittajat"),o.forEach((function(t){e.fish_names.push(t.name),e.fish_amount_names.push(t.name),e.table_fish_names.push(t.name)})),e.calculateAll(),e.fishes_chart&&e.signees_chart&&(e.fishes_chart.destroy(),e.signees_chart.destroy()),e.$nextTick((function(){return e.drawCharts(e.tab)})),e.normal_points.length?(e.results=e.normal_points,e.headers=e.normal_headers):(e.results=e.$store.getters.getSignees,e.headers=e.signee_headers,e.selected_normal="Ilmoittautuneet"),t&&c.a.toast({html:"Tiedot ajantasalla!"})}catch(l){console.error(l)}e.loading_competition=!1;case 15:case"end":return a.stop()}}),a)})))()},pickCompetition:function(){this.$store.commit("refreshCompetition",this.selected_competition),this.competition=this.selected_competition,localStorage.setItem("competition",JSON.stringify({id:this.competition._id,start_date:this.competition.start_date,end_date:this.competition.end_date})),this.refreshCompetition(!1)},checkLogin:function(){var t=JSON.parse(localStorage.getItem("user")),e=localStorage.getItem("jwt");null!=t&&null!=e?(this.$store.state.logged_in=!0,1==t.is_admin?this.$store.state.is_admin=!0:this.$store.state.is_admin=!1):(t&&localStorage.removeItem("user"),e&&localStorage.removeItem("jwt"),this.$store.state.logged_in=!1,this.$store.state.is_admin=!1)}}},v=_,g=a("2877"),f=a("6544"),b=a.n(f),k=a("8336"),x=a("b0af"),w=a("99d9"),y=a("ac7c"),C=a("cc20"),$=a("62ad"),T=a("a523"),S=a("8fea"),j=a("169a"),V=a("ce7e"),I=a("ce87"),P=a("132d"),E=a("8860"),K=a("da13"),D=a("5d23"),L=a("1baa"),A=a("34c3"),Y=a("0fd9"),O=a("b974"),F=a("2fa4"),N=a("71a3"),R=a("c671"),B=a("fe57"),M=a("aac8"),H=a("9a96"),J=a("8654"),Q=a("3a2f"),z=Object(g["a"])(v,i,s,!1,null,null,null);e["default"]=z.exports;b()(z,{VBtn:k["a"],VCard:x["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VCheckbox:y["a"],VChip:C["a"],VCol:$["a"],VContainer:T["a"],VDataTable:S["a"],VDialog:j["a"],VDivider:V["a"],VHover:I["a"],VIcon:P["a"],VList:E["a"],VListItem:K["a"],VListItemContent:D["a"],VListItemGroup:L["a"],VListItemIcon:A["a"],VListItemSubtitle:D["b"],VListItemTitle:D["c"],VRow:Y["a"],VSelect:O["a"],VSpacer:F["a"],VTab:N["a"],VTabItem:R["a"],VTabs:B["a"],VTabsItems:M["a"],VTabsSlider:H["a"],VTextField:J["a"],VTooltip:Q["a"]})},4852:function(t,e,a){"use strict";var i=a("8e0f"),s=a.n(i);s.a},"73cf":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Header",{staticStyle:{"margin-bottom":"60px"}}),a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme},staticStyle:{"margin-top":"100px"}},[a("v-container",[t.errors.length?a("div",{attrs:{id:"errordiv"}},[a("ul",{staticClass:"collection with-header",staticStyle:{border:"1px solid red"}},[a("li",{staticClass:"collection-header",staticStyle:{background:"rgba(0,0,0,0)"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")])],1),t._l(t.errors,(function(e,i){return a("li",{key:i,staticClass:"collection-item",attrs:{id:"error"}},[a("p",{staticClass:"flow-text"},[t._v(t._s(i+1)+". "+t._s(e))])])}))],2)]):t._e(),a("v-row",[a("v-col",[a("h4",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Register ")])])],1),a("form",[a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Käyttäjänimi",id:"name",name:"name",type:"text",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Sähköpostiosoite",id:"email",name:"email",type:"email",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasana",id:"password",name:"password",type:"password",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasanan vahvistus",id:"password_confirmation",name:"password_confirmation",type:"password",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}})],1)],1),t.password&&t.password===t.password_confirmation?a("v-row",[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Salasanat täsmäävät! "),a("i",{staticClass:"material-icons green-text"},[t._v("done_outline")])])])],1):a("v-row",[t.password&&t.password_confirmation?a("v-col",[a("span",{staticClass:"flow-text red-text"},[t._v("Salasanat ei täsmää! "),a("i",{staticClass:"material-icons red-text"},[t._v("error_outline")])])]):t._e()],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("span",{staticClass:"col s6 flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Admin?")]),a("v-radio-group",{attrs:{row:""},model:{value:t.is_admin,callback:function(e){t.is_admin=e},expression:"is_admin"}},[a("v-radio",{attrs:{label:"Kyllä",value:"Yes"}}),a("v-radio",{attrs:{label:"Ei",value:"No"}})],1)],1)],1),t.loading?a("ProgressBarQuery",{staticStyle:{"margin-bottom":"20px"}}):a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"sbtn",large:"",tile:"",color:"blue darken-4",disabled:0===t.password.length||t.password!==t.password_confirmation},on:{click:t.handleSubmit}},[a("i",{staticClass:"material-icons left"},[t._v("login")]),t._v("Rekisteröidy ")])],1)],1)],1)],1)],1)],1)},s=[],n=(a("b0c0"),a("96cf"),a("1da1")),r=a("4d5c"),o=a.n(r),l=a("3faa"),c=a("96c7"),u=a("a822"),d={props:["nextUrl"],data:function(){return{errors:[],name:"",email:"",password:"",password_confirmation:"",is_admin:"No",loading:!1}},components:{Header:c["default"],ProgressBarQuery:u["default"]},mounted:function(){var t=document.getElementById("password_confirmation");t.addEventListener("keyup",(function(t){13===t.keyCode&&(t.preventDefault(),document.getElementById("sbtn").click())})),location.href="#",location.href="#app"},methods:{showError:function(t){this.errors.push(t),o.a.toast({html:t}),location.href="#",location.href="#app"},handleSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.loading=!0,t.preventDefault(),e.errors=[],e.email||e.showError("Syötä sähköposti!"),e.password||e.showError("Syötä salasana!"),e.name||e.showError("Syötä nimi!"),!(e.password===e.password_confirmation&&e.password.length>0)){a.next=30;break}if(e.errors.length){a.next=27;break}return a.next=10,l["a"].getEmail(e.email);case 10:if(i=a.sent,!i.length){a.next=16;break}e.showError("Tällä sähköpostilla on jo rekisteröitynyt käyttäjä!"),e.loading=!1,a.next=25;break;case 16:if("Yes"!=e.is_admin){a.next=22;break}return s={name:e.name,email:e.email,password:e.password,is_admin:!0},a.next=20,l["a"].insertAdmin(s).then((function(t){localStorage.setItem("user",JSON.stringify({id:t.data.user._id,name:t.data.user.name,email:t.data.user.email,is_admin:t.data.user.is_admin,createdAt:t.data.user.createdAt})),localStorage.setItem("jwt",t.data.token),e.$store.state.logged_in=!0,e.$store.state.is_admin=!0,null!=localStorage.getItem("jwt")&&(e.$emit("loggedIn"),null!=e.$route.params.nextUrl?e.$router.push(e.$route.params.nextUrl):e.$router.push({path:"/dashboard"})),e.loading=!1})).catch((function(t){e.loading=!1,e.showError(t)}));case 20:a.next=25;break;case 22:return n={name:e.name,email:e.email,password:e.password},a.next=25,l["a"].insertUser(n).then((function(t){localStorage.setItem("user",JSON.stringify({id:t.data.user._id,name:t.data.user.name,email:t.data.user.email,is_admin:t.data.user.is_admin,createdAt:t.data.user.createdAt})),localStorage.setItem("jwt",t.data.token),e.$store.state.logged_in=!0,e.$store.state.is_admin=!1,null!=localStorage.getItem("jwt")&&(e.$emit("loggedIn"),null!=e.$route.params.nextUrl?e.$router.push(e.$route.params.nextUrl):e.$router.push({path:"/dashboard"})),e.loading=!1})).catch((function(t){return 500===t.response.status?(e.loading=!1,void e.showError("Ongelma käyttäjän rekisteröimisessä... Tarkasta tiedot ja yritä uudelleen")):(e.loading=!1,console.error(t))}));case 25:a.next=28;break;case 27:e.loading=!1;case 28:a.next=32;break;case 30:e.loading=!1,e.showError("Salasanat eivät vastaa toisiaan!");case 32:case"end":return a.stop()}}),a)})))()}}},m=d,p=a("2877"),h=a("6544"),_=a.n(h),v=a("0798"),g=a("8336"),f=a("62ad"),b=a("a523"),k=a("67b6"),x=a("43a6"),w=a("0fd9"),y=a("8654"),C=Object(p["a"])(m,i,s,!1,null,null,null);e["default"]=C.exports;_()(C,{VAlert:v["a"],VBtn:g["a"],VCol:f["a"],VContainer:b["a"],VRadio:k["a"],VRadioGroup:x["a"],VRow:w["a"],VTextField:y["a"]})},"8e0f":function(t,e,a){},a404:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme},staticStyle:{"margin-top":"70px","margin-bottom":"5px"}},[t.$store.state.logged_in?a("Header"):a("MainHeader"),a("v-row",[a("v-col",{attrs:{md:"3","offset-md":"8"}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",tile:"",dark:t.$store.getters.getTheme}},[a("v-list",{attrs:{dense:""}},[a("p",[t._v("Navigointi")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},t._l(t.items,(function(e,i){return a("v-list-item",{key:i,attrs:{disabled:e.disabled},on:{click:function(a){return t.changePage(e.path)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)})),1)],1)],1)],1)],1),t.errors.length?a("v-row",{attrs:{id:"errordiv"}},[a("ul",{staticClass:"collection with-header",staticStyle:{border:"1px solid red"}},[a("li",{staticClass:"collection-header",staticStyle:{background:"rgba(0,0,0,0)"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")])],1),t._l(t.errors,(function(e,i){return a("li",{key:i,staticClass:"collection-item",attrs:{id:"error"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" "+t._s(i+1)+". "+t._s(e)+" ")])])}))],2)]):t._e(),a("v-row",{staticClass:"section"},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("h1",[t._v("Cuppien tuloksia")])])],1),t.cups.length?a("v-row",{staticClass:"scroll_table"},[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-select",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.cups,"item-text":"select","item-value":"_id",label:"Valitse näytettävä Cup",outlined:"","return-object":"","single-line":""},on:{input:t.pickCup},model:{value:t.selected_cup,callback:function(e){t.selected_cup=e},expression:"selected_cup"}})],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei cuppeja saatavilla :( ")])]):a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan cuppeja... ")]),a("ProgressBarQuery")],1)],1),a("v-row",[a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"yellow",disabled:!t.selected_cup},on:{click:function(e){t.selected_cup=null,t.competitions=[],t.results=[]}}},[a("i",{staticClass:"material-icons left"},[t._v("remove_circle")]),t._v("Peruuta valinta ")])],1)],1),t.loading?a("v-row",[a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan cupin kilpailuja... ")]),a("ProgressBarQuery")],1)],1)],1):a("v-row",[a("v-col",[t.results.length?a("v-row",[a("v-col",[a("h1",[t._v("Cupin kokonaispisteet")])])],1):t._e(),t.results.length?a("v-row",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},staticStyle:{"padding-top":"25px"}},[a("v-col",{staticClass:"d-flex",attrs:{md:"4"}},[a("v-select",{attrs:{items:t.header_options,"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,label:"Kilpailun otsikko",outlined:""},on:{input:t.changeHeaders},model:{value:t.header_selection,callback:function(e){t.header_selection=e},expression:"header_selection"}})],1),a("v-col",{staticClass:"d-flex",attrs:{md:"4"}},[a("v-select",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.select_numbers,label:"Cup sijoittumispisteisiin vaikuttavien kilpailujen määrä",outlined:""},on:{input:function(e){return t.calculateAll(t.competitions,t.selected_competitions)}},model:{value:t.selected_competitions,callback:function(e){t.selected_competitions=e},expression:"selected_competitions"}})],1),a("v-col",{attrs:{md:"4"}},[a("v-btn",{staticClass:"white--text",attrs:{large:"",tile:"",color:"green darken-4",loading:t.loading},on:{click:function(e){return t.saveAsPDF("Cupin Kokonaistulokset")}}},[a("i",{staticClass:"material-icons left"},[t._v("picture_as_pdf")]),t._v("Lataa pdf ")])],1)],1):t._e(),t.results.length&&t.not_finished_count>0?a("v-row",[a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" *Punaisella merkityt kilpailut ovat vielä kesken! ("+t._s(t.not_finished_count)+" kpl) ")])])],1):t._e(),t.competitions.length?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Cupin kokonaispisteet")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.headers,items:t.results,search:t.search,loading:t.loading},scopedSlots:t._u([t._l(t.headers,(function(e,i){return{key:"header."+e.value,fn:function(e){var s=e.header;return[s.highlight?a("span",{key:i,staticClass:"strokeme",class:{"red-text":s.isFinished,"green-text":!s.isFinished}},[t._v(" "+t._s(s.text)+" ")]):a("span",{key:i},[t._v(t._s(s.text))])]}}})),{key:"item.final_placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.final_placement)}},[t._v(t._s(i.final_placement)+".")])]}},t._l(t.competitions.length,(function(e,i){return{key:"item.cup_results["+e+"].points",fn:function(s){var n=s.item;return[n.cup_results[e]?a("div",{key:e},[n.cup_results[e].points===t.competitions[i].cup_participation_points?a("span",{staticClass:"strokeme"},[t._v(t._s(n.cup_results[e].points)+"p ("+t._s(n.cup_results[e].placement)+".)")]):a("span",{class:"font-weight-bold text-outline  "+t.getColor(n.cup_results[e].placement)+"-text strokeme"},[t._v(t._s(n.cup_results[e].points)+"p ("+t._s(n.cup_results[e].placement)+".)")])]):a("span",{key:e},[t._v(" - ")])]}}})),{key:"item.final_cup_points",fn:function(e){var i=e.item;return[a("span",{staticClass:"indigo-text"},[t._v(t._s(i.final_cup_points)+"p")])]}}],null,!0)})],1)],1)],1):t._e(),t.competitions.length&&t.selected_cup?a("v-row",[t.loading?a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia... ")])]):t._e()],1):t._e(),t.competitions.length&&t.selected_cup?a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",tile:"",loading:t.loading,color:"blue darken-4"},on:{click:function(e){return t.refreshCup(t.selected_cup)}}},[a("i",{staticClass:"material-icons left"},[t._v("update")]),t._v("Päivitä cupin tulokset ")])],1)],1):a("v-row",[a("v-col",[t.selected_cup&&!t.competitions.length?a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Cupissa ei vielä kilpailuja! ")]):t._e(),t.selected_cup?t._e():a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Cuppia ei vielä valittuna! ")])])],1)],1)],1)],1)},s=[],n=(a("99af"),a("4de4"),a("7db0"),a("c740"),a("4160"),a("a15b"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("4fad"),a("07ac"),a("ac1f"),a("5319"),a("1276"),a("159b"),a("2909")),r=(a("96cf"),a("1da1")),o=a("4d5c"),l=a.n(o),c=a("51dd"),u=a("7149"),d=a("e511"),m=a.n(d),p=(a("0da4"),a("96c7")),h=a("e683"),_=a("a822"),v={name:"PublicCups",components:{ProgressBarQuery:_["default"],Header:p["default"],MainHeader:h["a"]},data:function(){return{cup:null,cups:[],competitions:[],headers:[],results:[],loading:!1,errors:[],select_numbers:[],header_options:["Paikkakunta","Kilpailun nimi"],header_selection:"Paikkakunta",selected_competitions:0,selected_cup:null,tab:null,search:"",not_finished_count:0,selectedItem:1,items:[{text:"Kilpailujen tuloksia",icon:"mdi-seal",path:"/public-results",disabled:!1},{text:"Cuppien tuloksia",icon:"mdi-trophy",path:"/public-cups",disabled:!0}]}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.checkLogin(),e.next=3,c["a"].getCups({isPublic:!0});case 3:t.cups=e.sent,t.cups.length&&t.cups.forEach((function(t){t.select="".concat(t.name," (").concat(t.year,")")})),location.href="#",location.href="#app";case 7:case"end":return e.stop()}}),e)})))()},methods:{pickCup:function(){this.refreshCup(this.selected_cup)},changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):l.a.toast({html:"Olet jo tällä sivulla!"})},calculateAll:function(t,e){var a=this,i=[];if(this.isResults=!1,t.forEach((function(t){t.normal_points.length&&t.normal_points.forEach((function(e){var s=i.findIndex((function(t){return parseInt(e.boat_number)===parseInt(t.boat_number)}));if(s>-1){var n=i[s];n.points_compare.push(e.cup_points_total),n.cup_results[t.key_name]={points:e.cup_points_total,placement:e.placement},i.splice(s,1,n)}else{var r=a.selected_cup.signees.find((function(t){return t.boat_number===e.boat_number}));e.captain_name=r.captain_name,e.temp_captain_name=r.temp_captain_name,e.locality=r.locality,e.cup_results=[],e.points_compare=[],e.points_compare.push(e.cup_points_total),e.cup_results[t.key_name]={points:e.cup_points_total,placement:e.placement},i.push(e)}}))})),i.length){this.isResults=!0,i=this.limitCompetitions(i,e),this.results=i.sort((function(t,e){return parseInt(e.cup_results["Total"])-parseInt(t.cup_results["Total"])})),this.changeHeaders();var s=1,n=-1,r=-1;this.results.forEach((function(t){n===t.cup_results["Total"]?t.final_placement=r:(t.final_placement=s,n=t.cup_results["Total"],r=t.final_placement),t.final_cup_points=t.cup_results["Total"],s++}))}},limitCompetitions:function(t,e){var a=this;return e=e<0?0:e,t.forEach((function(t){if(a.competitions.length>=e){t.points_compare.sort((function(t,e){return parseInt(e)-parseInt(t)})),t.cup_results["Total"]=0;var i=0;a.competitions.forEach((function(a){t.cup_results[a.key_name]&&(t.cup_results[a.key_name].placement=a.normal_points.find((function(e){return e.boat_number===t.boat_number})).placement,t.cup_results[a.key_name].points<t.points_compare[e]&&(t.cup_results[a.key_name].points=a.cup_participation_points),t.cup_results[a.key_name].points===t.points_compare[e]&&(1!==i&&(t.cup_results[a.key_name].points=a.cup_participation_points),i++))}))}t.cup_results.forEach((function(e){t.cup_results["Total"]+=e.points}))})),t},refreshCup:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.errors=[],e.$store.commit("refreshCup",t),a.prev=3,a.next=6,u["a"].getCompetitions({cup_id:t.id});case 6:e.competitions=a.sent,i=1,e.competitions=e.competitions.filter((function(t){return t.isPublic})),e.competitions.forEach((function(t){e.select_numbers.push(i),t.start_date=e.$moment(t.start_date),t.end_date=e.$moment(t.end_date),t.key_name=i,i++})),e.competitions.sort((function(t,e){return e.start_date.isBefore(t.start_date)})),e.selected_competitions=e.competitions.length,e.calculateAll(e.competitions,e.selected_competitions),l.a.toast({html:"Tiedot ajantasalla!"}),e.loading=!1,a.next=21;break;case 17:a.prev=17,a.t0=a["catch"](3),e.loading=!1,console.error(a.t0);case 21:case"end":return a.stop()}}),a,null,[[3,17]])})))()},getColor:function(t){return t>30?"red":t>20?"orange":t>5?"yellow":"green"},getCompetitionFinishedColor:function(t){return t?"red":"primary"},replaceAllChars:function(t,e){return Object(n["a"])(t).map((function(t){for(var a in e)t==a&&(t=e[a]);return t})).join("")},changeHeaders:function(){var t=this;this.headers=[],this.headers.push({text:"Sijoitus",highlight:!1,align:"center",value:"final_placement"}),this.headers.push({text:"Kilp. Nro",align:"center",highlight:!1,value:"boat_number"}),this.headers.push({text:"Kippari",align:"center",highlight:!1,value:"captain_name"}),this.headers.push({text:"Paikkakunta",align:"center",highlight:!1,value:"locality"}),this.not_finished_count=0,this.competitions.forEach((function(e){if(e.isFinished||t.not_finished_count++,"Paikkakunta"===t.header_selection){var a=t.headers.filter((function(t){return e.locality===t.text}));if(a.length){var i=" ".concat(e.locality," #").concat(a.length+1);t.headers.push({text:i,align:"center",highlight:!0,isFinished:!e.isFinished,value:"cup_results[".concat(e.key_name,"].points")})}else t.headers.push({text:e.locality,align:"center",highlight:!0,isFinished:!e.isFinished,value:"cup_results[".concat(e.key_name,"].points")})}else t.headers.push({text:e.name,align:"center",highlight:!0,isFinished:!e.isFinished,value:"cup_results[".concat(e.key_name,"].points")})})),this.headers.push({text:"Yhteensä",align:"center",highlight:!1,value:"final_cup_points"})},pickCompetition:function(t){this.$store.state.competition=t,localStorage.setItem("competition",JSON.stringify({id:t._id,start_date:t.start_date,end_date:t.end_date})),this.$router.push({path:"/overview"})},replaceAll:function(t,e,a){return t.split(e).join(a)},capitalize_words:function(t){return t.replace(/(?:^|\s|['`‘’.-])[^\x60^\x7B-\xDF](?!(\s|$))/g,(function(t){return t.toUpperCase()}))},dictToArray:function(t){var e=this,a=Object.entries(t),i=[];return a.forEach((function(t){var a=Object.values(t[1]),s=a[9];a[0]=String(a[11])+".",a[1]="("+String(a[1])+")",a[3]=a[4];var n=4;e.competitions.forEach((function(t){s[t.key_name]?a[n]="".concat(s[t.key_name].points,"p (").concat(s[t.key_name].placement,".)"):a[n]="-",n++})),a[n]="".concat(s["Total"],"p"),i.push(a)})),i},saveAsPDF:function(t){var e;e=this.competitions.length>4?new m.a("landscape"):new m.a;var a,i,s,r="".concat(this.selected_cup.name," (").concat(this.selected_cup.year,")"),o=[],l=Object(n["a"])(this.competitions),c=l.slice().reverse().findIndex((function(t){return!0===t.isFinished})),u=l.length-1,d=c>=0?u-c:c,p=l[d],h=this.$moment(p.start_date),_="".concat(h.date(),".").concat(h.month()+1,".").concat(h.year());e.setFontSize(24),e.text(13,15,r,{align:"left"}),e.line(0,20,400,20),e.setFontSize(14);var v=0;this.competitions.forEach((function(t){t.isFinished?0:v++})),a=0===v?"Tulokset ".concat(_):"Tilanne ".concat(_,", ").concat(p.name," (").concat(p.locality,") jälkeen (").concat(v," kpl kilpailuja kesken)"),e.text(13,30,a,{align:"left"}),e.text(13,40,t+" (".concat(this.selected_competitions,"/").concat(this.competitions.length," parasta kilpailua otettu huomioon)"),{align:"left"}),this.headers.forEach((function(t){o.push(t.text)})),i=this.dictToArray(this.results,1),s=45,e.autoTable({head:[o],body:i,styles:{overflow:"linebreak",halign:"justify",fontSize:"8",lineColor:"100",lineWidth:".25"},columnStyles:{text:{cellwidth:"auto"}},headStyles:{text:{cellwidth:"wrap"}},theme:"striped",pageBreak:"auto",tableWidth:"auto",startY:s,margin:{top:20}}),e.save("".concat(this.selected_cup.year,"_").concat(this.replaceAll("Cup"," ",""),"_").concat(this.replaceAll(this.capitalize_words(t)," ",""),".pdf"))},checkLogin:function(){var t=JSON.parse(localStorage.getItem("user")),e=localStorage.getItem("jwt");null!=t&&null!=e?(this.$store.state.logged_in=!0,1==t.is_admin?this.$store.state.is_admin=!0:this.$store.state.is_admin=!1):(t&&localStorage.removeItem("user"),e&&localStorage.removeItem("jwt"),this.$store.state.logged_in=!1,this.$store.state.is_admin=!1)}}},g=v,f=(a("4852"),a("2877")),b=a("6544"),k=a.n(b),x=a("0798"),w=a("8336"),y=a("b0af"),C=a("99d9"),$=a("cc20"),T=a("62ad"),S=a("a523"),j=a("8fea"),V=a("132d"),I=a("8860"),P=a("da13"),E=a("5d23"),K=a("1baa"),D=a("34c3"),L=a("0fd9"),A=a("b974"),Y=a("2fa4"),O=a("8654"),F=Object(f["a"])(g,i,s,!1,null,"4046c425",null);e["default"]=F.exports;k()(F,{VAlert:x["a"],VBtn:w["a"],VCard:y["a"],VCardTitle:C["c"],VChip:$["a"],VCol:T["a"],VContainer:S["a"],VDataTable:j["a"],VIcon:V["a"],VList:I["a"],VListItem:P["a"],VListItemContent:E["a"],VListItemGroup:K["a"],VListItemIcon:D["a"],VListItemTitle:E["c"],VRow:L["a"],VSelect:A["a"],VSpacer:Y["a"],VTextField:O["a"]})},a55b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("MainHeader"),a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme},staticStyle:{"margin-top":"100px"}},[a("v-container",[t.errors.length?a("div",{attrs:{id:"errordiv"}},[a("ul",{staticClass:"collection with-header",staticStyle:{border:"1px solid red"}},[a("li",{staticClass:"collection-header",staticStyle:{background:"rgba(0,0,0,0)"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")])],1),t._l(t.errors,(function(e,i){return a("li",{key:i,staticClass:"collection-item",attrs:{id:"error"}},[a("p",{staticClass:"flow-text"},[t._v(t._s(i+1)+". "+t._s(e))])])}))],2)]):t._e(),a("h1",[t._v("Login")]),a("form",[a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,id:"email",label:"Sähköpostiosoite",type:"email",maxlength:"40",loading:t.loading,counter:40},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasana",id:"password",type:"password",maxlength:"40",loading:t.loading,counter:40},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t.loading?a("v-row",[a("ProgressBarQuery",{staticStyle:{"margin-bottom":"20px"}})],1):a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"sbtn",large:"",tile:"",color:"blue darken-4"},on:{click:t.handleSubmit}},[a("i",{staticClass:"material-icons left"},[t._v("login")]),t._v("Kirjaudu ")])],1)],1)],1)])],1)],1)},s=[],n=(a("b0c0"),a("96cf"),a("1da1")),r=a("4d5c"),o=a.n(r),l=a("3faa"),c=a("e683"),u=a("a822"),d={data:function(){return{errors:[],email:null,password:null,loading:!1}},components:{MainHeader:c["a"],ProgressBarQuery:u["default"]},mounted:function(){var t=document.getElementById("password");t.addEventListener("keyup",(function(t){13===t.keyCode&&(t.preventDefault(),document.getElementById("sbtn").click())})),location.href="#",location.href="#app"},methods:{showError:function(t){this.errors.push(t),o.a.toast({html:t}),location.href="#",location.href="#app"},handleSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.errors=[],e.email||e.showError("Syötä sähköposti!"),e.password||e.showError("Syötä salasana!"),e.errors.length){a.next=17;break}return e.loading=!0,i={email:e.email,password:e.password},a.prev=7,a.next=10,l["a"].loginUser(i).then((function(t){var a=JSON.stringify(t.data.user.is_admin);e.$store.state.is_admin=a,localStorage.setItem("user",JSON.stringify({id:t.data.user._id,name:t.data.user.name,email:t.data.user.email,is_admin:t.data.user.is_admin,createdAt:t.data.user.createdAt})),localStorage.setItem("jwt",t.data.token),e.$store.state.logged_in=!0,null!=localStorage.getItem("jwt")&&(e.$emit("loggedIn"),null!=e.$route.params.nextUrl?e.$router.push(e.$route.params.nextUrl):e.$router.push({path:"/dashboard"})),e.loading=!1})).catch((function(t){return t.response?401===t.response.status||404===t.response.status?(e.loading=!1,void e.showError("Käyttäjänimi tai salasana ei täsmää!")):(e.loading=!1,console.log(t)):console.log(t)}));case 10:a.next=17;break;case 12:a.prev=12,a.t0=a["catch"](7),console.log(a.t0),e.showError("Näillä tiedoilla ei löytynyt käyttäjää!"),e.$router.push({path:"/login"});case 17:case"end":return a.stop()}}),a,null,[[7,12]])})))()}}},m=d,p=a("2877"),h=a("6544"),_=a.n(h),v=a("0798"),g=a("8336"),f=a("62ad"),b=a("a523"),k=a("0fd9"),x=a("8654"),w=Object(p["a"])(m,i,s,!1,null,null,null);e["default"]=w.exports;_()(w,{VAlert:v["a"],VBtn:g["a"],VCol:f["a"],VContainer:b["a"],VRow:k["a"],VTextField:x["a"]})},f52d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Header"),t.errors.length?a("div",{attrs:{id:"errordiv"}},[a("ul",{staticClass:"collection with-header",staticStyle:{border:"1px solid red"}},[a("li",{staticClass:"collection-header",staticStyle:{background:"rgba(0,0,0,0)"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")])],1),t._l(t.errors,(function(e,i){return a("li",{key:i,staticClass:"collection-item",attrs:{id:"error"}},[a("p",{staticClass:"flow-text"},[t._v(t._s(i+1)+". "+t._s(e))])])}))],2)]):t._e(),a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme},staticStyle:{"margin-top":"70px"}},[t._m(0),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#basic-info"}},[t._v("1. Perustiedot")]),a("v-tab",{attrs:{href:"#fishes",disabled:!t.basic_info_validated}},[t._v("2. Kilpailun kalalajit")]),a("v-tab",{attrs:{href:"#points",disabled:!t.fish_species_validated}},[t._v("3. Pistekertoimet ja alamitat")]),a("v-tab",{attrs:{href:"#summary",disabled:!t.fish_specs_validated}},[t._v("4. Yhteenveto")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(1,1,1,0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"basic-info"}},[t.loading?a("v-container",[a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Valmistellaan kilpailun luontia... ")]),a("ProgressBarQuery")],1)],1)],1):a("v-container",[a("v-row",[a("v-col",[a("p",{staticClass:"center-align flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kilpailun perustiedot ")]),t.basic_info_validated?a("p",{staticClass:"flow-text yellow lighten-1 center-align"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),a("v-row",[a("v-col",{attrs:{md:"12"}},[t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun nimi",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Paikkakunta",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.locality,callback:function(e){t.locality=e},expression:"locality"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{attrs:{md:"3"}},[a("p",{staticClass:"center-align flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Valitse Cup ")])]),a("v-col",{staticClass:"d-flex",attrs:{md:"6"}},[a("v-select",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.cups,"item-text":"select","item-value":"_id",hint:t.cup.name+" ("+t.cup.year+")",disabled:t.basic_info_validated,outlined:"","return-object":"","single-line":""},model:{value:t.cup,callback:function(e){t.cup=e},expression:"cup"}})],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"3"}},[a("v-btn",{attrs:{tile:"",color:"green lighten-1"},on:{click:function(e){return t.$router.push({path:"/continue",query:{tab:"create"}})}}},[a("i",{staticClass:"material-icons left"},[t._v("add_circle_outline")]),t._v("Luo uusi cup!")])],1)],1):a("v-row",{staticClass:"valign-wrapper"},[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6","offset-md":"2"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(' Ei luotuja cuppeja, Luo cup ensin "Jatka Kilpailuja sivulla" (Voit myös luoda cupin kilpailuille, jotka ei ole missään cupissa") ')])]),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"2"}},[a("router-link",{attrs:{to:"/continue"}},[a("v-btn",{attrs:{tile:"",color:"blue lighten-1"}},[a("i",{staticClass:"material-icons left"},[t._v("add_circle_outline")]),t._v("Luo cup!")])],1)],1)],1),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun voittajan cup sijoittumispisteet","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_placement_points>=0?t.cup_placement_points++:t.cup_placement_points=1},"click:prepend":function(e){t.cup_placement_points>=1?t.cup_placement_points--:t.cup_placement_points=0},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_placement_points,callback:function(e){t.cup_placement_points=e},expression:"cup_placement_points"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun cup osallistumispisteet","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_participation_points>=0?t.cup_participation_points++:t.cup_participation_points=1},"click:prepend":function(e){t.cup_participation_points>=1?t.cup_participation_points--:t.cup_participation_points=0},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_participation_points,callback:function(e){t.cup_participation_points=e},expression:"cup_participation_points"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Cup pistekerroin","append-outer-icon":"add",maxlength:"3","prepend-icon":"remove",counter:3,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_points_multiplier>=1?t.cup_points_multiplier+=.5:t.cup_points_multiplier=1},"click:prepend":function(e){t.cup_points_multiplier>=1.5?t.cup_points_multiplier-=.5:t.cup_points_multiplier=1},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_points_multiplier,callback:function(e){t.cup_points_multiplier=e},expression:"cup_points_multiplier"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Onko Tiimikilpailua?")])]),a("v-col",{attrs:{"offset-md":"4"}},[a("v-radio-group",{attrs:{row:"",disabled:t.basic_info_validated},model:{value:t.team_competition,callback:function(e){t.team_competition=e},expression:"team_competition"}},[a("v-radio",{attrs:{label:"Kyllä",value:"Kyllä"}}),a("v-radio",{attrs:{label:"Ei",value:"Ei"}})],1)],1)],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-row",{attrs:{align:"center"}},[a("span",{staticClass:"flow-text col s6",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun Aloituspäivä")])]),a("v-row",{attrs:{align:"center"}},[a("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi",disabled:t.basic_info_validated},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),a("v-col",{staticStyle:{"margin-bottom":"50px"},attrs:{cols:"12",md:"5","offset-md":"2"}},[a("v-row",{attrs:{align:"center"}},[a("span",{staticClass:"flow-text col s6",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun Lopetuspäivä")])]),a("v-row",[a("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi",disabled:t.basic_info_validated},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun alkamismisaika")])])],1),a("v-row",{attrs:{align:"center"}},[a("v-col",[a("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"5","offset-md":"1"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"12","offset-md":"2"}},[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun loppumisaika")])])],1),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"12","offset-md":"2"}},[a("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1)],1)],1)],1):t._e(),t.basic_info_validated?t._e():a("v-row",[t.cup.name?a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-btn",{attrs:{large:"",block:"",color:"green"},on:{click:t.checkBasicInformation}},[a("i",{staticClass:"material-icons left"},[t._v("check")]),t._v("Jatka")])],1):t._e()],1)],1),t.basic_info_validated?a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[a("i",{staticClass:"material-icons left"},[t._v("settings")]),t._v("Muuta tietoja")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("fishes")}}},[a("i",{staticClass:"material-icons right"},[t._v("arrow_forward")]),t._v("Jatka")])],1)],1):t._e()],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"fishes"}},[a("v-container",[a("v-row",[a("v-col",[t.fish_species_validated?a("p",{staticClass:"flow-text yellow lighten-1 center-align"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),a("v-row",[a("v-col",[a("v-row",[a("v-col",[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kalalajien valinta ")]),a("p",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" (Yli 40 merkkiä pitkät nimet lyhennetään 40 merkkiin) ")])])],1),a("v-row",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-combobox",{attrs:{filter:t.filter,"hide-no-data":!t.search,items:t.options,"search-input":t.search,disabled:t.fish_species_validated,"hide-selected":"",label:"Valitse kalalaji, tai luo oma kirjoittamalla",multiple:"",solo:"",clearable:"",rules:t.rules,maxlength:40,dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light"},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[a("v-list-item",[a("span",{staticClass:"subheading"},[t._v("Luo uusi kalalaji painamalla Enter: ")]),a("v-chip",{attrs:{color:""+t.colors[t.nonce-1],label:"",small:""}},[t._v(" "+t._s(t.search)+" ")])],1)]},proxy:!0},{key:"selection",fn:function(e){var i=e.attrs,s=e.item,n=e.parent,r=e.selected;return[s===Object(s)?a("v-chip",t._b({attrs:{color:s.color,"input-value":r,label:""}},"v-chip",i,!1),[a("span",{staticClass:"pr-2"},[t._v(" "+t._s(s.text)+" ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return n.selectItem(s)}}},[t._v(" $delete ")])],1):t._e()]}},{key:"item",fn:function(e){var i=e.index,s=e.item;return[t.editing===s?a("v-text-field",{attrs:{autofocus:"",flat:"","background-color":"transparent",solo:"",maxlength:40,rules:t.rules},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.edit(i,s)}},model:{value:t.editing.text,callback:function(e){t.$set(t.editing,"text",e)},expression:"editing.text"}}):a("v-chip",{attrs:{color:s.color,dark:"",label:""}},[t._v(" "+t._s(s.text)+" ")]),a("v-spacer"),a("v-list-item-action",{on:{click:function(t){t.stopPropagation()}}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.edit(i,s)}}},[a("v-icon",[t._v(t._s(t.editing!==s?"mdi-pencil":"mdi-check"))])],1)],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1)],1)],1),a("v-row",{staticStyle:{"margin-top":"50px"}},[t.fish_species_validated?a("v-row",[a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("basic-info")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[a("i",{staticClass:"material-icons left"},[t._v("settings")]),t._v("Muuta tietoja")])],1),a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("points")}}},[a("i",{staticClass:"material-icons right"},[t._v("arrow_forward")]),t._v("Jatka")])],1)],1):a("v-row",[a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("basic-info")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.checkFishSpecies}},[a("i",{staticClass:"material-icons left"},[t._v("check")]),t._v("Jatka")])],1)],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"points"}},[a("v-container",[a("v-row",[a("v-col",[a("p",{staticClass:"flow-text center-align",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Syötä kaloille pistekertoimet ja alamitat ")]),t.fish_specs_validated?a("p",{staticClass:"flow-text yellow lighten-1 center-align"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),a("v-row",[a("v-col",{staticClass:"specs",attrs:{id:"select_specs"}},[t.selected.length?a("ul",t._l(t.selected,(function(e,i){return a("li",{key:e,staticClass:"row",attrs:{id:"fish_spec"}},[a("v-row",[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme},attrs:{id:"fish_"+(i+1)+"_name"}},[t._v(t._s(i+1)+". "+t._s(e.text))])]),a("v-col",{staticClass:"input-fields"},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Pistekerroin",id:"fish_"+(i+1)+"_multiplier",maxlength:"4",value:"1",type:"number",counter:4,rules:t.number_rules,disabled:t.fish_specs_validated},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}}})],1),a("v-col",{staticClass:"input-fields"},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Alamitta",id:"fish_"+(i+1)+"_minsize",maxlength:40,value:"0",counter:40,rules:t.rules,disabled:t.fish_specs_validated},on:{paste:function(t){t.preventDefault()}}})],1)],1)],1)})),0):a("p",{staticClass:"flow-text center-align"},[t._v(" Yhtään kalaa ei ole valittu! ")])])],1),a("v-row",[t.selected.length&&!t.validated?a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("fishes")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.checkFishSpecs}},[a("i",{staticClass:"material-icons left"},[t._v("check")]),t._v("Tarkista tiedot")])],1)],1):a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("fishes")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[a("i",{staticClass:"material-icons left"},[t._v("settings")]),t._v("Muuta tietoja")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("summary")}}},[a("i",{staticClass:"material-icons right"},[t._v("arrow_forward")]),t._v("Jatka")])],1)],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"summary"}},[t.loading?a("v-container",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Tallennetaan kilpailua tietokantaan... ")]),a("ProgressBarQuery")],1):a("v-container",[a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Perustiedot ")])])],1),a("v-row",{staticClass:"basic_summary"},[a("v-col",[a("table",{staticClass:"centered responsive-table highlight",class:{"white--text":t.$store.getters.getTheme}},[a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Kilpailu ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.name)+" ("+t._s(t.locality)+") ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v("Cup")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.cup.name)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Voittajan Cup sijoittumispisteet ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.cup_placement_points)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Kilpailijoiden Cup osallistumispisteet ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.cup_participation_points)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Kilpailun Cup pistekerroin ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.cup_points_multiplier)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Onko Tiimikilpailua? ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.team_competition)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Aloituspäivä ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.start_date)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Lopetuspäivä ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.end_date)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Kilpailuajankohta ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.start_time)+" - "+t._s(t.end_time)+" ")])])])])],1),a("v-row",[a("v-col",{attrs:{md:"12"}},[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kalojen määritykset ")])])],1),a("v-row",{staticClass:"fishes_summary"},[a("v-col",{attrs:{md:"12"}},[a("table",{staticClass:"highlight centered responsive-table table_header",class:{"white--text":t.$store.getters.getTheme}},[a("thead",[a("tr",[a("th",[t._v("Kalalaji")]),a("th",[t._v("Pistekerroin")]),a("th",[t._v("Alamitta")])])]),a("tbody",t._l(t.completed_fish_specs,(function(e,i){return a("tr",{key:i},[a("th",{staticStyle:{border:"1px solid black"},attrs:{scope:"row"}},[t._v(" "+t._s(e.name)+" ")]),a("td",{staticStyle:{border:"1px solid black"}},[t._v(" x "+t._s(e.multiplier)+" ")]),a("td",{staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(e.minsize)+" cm ")])])})),0)])])],1),a("v-row",[a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"5","offset-md":"1"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("points")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),t.validated?a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"5"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.submitCompetition}},[a("i",{staticClass:"material-icons left"},[t._v("add_circle_outline")]),t._v("Luo kilpailu näillä tiedoilla")])],1):t._e()],1)],1)],1)],1)],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section"},[a("div",{staticClass:"col s12 center-align"},[a("h1",[t._v("Kilpailun luonti")])])])}],n=(a("99af"),a("7db0"),a("4160"),a("c975"),a("d81d"),a("fb6a"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("159b"),a("2909")),r=(a("96cf"),a("1da1")),o=a("4d5c"),l=a.n(o),c=a("7149"),u=a("51dd"),d=a("a822"),m=a("96c7"),p=a("e0b1"),h={name:"RegisterComp",components:{ProgressBarQuery:d["default"],Header:m["default"]},data:function(){var t=this;return{tab:null,errors:[],selected:[],days_options:[1,2,3,4,5,6,7],name:null,locality:null,cups:[],cup:{},cup_placement_points:30,cup_participation_points:5,cup_points_multiplier:1,team_competition:"Ei",start_date:(new Date).toISOString().substr(0,10),end_date:(new Date).toISOString().substr(0,10),start_time:null,end_time:null,basic_info:null,completed_fish_specs:[],basic_info_validated:!1,fish_species_validated:!1,fish_specs_validated:!1,validated:!1,loading:!1,max_input:40,tabs:null,rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(e){return(e||"").length<=t.max_input||"Enintään 40 merkkiä"}],number_rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],placement_points_array:[{points:35,placement:1},{points:33,placement:2},{points:31,placement:3},{points:29,placement:4},{points:27,placement:5},{points:25,placement:6},{points:24,placement:7},{points:23,placement:8},{points:22,placement:9},{points:21,placement:10},{points:20,placement:11},{points:19,placement:12},{points:18,placement:13},{points:17,placement:14},{points:16,placement:15},{points:15,placement:16},{points:14,placement:17},{points:13,placement:18},{points:12,placement:19},{points:11,placement:20},{points:10,placement:21},{points:9,placement:22},{points:8,placement:23},{points:7,placement:24},{points:6,placement:25},{points:5,placement:26}],activator:null,attach:null,colors:["green lighten-2","purple lighten-2","indigo lighten-2","cyan lighten-2","teal lighten-2","orange lighten-2"],options:[{text:"Ahven",color:"blue lighten-1"},{text:"Hauki",color:"red lighten-1"},{text:"Kuha",color:"green lighten-1"},{text:"Lohi",color:"purple lighten-1"},{text:"Taimen",color:"indigo lighten-1"}],editing:null,editingIndex:-1,nonce:1,menu:!1,x:0,search:null,y:0}},mounted:function(){l.a.AutoInit(),this.checkLogin(),this.getCups(),location.href="#",location.href="#app"},watch:{selected:function(t,e){var a=this;t.length!==e.length&&(this.selected=t.map((function(t){if("string"===typeof t){var e=0;a.nonce>=1&&(e=a.nonce-1),t={text:t,color:a.colors[e]},a.options.push(t),a.nonce++}return t})))}},methods:{changeTab:function(t){this.tab=t},edit:function(t,e){this.editing?(this.editing=null,this.editingIndex=-1):(this.editing=e,this.editingIndex=t)},filter:function(t,e,a){if(t.header)return!1;var i=function(t){return null!=t?t:""},s=i(a),n=i(e);return s.toString().toLowerCase().indexOf(n.toString().toLowerCase())>-1},getCups:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")),i=a["id"],t.loading=!0,e.prev=3,e.next=6,u["a"].getCups({user_id:i});case 6:t.cups=e.sent,t.cups.length&&(t.cups.sort((function(t,e){return t.name-e.name})),t.cups.forEach((function(t){t.select="".concat(t.name," (").concat(t.year,")")})),t.$route.query.cup?t.cup=t.cups.find((function(e){return e.id===t.$route.query.cup})):t.cup=t.cups[t.cups.length-1]),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.error=e.t0.message;case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))()},isNumber:function(t,e){var a=46,i=".";e||(a=58,i=":"),t=t||window.event;var s=t.which?t.which:t.keyCode;if(s>31&&(s<48||s>57)&&s!==a)t.preventDefault();else{if(s!=a)return!0;if(!(t.target.value.indexOf(i)>=0))return!0;t.preventDefault()}},showError:function(t){this.errors.push(t),l.a.toast({html:t}),location.href="#",location.href="#app"},checkBasicInformation:function(){var t=this;this.errors=[],this.basic_info_validated=!1,this.validated=!1;var e=this.$moment(this.start_date,"YYYY-M-D",!0).isValid(),a=this.$moment(this.end_date,"YYYY-M-D",!0).isValid(),i=this.$moment(this.start_time,"H:mm",!0).isValid(),s=this.$moment(this.end_time,"H:mm",!0).isValid();if(this.name||this.showError("Kilpailun nimi puuttuu!"),this.locality||this.showError("Kilpailun paikkakunta puuttuu!"),this.cup.id||this.showError("Cuppia ei valittuna!"),this.cup_placement_points||this.showError("Määritä kilpailun voittajalle Cup sijoittumispisteet (Voittaja saa pisteet: Sijoittumispisteet + Osallistumispisteet)!"),this.cup_participation_points||this.showError("Määritä kilpailun Cup osallistumispisteet!"),this.cup_points_multiplier||this.showError("Kilpailun pistekerroin puuttuu!"),this.cup_points_multiplier<.1&&this.showError("Kilpailun pistekerroin pitää olla vähintään 0.1!"),this.start_time&&i||(1==!this.start_time?this.showError("Kilpailun alkamisnaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.start_time)),this.end_time&&s||(1==!this.end_time?this.showError("Kilpailun loppumisaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.end_time)),this.start_date&&e||(1==!this.start_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)')),this.end_date&&a){var r=this.$moment(this.start_date).format("DD.MM.YYYY"),o=this.$moment(this.end_date).format("DD.MM.YYYY"),l=this.$moment("".concat(r," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),c=this.$moment("".concat(o," ").concat(this.end_time),"DD.MM.YYYY HH:mm");c.isBefore(l,"minutes")&&this.showError("Kilpailun päättymispäivämäärä ja kellonaika ei voi olla ennen alkamispäivämäärää!")}else 1==!this.end_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)');if(!this.errors.length){var u=this.$moment(this.start_date).format("DD.MM.YYYY"),d=this.$moment(this.end_date).format("DD.MM.YYYY"),m=this.$moment("".concat(u," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),p=this.$moment("".concat(d," ").concat(this.end_time),"DD.MM.YYYY HH:mm"),h=[];if(1!==this.cup_points_multiplier){var _=1;this.placement_points_array.forEach((function(e){h.push({placement:_,points:(e.points-t.cup_participation_points)*t.cup_points_multiplier+t.cup_participation_points}),_++}))}else h=Object(n["a"])(this.placement_points_array);this.basic_info={name:this.name,locality:this.locality,cup_name:this.cup.name,cup_placement_points:Number(this.cup_placement_points),cup_participation_points:Number(this.cup_participation_points),cup_placement_points_array:h,cup_points_multiplier:Number(this.cup_points_multiplier),team_competition:"Ei"!==this.team_competition,start_date:m,end_date:p,start_time:this.start_time,end_time:this.end_time},this.disableInputs(!0),this.tab="fishes"}},checkFishSpecies:function(){this.errors=[],this.fish_species_validated=!1,this.validated=!1,this.selected.length?(this.selected.forEach((function(t){t.text.length>40&&(t.text=t.text.slice(0,40))})),this.disableInputs(!0),this.tab="points"):(this.fish_species_validated=!1,this.showError("Yhtään kalalajia ei ole valittu!"))},checkFishSpecs:function(){this.completed_fish_specs=[];var t=p["a"].getRandomColors(this.selected.length);this.errors=[];for(var e=1;e<this.selected.length+1;e++){var a={name:document.getElementById("fish_".concat(e,"_name")).innerHTML.replace("".concat(e,". "),""),multiplier:Number(document.getElementById("fish_".concat(e,"_multiplier")).value),minsize:document.getElementById("fish_".concat(e,"_minsize")).value,weights:0,color:t[e-1]};!a.multiplier||!a.minsize||parseInt(a.multiplier)<1||parseInt(a.minsize)<0?this.showError("Syötä kalan '".concat(a.name,"' kaikki tiedot oikein! (Pistekerroin > 0, Alamitta >= 0 )")):this.completed_fish_specs.push(a)}!this.errors.length&&this.completed_fish_specs.length==this.selected.length&&this.completed_fish_specs.length>0?(this.fish_specs_validated=!0,this.basic_info_validated&&this.fish_species_validated&&this.fish_specs_validated?(this.disableInputs(!0),this.tab="summary"):(this.validated=!1,0==this.basic_info_validated?this.showError("Tarkista kilpailun perustiedot!"):console.log("Perustiedot kunnossa!"),0==this.fish_species_validated?this.showError("Tarkista kalojen tiedot!"):console.log("Kalojen tiedot kunnossa!"),0==this.fish_specs_validated?this.showError("Tarkista kalojen pistekertoimet ja alamitat!"):console.log("Kalojen pistekertoimet ja alamitat kunnossa!"))):this.showError("Joitain tietoja puuttuu vielä!")},disableInputs:function(t){"basic-info"===this.tab&&(t?this.basic_info_validated=!0:(this.basic_info_validated=!1,this.validated=!1)),"fishes"===this.tab&&(t?this.fish_species_validated=!0:(this.fish_species_validated=!1,this.validated=!1)),"points"===this.tab&&(t?(this.fish_specs_validated=!0,this.validated=!0):(this.fish_specs_validated=!1,this.validated=!1))},submitCompetition:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.validated){e.next=18;break}return t.loading=!0,a=JSON.parse(localStorage.getItem("user")),i=a["id"],s=t.cup.id,n={cup_id:s,user_id:i,name:t.basic_info.name,locality:t.basic_info.locality,cup_name:t.basic_info.cup_name,cup_placement_points:t.basic_info.cup_placement_points,cup_placement_points_array:t.basic_info.cup_placement_points_array,cup_participation_points:t.basic_info.cup_participation_points,cup_points_multiplier:t.basic_info.cup_points_multiplier,team_competition:t.basic_info.team_competition,start_date:t.basic_info.start_date,end_date:t.basic_info.end_date,duration:t.basic_info.duration,start_time:t.basic_info.start_time,end_time:t.basic_info.end_time,fishes:t.completed_fish_specs,state:"Rekisteröity",total_weights:0,signees:[],results:[],teams:[],biggest_fishes:{},biggest_amounts:{}},e.prev=6,e.next=9,c["a"].insertCompetition(n);case 9:l.a.toast({html:"Kilpailu lisätty tietokantaan!"}),t.$router.push({path:"/continue"}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](6),t.errors.push(e.t0.message);case 16:e.next=19;break;case 18:t.errors.push("Not validated somehow?");case 19:case"end":return e.stop()}}),e,null,[[6,13]])})))()},checkLogin:function(){var t=JSON.parse(localStorage.getItem("user")),e=localStorage.getItem("jwt");null!=t&&null!=e?(this.$store.state.logged_in=!0,1==t.is_admin?this.$store.state.is_admin=!0:this.$store.state.is_admin=!1):(t&&localStorage.removeItem("user"),e&&localStorage.removeItem("jwt"),this.$store.state.logged_in=!1,this.$store.state.is_admin=!1,l.a.toast({html:"Tapahtui virhe... Kirjaudu sisään uudestaan"}))}}},_=h,v=a("2877"),g=a("6544"),f=a.n(g),b=a("0798"),k=a("8336"),x=a("cc20"),w=a("62ad"),y=a("2b5d"),C=a("a523"),$=a("2e4b"),T=a("132d"),S=a("da13"),j=a("1800"),V=a("67b6"),I=a("43a6"),P=a("0fd9"),E=a("b974"),K=a("2fa4"),D=a("71a3"),L=a("c671"),A=a("fe57"),Y=a("aac8"),O=a("9a96"),F=a("8654"),N=a("c964"),R=Object(v["a"])(_,i,s,!1,null,null,null);e["default"]=R.exports;f()(R,{VAlert:b["a"],VBtn:k["a"],VChip:x["a"],VCol:w["a"],VCombobox:y["a"],VContainer:C["a"],VDatePicker:$["a"],VIcon:T["a"],VListItem:S["a"],VListItemAction:j["a"],VRadio:V["a"],VRadioGroup:I["a"],VRow:P["a"],VSelect:E["a"],VSpacer:K["a"],VTab:D["a"],VTabItem:L["a"],VTabs:A["a"],VTabsItems:Y["a"],VTabsSlider:O["a"],VTextField:F["a"],VTimePicker:N["a"]})}}]);
//# sourceMappingURL=about~b1bc70ec.89b44d27.js.map