(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about~7c5ad5f5"],{"06e3":function(t,e,a){"use strict";a("215d")},"215d":function(t,e,a){},"4b37":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",tile:"",dark:t.$store.getters.getTheme}},[a("v-list",{attrs:{dense:""}},[a("p",[t._v("Navigointi")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[a("v-divider"),t._l(t.items,(function(e,i){return a("div",{key:i},[a("v-list-item",{attrs:{disabled:t.$router.currentRoute.path===e.path},on:{click:function(a){return t.changePage(e.path)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1),a("v-divider")],1)}))],2)],1)],1)],1),a("v-container",{staticStyle:{width:"70%"}},[a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme}},[a("v-card",{staticStyle:{"background-color":"rgba(0, 0, 0, 0)"},attrs:{dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"12"}},[a("v-row",[a("v-col",{attrs:{md:"7"}},[a("h1",{staticStyle:{margin:"30px"}},[t._v("Punnitus")])]),a("v-col",{attrs:{md:"5"}},[a("div",{staticClass:"text-center"},[a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("p",{class:{"black-text":!t.$store.getters.getTheme,"white-text":t.$store.getters.getTheme},staticStyle:{margin:"10px"}},[t._v(" Kello/Kilpailuaika ")]),a("v-btn",t._g(t._b({attrs:{text:"",outlined:"",color:"red darken-4",dark:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-timer")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme,width:"600px"}},[a("Timedate"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Sulje ")])],1)],1)],1)],1)])],1)],1)],1)],1),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#weighting"}},[t._v("Punnitus")]),a("v-tab",{attrs:{href:"#situation"}},[t._v("Tilannekatsaus")]),a("v-tab",{attrs:{href:"#onwater"}},[t._v("Vielä vesillä")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(0, 0, 0, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"weighting"}},[t.loading_site?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan veneitä... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",[t.signees.length?a("v-row",[a("v-col",[a("v-row",[a("v-col",[a("p",{staticClass:"flow-text center",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Punnitus ")])])],1),t.notification?a("v-row",[a("v-col",[a("v-alert",{attrs:{type:"success"}},[t._v(" "+t._s(t.notification)+" ")])],1)],1):t._e(),t.loading?t._e():a("v-row",[a("v-col",{class:{"grey darken-4":t.$store.getters.getTheme,"input-fields":!t.$store.getters.getTheme},staticStyle:{padding:"20px"},attrs:{md:"6","offset-md":"3"}},[a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Venekunta ")])]),a("v-col",{staticClass:"d-flex"},[a("v-autocomplete",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.sortedArray,"item-text":"select",label:"Valitse tai hae venekunta",hint:void 0!==t.boat_number_input["boat_number"]?"("+t.boat_number_input.boat_number+")\n                        "+t.boat_number_input.captain_name+",\n                        "+t.boat_number_input.temp_captain_name:"Valitse tai hae venekunta",disabled:t.loading_site,outlined:"","return-object":"","single-line":""},on:{input:function(e){return t.fetchFromDatabase(t.boat_number_input?t.boat_number_input.boat_number:-1)}},scopedSlots:t._u([{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-item-icon",[e.item.returned?a("v-icon",{attrs:{color:"green"}},[t._v("mdi-checkbox-marked-circle")]):a("v-icon",{attrs:{color:"yellow"}},[t._v("mdi-progress-question")])],1),a("v-list-item-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-item-icon",[e.item.returned?a("v-icon",{attrs:{color:"green"}},[t._v("mdi-checkbox-marked-circle")]):a("v-icon",{attrs:{color:"yellow darken-2"}},[t._v("mdi-account-question")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.item.boat_number)}}),a("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.item.captain_name)}})],1)]]}}],null,!1,554738487),model:{value:t.boat_number_input,callback:function(e){t.boat_number_input=e},expression:"boat_number_input"}})],1)],1)],1),t.competition_boat?t._e():a("v-row",[a("v-col",[t.loading?a("v-alert",{attrs:{type:"info"}}):t._e(),t.searched?a("v-alert",{attrs:{type:"error"}},[t._v(" Numerolla ei löytynyt venekuntaa tietokannasta! ")]):a("v-alert",{attrs:{type:"warning"}},[t._v(" Venekuntaa ei valittuna ")])],1)],1),t.competition_boat?a("v-row",[a("v-col",{attrs:{md:"8","offset-md":"2"}},[t.loading?t._e():a("v-row",[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-btn",{attrs:{large:"",block:"",color:"yellow"},on:{click:t.clearInputs}},[a("v-icon",[t._v("mdi-backspace-reverse-outline")]),t._v("Peruuta valinta")],1)],1)],1)],1),a("v-col",{staticStyle:{"margin-bottom":"30px"},attrs:{md:"12"}},[a("v-divider",{staticClass:"black"})],1),a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-col",[t.$store.getters.getCompetitionFishes.length?a("ul",{attrs:{id:"fish_weights"}},[a("li",{staticStyle:{padding:"10px","margin-bottom":"10px"}},[t.loading_fish?a("v-row",[a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Lisätään kala tietokantaan... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",{attrs:{md:"3"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Suurin kala? ")])]),a("v-col",{attrs:{md:"4"}},[a("v-select",{staticClass:"flow-text",attrs:{outlined:"",label:"Valitse kalalaji painamalla","item-text":"name",items:t.competition_fishes,dark:t.$store.getters.getTheme},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{attrs:{color:"primary",close:""},on:{"click:close":function(e){t.selected_fish=null}}},[t._v(" "+t._s(e.item.name)+" ")])]}}],null,!1,4227073677),model:{value:t.selected_fish,callback:function(e){t.selected_fish=e},expression:"selected_fish"}})],1),a("v-col",{staticClass:"input-fields",attrs:{md:"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Paino grammoina",type:"number",value:"0",step:"50",min:"0",rules:t.number_rules,loading:t.loading_fish},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e)}},model:{value:t.biggest_fish,callback:function(e){t.biggest_fish=e},expression:"biggest_fish"}})],1),a("v-col",{attrs:{md:"2"}},[t.selected_fish&&t.biggest_fish?a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.saveBiggestFish}},[a("v-icon",[t._v("mdi-content-save")]),t._v("Tallenna")],1):t._e()],1)],1)],1),t._l(t.inputs,(function(e,i){return a("li",{key:i},[a("v-row",[a("v-col",{attrs:{md:"12"}},[a("v-divider",{staticClass:"black"})],1)],1),a("v-row",[a("v-col",{attrs:{md:"6"}},[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" "+t._s(i+1)+". ")]),a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" "+t._s(e.name)+" ")])]),a("v-col",{staticClass:"input-fields",attrs:{md:"4"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Paino grammoina",type:"number",value:"0",step:"50",min:"0",rules:t.number_rules,loading:t.loading_fish},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"input.value"}})],1),a("v-col",{attrs:{md:"2"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",dark:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-plus")]),t._v("Plussaa")],1)]}}],null,!0),model:{value:e.dialog,callback:function(a){t.$set(e,"dialog",a)},expression:"input.dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Yhteenlaske summat")])]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{staticClass:"title",attrs:{label:"Alkuperäinen arvo",value:e.value,disabled:""}})],1)],1),a("v-row",[a("v-col",{attrs:{md:"6 ","offset-md":"3"}},[a("v-text-field",{attrs:{label:"Lisättävä arvo",type:"number",step:"50",min:"0","single-line":"",outlined:""},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e)}},model:{value:e.addition,callback:function(a){t.$set(e,"addition",a)},expression:"input.addition"}})],1)],1),a("v-row",[a("v-col",{staticClass:"title red--text",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{value:parseInt(e.value)+parseInt(e.addition?e.addition:0),label:"Summa",disabled:""}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{outlined:"",color:"red darken-1"},on:{click:function(t){e.addition=null,e.dialog=!1}}},[t._v("Peruuta")]),a("v-btn",{attrs:{outlined:"",color:"green darken-1"},on:{click:function(t){e.value=parseInt(e.value)+parseInt(e.addition?e.addition:0),e.dialog=!1,e.addition=0}}},[t._v("Tallenna")])],1)],1)],1)],1)],1)],1)}))],2):t._e(),a("v-row",[a("v-col",{attrs:{md:"12"}},[a("v-divider",{staticClass:"black"})],1)],1),t.loading?t._e():a("v-row",[a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"red",loading:t.refreshing},on:{click:function(e){return t.saveToDatabase(!0)}}},[a("v-icon",[t._v("mdi-delete")]),t._v("Nollaa")],1)],1),a("v-col",[t.refreshing?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Synkronoidaan tietokannan kanssa... ")]):t._e()]),a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"green",loading:t.refreshing},on:{click:function(e){return t.saveToDatabase(!1)}}},[a("v-icon",[t._v("mdi-check")]),t._v("Tallenna")],1)],1)],1),t.loading?a("v-row",[a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tiedot tietokantaan... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",tile:"",color:"blue darken-4"},on:{click:function(e){return t.refreshCompetition(t.competition_id)}}},[a("v-icon",[t._v("mdi-update")]),t._v("Päivitä kilpailun tiedot ")],1)],1)],1)],1)],1)],1):t._e()],1)],1):a("v-row",[a("v-col",{staticStyle:{padding:"30px"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kilpailussa ei vielä ilmoittautuneita! ")])])],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"situation"}},[a("v-row",[a("v-col",[t.result_signees.length?a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"8","offset-md":"2"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Tilannekatsaus")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.sortedCompetition,search:t.search},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.total_points",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:t.getColorPoints(i.total_points)}},[t._v(t._s(i.total_points.toLocaleString())+" p")])]}}],null,!0)})],1)],1)],1):t._e(),t.selected_id&&t.result_signees.length?a("v-row",[a("v-col",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{md:"8","offset-md":"2"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue"},on:{click:t.searchSelected}},[a("v-icon",[t._v("mdi-arrow-right")]),t._v("Siirry punnitukseen")],1)],1)],1):a("v-row",[a("v-col",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{md:"8","offset-md":"2"}},[t.result_signees.length?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Voit siirtyä punnitukseen myös klikkaamalla haluamaasi riviä taulukosta ja painamalla ilmestyvää nappulaa ")]):a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei vielä tuloksia! ")])])],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"onwater"}},[a("v-row",[a("v-col",[t.signees.length&&t.still_on_water.length?t._e():a("v-row",[a("v-col",{staticClass:"input-fields",staticStyle:{"margin-top":"100px"},attrs:{md:"8","offset-md":"2"}},[t.signees.length?t._e():a("p",{staticClass:"flow-text red--text"},[t._v(" Kilpailussa ei vielä ilmoittautuneita! ")]),!t.still_on_water.length&&t.signees.length?a("p",{staticClass:"flow-text green--text"},[t._v(" Kaikki venekunnat palanneet maaliin! ")]):t._e()])],1),t.still_on_water.length?a("v-row",{staticStyle:{"margin-top":"20px"}},[a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v(" Venekunnat, jotka ovat vielä vesillä ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_on_water,callback:function(e){t.search_on_water=e},expression:"search_on_water"}}),t._v(" >")],1),a("v-data-table",{attrs:{headers:t.headers_on_water,items:t.still_on_water,search:t.search_on_water,loading:t.loading},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"item.boat_number",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.boat_number)+".")])]}}],null,!0)})],1)],1)],1):t._e(),t.selected_id&&t.still_on_water.length?a("v-row",[a("v-col",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{md:"8","offset-md":"2"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue"},on:{click:t.searchSelected}},[a("v-icon",[t._v("mdi-arrow-right")]),t._v("Siirry punnitukseen")],1)],1)],1):a("v-row",[a("v-col",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{md:"8","offset-md":"2"}},[t.still_on_water.length?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Voit siirtyä punnitukseen myös klikkaamalla haluamaasi riviä taulukosta ja painamalla ilmestyvää nappulaa ")]):t._e(),t.still_on_water.length?a("v-btn",{staticClass:"white--text",attrs:{large:"",tile:"",color:"grey darken-4",loading:t.loading},on:{click:t.allFinished}},[a("v-icon",[t._v("mdi-check-outline")]),t._v("Kaikki saapuneet maaliin")],1):t._e()],1)],1)],1)],1)],1)],1)],1)]),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=a("1da1"),o=a("2909"),r=(a("96cf"),a("4e827"),a("d3b7"),a("159b"),a("99af"),a("b0c0"),a("7db0"),a("c740"),a("a434"),a("4de4"),a("6062"),a("3ca3"),a("ddb0"),a("7149")),l=a("b3a7"),c=a("a822"),u={name:"Weighting",components:{Timedate:l["a"],ProgressBarQuery:c["default"]},data:function(){return{dialog:!1,tab:null,competition_id:null,boat_number_input:{},competition_boat:null,calculated_total_weights:null,calculated_fish_weights:null,searched:!1,selected_id:null,selected_boat_number:null,loading:!1,refreshing:!1,loading_fish:!1,loading_site:!0,notification:null,biggest_fish:null,selected_fish:null,competition_fishes:[],biggest_fishes:{},biggest_amounts:{},signees:[],result_signees:[],headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. Numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Pisteet",value:"total_points"}],headers_on_water:[{text:"Kilp. Numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Lähtöpaikka",value:"starting_place"}],search_on_water:"",search:"",still_on_water:[],number_rules:[function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],timer_refresh:null,interval:6e4,inputs:[],selectedItem:3,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}],snackbar:!1,text:"",timeout:5e3}},computed:{sortedArray:function(){return Object(o["a"])(this.signees).sort((function(t,e){return t.boat_number-e.boat_number}))},sortedCompetition:function(){var t=Object(o["a"])(this.signees).sort((function(t,e){return e.total_points-t.total_points})),e=1,a=-1,i=-1;return t.forEach((function(t){a===t.total_points?t.placement=i:(t.placement=e,a=t.total_points,i=t.placement),e++})),t}},created:function(){if(null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition"));this.competition_id=t["id"],this.loading_site=!0,this.refreshCompetition(this.competition_id)}},mounted:function(){if(!this.competition_id){var t=JSON.parse(localStorage.getItem("competition"));this.competition_id=t["id"],this.loading_site=!0,this.refreshCompetition(this.competition_id)}location.href="#",location.href="#app"},beforeDestroy:function(){},methods:{changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):(this.text="Olet jo tällä sivulla!",this.snackbar=!0)},refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n,o,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.refreshing=!0,a.prev=1,a.next=4,r["a"].getCompetitions({_id:t});case 4:i=a.sent,i?(s=i,n=e.calculateNormalResults(s),s.normal_points=n.normal_points,s.normal_weights=n.normal_weights,e.$store.commit("refreshCompetition",s),e.competition_fishes=e.$store.getters.getCompetitionFishes,e.signees=e.$store.getters.getCompetitionSignees,o=1,l=-1,c=-1,e.signees.forEach((function(t){t.select="".concat(t.boat_number,", ").concat(t.captain_name),l===t.total_points?t.placement=c:(t.placement=o,l=t.total_points,c=t.placement),o++})),e.result_signees=e.$store.getters.getResultSignees,e.still_on_water=e.$store.getters.getStillOnWaterSignees,e.competition_fishes.forEach((function(t){e.inputs.push({name:t.name,value:null,dialog:!1,addition:null})}))):console.log("No competition found on database..."),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),console.log(a.t0);case 11:e.loading_site=!1,e.refreshing=!1;case 13:case"end":return a.stop()}}),a,null,[[1,8]])})))()},allFinished:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.signees.forEach((function(t){t.returned=!0})),a=t.$store.getters.getCompetition,i=t.calculateNormalResults(a),a.normal_points=i.normal_points,a.normal_weights=i.normal_weights,a.signees=t.signees,t.$store.commit("refreshCompetition",a),e.prev=7,t.loading=!0,s={$set:{normal_points:a.normal_points,normal_weights:a.normal_weights,signees:a.signees}},e.next=12,r["a"].updateValues(a._id,s);case 12:t.loading=!1,t.still_on_water=t.$store.getters.getStillOnWaterSignees,t.text="Kaikki kilpailijat merkattu maaliin saapuneeksi!",t.snackbar=!0,e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](7),console.log(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[7,18]])})))()},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(e>31&&(e<48||e>57)&&46!==e)t.preventDefault();else{if(46!=e)return!0;t.preventDefault()}},searchBoatNumber:function(t){return this.$store.getters.getSigneeByBoatNumber(parseInt(t))},getColor:function(t){return t>30?"red":t>20?"orange":t>5?"yellow":"green"},getColorPoints:function(t){return t>0?"indigo":"grey"},rowClick:function(t,e){t.id==this.selected_id?(this.selected_id=null,this.selected_boat_number=null,e.select(!1)):(this.selected_row&&this.selected_row.select(!1),this.selected_id=t.id,this.selected_boat_number=t.boat_number,e.select(!0),this.selected_row=e)},setInputWeights:function(){var t=this;this.inputs.forEach((function(e){var a=e.name,i=t.competition_boat.weights.find((function(t){return t.name===a})).weights;e.value=i>0?i:null}))},searchSelected:function(){this.tab="weighting",this.fetchFromDatabase(this.selected_boat_number)},fetchFromDatabase:function(t){var e=this;this.selected_id=null,this.selected_boat_number=null,-1!==t?(this.searched=!0,this.notification=null,this.competition_boat=this.searchBoatNumber(t),this.competition_boat?(this.$nextTick((function(){return e.setInputWeights()})),this.boat_number_input=this.competition_boat):console.log("No such boat in list!")):this.clearInputs()},saveBiggestFish:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.selected_fish&&t.boat_number_input&&t.biggest_fish)){e.next=24;break}return a={name:t.selected_fish,boat_number:t.boat_number_input.boat_number,captain_name:t.boat_number_input.captain_name,weight:t.biggest_fish},t.$store.commit("addBiggestFish",a),t.biggest_fishes=t.$store.getters.getBiggestFishes,i=t.$store.getters.getCompetition,i.biggest_fishes=t.biggest_fishes,t.$store.commit("refreshCompetition",i),e.prev=7,t.loading_fish=!0,s={$set:{biggest_fishes:i.biggest_fishes}},e.next=12,r["a"].updateValues(i._id,s);case 12:t.notification="Tiedot päivitetty tietokantaan!",t.loading_fish=!1,t.selected_fish=null,t.biggest_fish=null,e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),console.log(e.t0.message);case 20:t.text="Isoin kala tallennettu listaan!",t.snackbar=!0,e.next=25;break;case 24:console.log("Jokin input tyhjänä:");case 25:case"end":return e.stop()}}),e,null,[[7,17]])})))()},saveToDatabase:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n,o,l,c,u,m,d,p,h,_;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.$store.getters.getCompetitionFishes,s=[],n=0,o=0,l=0,c=0,e.biggest_fishes=e.$store.getters.getBiggestFishes,e.selected_fish&&e.boat_number_input&&e.biggest_fish&&(m={name:e.selected_fish,boat_number:e.boat_number_input.boat_number,captain_name:e.boat_number_input.captain_name,weight:e.biggest_fish},e.$store.commit("addBiggestFish",m),e.biggest_fishes=e.$store.getters.getBiggestFishes,e.selected_fish=null,e.biggest_fish=null),t?(e.competition_boat.returned=!1,e.inputs.forEach((function(t){if(u=t.name,s.push({name:u,weights:l,points:c}),e.biggest_fishes&&e.biggest_fishes[u]){var a=e.biggest_fishes[u].findIndex((function(t){return parseInt(e.boat_number_input.boat_number)===parseInt(t.boat_number)}));a>-1&&e.biggest_fishes[u].splice(a,1)}if(e.biggest_amounts&&e.biggest_amounts[u]){var i=e.biggest_amounts[u].findIndex((function(t){return parseInt(e.boat_number_input.boat_number)===parseInt(t.boat_number)}));i>-1&&e.biggest_amounts[u].splice(i,1)}}))):(e.competition_boat.returned=!0,e.inputs.forEach((function(t){u=t.name,l=parseInt(t.value?t.value:0);var a=i.find((function(t){return t.name===u})).multiplier;c=l*a,s.push({name:u,weights:l,points:c});var r={name:u,boat_number:e.competition_boat.boat_number,captain_name:e.competition_boat.captain_name,weight:l};e.$store.commit("addBiggestAmount",r),e.biggest_amounts=e.$store.getters.getBiggestAmounts,n+=l,o+=c}))),e.competition_boat.weights=s,e.competition_boat.total_weights=n,e.competition_boat.total_points=o,e.$store.commit("replaceSignee",e.competition_boat),d=e.$store.getters.getCompetition,p=e.calculateNormalResults(d),h=e.calculateTotalWeights(),d.signees=e.$store.getters.getCompetitionSignees,d.normal_points=p.normal_points,d.normal_weights=p.normal_weights,d.team_competition&&(d.team_results=e.calculateTeamResults()),d.biggest_fishes=e.biggest_fishes,d.biggest_amounts=e.biggest_amounts,d.total_weights=h.total_weights,d.fishes=h.competition_fishes,e.still_on_water.length?d.state="Punnitus":d.state="Kaikki maalissa",e.$store.commit("refreshCompetition",d),a.prev=26,e.loading=!0,e.loading_fish=!0,_={$set:{signees:d.signees,normal_points:d.normal_points,normal_weights:d.normal_weights,team_results:d.team_results,biggest_fishes:d.biggest_fishes,biggest_amounts:d.biggest_amounts,fishes:d.fishes,total_weights:d.total_weights,state:d.state}},a.next=32,r["a"].updateValues(d._id,_);case 32:e.notification="Tiedot päivitetty tietokantaan!",e.boat_number_input={},e.competition_boat=null,e.signees=d.signees,e.competition_fishes=e.$store.getters.getCompetitionFishes,e.calculated_total_weights=e.$store.getters.getCompetitionTotalWeights,e.result_signees=e.$store.getters.getResultSignees,e.still_on_water=e.$store.getters.getStillOnWaterSignees,a.next=45;break;case 42:a.prev=42,a.t0=a["catch"](26),console.log(a.t0.message);case 45:e.loading=!1,e.loading_fish=!1,e.searched=!1;case 48:case"end":return a.stop()}}),a,null,[[26,42]])})))()},calculateNormalResults:function(t){var e,a=t.cup_points_multiplier,i=t.cup_placement_points,s=t.cup_participation_points,n=0,o=0,r=1,l=0,c=[],u=[];this.signees=t.signees.filter((function(t){return 1==t.returned})),this.signees=this.signees.sort((function(t,e){return parseInt(e.total_points)-parseInt(t.total_points)})),this.signees.forEach((function(t){e=0,c.length?(t.total_points==n?(r-=1,o+=1):r+=o,0==t.total_points&&(i=0,t.total_points===n&&(o+=1)),l<=5?t.total_points!==n&&t.total_points>0&&(i-=2*(o+1),o=0):i<=0?(i=0,o=0):t.total_points!==n&&(i-=1*(o+1),o=0)):(0==t.total_points&&(i=0),n=t.total_points,e=i*a+s),e=i>0?i*a+s:s,c.push({placement:r,boat_number:t.boat_number,captain_name:t.captain_name,temp_captain_name:t.temp_captain_name,locality:t.locality,total_points:t.total_points.toLocaleString(),cup_placement_points:i*a,cup_participation_points:s,cup_points_total:e}),l++;var m={};m.placement=r,m.boat_number=t.boat_number,m.captain_name=t.captain_name,t.weights.forEach((function(t){var e=t.name,a=t.weights;m[e]=a})),m.total_points=t.total_points,u.push(m),n=t.total_points,o>0?r+=o:r++}));var m={normal_points:c,normal_weights:u};return m},calculateTeamResults:function(){var t=this,e=[],a=[];return this.signees.forEach((function(t){"-"!==t.team&&null!==t.team&&e.push(t.team)})),e=Object(o["a"])(new Set(e)),e.forEach((function(e){var i=t.signees.filter((function(t){return t.team==e})),s=0,n=[];i.forEach((function(t){n.push(t.captain_name),s+=t.total_points})),1===n.length&&(n.push("-"),n.push("-")),2===n.length&&n.push("-"),a.push({name:e,captain_name_1:n[0],captain_name_2:n[1],captain_name_3:n[2],points:s.toLocaleString()})})),a},calculateTotalWeights:function(){for(var t=this.$store.getters.getFinishedSignees,e=this.$store.getters.getCompetitionFishes,a=0,i=0;i<e.length;i++)e[i].weights=0;return t.forEach((function(t){for(var i=function(i){var s=t.weights.find((function(t){return e[i].name==t.name})).weights;e[i].weights+=parseInt(s),a+=parseInt(s)},s=0;s<e.length;s++)i(s)})),{total_weights:a,competition_fishes:e}},clearInputs:function(){this.text="Pyyhitään inputit ja valinnat...",this.snackbar=!0,this.inputs.forEach((function(t){t.value=null})),this.competition_boat=null,this.boat_number_input={},this.selected_fish=null,this.biggest_fish=null,this.searched=!1}}},m=u,d=a("2877"),p=a("6544"),h=a.n(p),_=a("0798"),v=a("c6a6"),g=a("8336"),f=a("b0af"),b=a("99d9"),k=a("cc20"),x=a("62ad"),w=a("a523"),y=a("8fea"),T=a("169a"),C=a("ce7e"),$=a("132d"),S=a("8860"),V=a("da13"),I=a("5d23"),j=a("1baa"),P=a("34c3"),E=a("f774"),D=a("0fd9"),K=a("b974"),N=a("2db4"),L=a("2fa4"),B=a("71a3"),R=a("c671"),O=a("fe57"),F=a("aac8"),M=a("9a96"),Y=a("8654"),A=Object(d["a"])(m,i,s,!1,null,null,null);e["default"]=A.exports;h()(A,{VAlert:_["a"],VAutocomplete:v["a"],VBtn:g["a"],VCard:f["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VChip:k["a"],VCol:x["a"],VContainer:w["a"],VDataTable:y["a"],VDialog:T["a"],VDivider:C["a"],VIcon:$["a"],VList:S["a"],VListItem:V["a"],VListItemContent:I["a"],VListItemGroup:j["a"],VListItemIcon:P["a"],VListItemSubtitle:I["b"],VListItemTitle:I["c"],VNavigationDrawer:E["a"],VRow:D["a"],VSelect:K["a"],VSnackbar:N["a"],VSpacer:L["a"],VTab:B["a"],VTabItem:R["a"],VTabs:O["a"],VTabsItems:F["a"],VTabsSlider:M["a"],VTextField:Y["a"]})},"73cf":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",[a("v-card",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme},staticStyle:{padding:"30px",margin:"auto"},attrs:{"max-width":"800px",dark:t.$store.getters.getTheme}},[t.errors.length?a("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),a("v-list",t._l(t.errors,(function(e,i){return a("v-list-item",{key:i},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),a("v-row",[a("v-col",[a("h1",{staticStyle:{margin:"30px"}},[t._v("Register")])])],1),a("form",[a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Käyttäjänimi",id:"name",name:"name",type:"text",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Sähköpostiosoite",id:"email",name:"email",type:"email",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasana",id:"password",name:"password",type:"password",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasanan vahvistus",id:"password_confirmation",name:"password_confirmation",type:"password",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}})],1)],1),t.password&&t.password===t.password_confirmation?a("v-row",[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Salasanat täsmäävät! "),a("v-icon",[t._v("mdi-check-outline")])],1)])],1):a("v-row",[t.password&&t.password_confirmation?a("v-col",[a("span",{staticClass:"flow-text red-text"},[t._v("Salasanat ei täsmää! "),a("v-icon",[t._v("mdi-alert-circle")])],1)]):t._e()],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("span",{staticClass:"col s6 flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Admin?")]),a("v-radio-group",{attrs:{row:""},model:{value:t.is_admin,callback:function(e){t.is_admin=e},expression:"is_admin"}},[a("v-radio",{attrs:{label:"Kyllä",value:"Yes"}}),a("v-radio",{attrs:{label:"Ei",value:"No"}})],1)],1)],1),t.loading?a("ProgressBarQuery",{staticStyle:{"margin-bottom":"20px"}}):a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"sbtn",large:"",tile:"",color:"blue darken-4",disabled:0===t.password.length||t.password!==t.password_confirmation},on:{click:t.handleSubmit}},[a("v-icon",[t._v("mdi-account-plus")]),t._v("Rekisteröidy ")],1)],1)],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=a("1da1"),o=(a("96cf"),a("b0c0"),a("3faa")),r=a("a822"),l={props:["nextUrl"],data:function(){return{errors:[],name:"",email:"",password:"",password_confirmation:"",is_admin:"No",loading:!1,snackbar:!1,text:"",timeout:5e3}},components:{ProgressBarQuery:r["default"]},mounted:function(){var t=document.getElementById("password_confirmation");t.addEventListener("keyup",(function(t){13===t.keyCode&&(t.preventDefault(),document.getElementById("sbtn").click())})),location.href="#",location.href="#app"},methods:{showError:function(t){this.errors.push(t),location.href="#",location.href="#app"},handleSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.loading=!0,t.preventDefault(),e.errors=[],e.email||e.showError("Syötä sähköposti!"),e.password||e.showError("Syötä salasana!"),e.name||e.showError("Syötä nimi!"),!(e.password===e.password_confirmation&&e.password.length>0)){a.next=19;break}if(e.errors.length){a.next=16;break}return i={name:e.name,email:e.email,password:e.password,is_admin:"Yes"===e.is_admin},a.next=11,o["a"].insertUser(i);case 11:s=a.sent,e.loading=!1,s.success?e.showError("Käyttäjä rekisteröity!"):"Email is already in use!"===s.error.msg?e.showError("Sähköposti on jo käytössä!"):"Username is already taken!"===s.error.msg?e.showError("Käyttäjänimi on jo käytössä!"):(e.showError("Jokin meni pieleen... yritä uudelleen!"),console.log(s.error)),a.next=17;break;case 16:e.loading=!1;case 17:a.next=21;break;case 19:e.loading=!1,e.showError("Salasanat eivät vastaa toisiaan!");case 21:case"end":return a.stop()}}),a)})))()}}},c=l,u=a("2877"),m=a("6544"),d=a.n(m),p=a("0798"),h=a("8336"),_=a("b0af"),v=a("62ad"),g=a("a523"),f=a("132d"),b=a("8860"),k=a("da13"),x=a("5d23"),w=a("34c3"),y=a("67b6"),T=a("43a6"),C=a("0fd9"),$=a("2db4"),S=a("8654"),V=Object(u["a"])(c,i,s,!1,null,null,null);e["default"]=V.exports;d()(V,{VAlert:p["a"],VBtn:h["a"],VCard:_["a"],VCol:v["a"],VContainer:g["a"],VIcon:f["a"],VList:b["a"],VListItem:k["a"],VListItemContent:x["a"],VListItemIcon:w["a"],VListItemTitle:x["c"],VRadio:y["a"],VRadioGroup:T["a"],VRow:C["a"],VSnackbar:$["a"],VTextField:S["a"]})},"90ba":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-card",{staticClass:"mx-auto",staticStyle:{top:"0"},attrs:{"max-width":"400",tile:"",dark:t.$store.getters.getTheme}},[a("v-list",{attrs:{dense:""}},[a("p",[t._v("Navigointi")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[a("v-divider"),t._l(t.items,(function(e,i){return a("div",{key:i},[a("v-list-item",{attrs:{disabled:t.$router.currentRoute.path===e.path},on:{click:function(a){return t.changePage(e.path)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1),a("v-divider")],1)}))],2)],1)],1)],1),a("v-container",{staticStyle:{width:"70%"}},[t.errors.length?a("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),a("v-list",t._l(t.errors,(function(e,i){return a("v-list-item",{key:i},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme}},[a("v-card",{staticStyle:{"background-color":"rgba(0, 0, 0, 0)"},attrs:{dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"12"}},[a("v-row",[a("v-col",{attrs:{md:"7"}},[a("h1",{staticStyle:{margin:"30px"}},[t._v("Ilmoittautuminen")])]),a("v-col",{attrs:{md:"5"}},[a("div",{staticClass:"text-center"},[a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("p",{class:{"black-text":!t.$store.getters.getTheme,"white-text":t.$store.getters.getTheme},staticStyle:{margin:"10px"}},[t._v(" Kello/Kilpailuaika ")]),a("v-btn",t._g(t._b({attrs:{text:"",outlined:"",color:"red darken-4",dark:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-timer")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme,width:"600px"}},[a("Timedate"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Sulje ")])],1)],1)],1)],1)])],1)],1)],1)],1),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#signing"}},[t._v("Ilmoittautuminen")]),a("v-tab",{attrs:{href:"#signees"}},[t._v("Ilmoittautuneet")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(0, 0, 0, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"signing"}},[t.loading_site?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan veneitä... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",[a("v-row",{staticStyle:{"margin-top":"20px"}},[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ilmoittautuminen ")])])],1),t.notification?a("v-row",[a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("v-alert",{staticClass:"flow-text",attrs:{type:"info"}},[t._v(" "+t._s(t.notification)+" ")])],1)],1):t._e(),t.old_info?a("v-row",[a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Numeron ("+t._s(t.old_info.boat_number)+".) Vanhat tiedot ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Kippari:")]),t._v(" "+t._s(t.old_info.captain_name)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Varakippari:")]),t._v(" "+t._s(t.old_info.temp_captain_name)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Seura/Paikkakunta:")]),t._v(" "+t._s(t.old_info.locality)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Lähtöpaikka:")]),t._v(" "+t._s(t.old_info.starting_place)+" ")]),t.isTeamCompetition?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Joukkue:")]),t._v(" "+t._s(t.old_info.team)+" ")]):t._e()]),a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("v-divider",{staticClass:"black"})],1),a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Numeron ("+t._s(t.boat_number)+".) Uudet tiedot ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Kippari:")]),t._v(" "+t._s(t.captain_name)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Varakippari:")]),t._v(" "+t._s(t.temp_captain_name)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Seura/Paikkakunta:")]),t._v(" "+t._s(t.locality)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Lähtöpaikka:")]),t._v(" "+t._s(t.starting_place)+" ")]),t.isTeamCompetition?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Joukkue:")]),t._v(" "+t._s(t.team)+" ")]):t._e()]),a("v-col",{staticStyle:{"margin-bottom":"50px"},attrs:{md:"8","offset-md":"2"}},[a("v-divider",{staticClass:"black"})],1),a("v-row",[a("v-col",{attrs:{order:"first"}},[a("v-btn",{attrs:{large:"",tile:"",color:"yellow"},on:{click:function(e){return t.overwriteSignee(t.old_info,!1)}}},[a("v-icon",[t._v("mdi-cancel")]),t._v("Peruuta")],1)],1),a("v-col",{attrs:{order:"last"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.overwriteSignee(t.old_info,!0)}}},[a("v-icon",[t._v("mdi-check")]),t._v("Päällekirjoita")],1)],1)],1)],1):t._e(),t.old_info?t._e():a("v-row",{attrs:{id:"signing-inputs"}},[a("v-col",[a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"3","offset-md":"4"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Venekunnan numero","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,loading:t.loading},on:{"click:append-outer":function(e){t.boat_number>0?t.boat_number++:t.boat_number=1},"click:prepend":function(e){t.boat_number>1?t.boat_number--:t.boat_number=1},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.boat_number,callback:function(e){t.boat_number=e},expression:"boat_number"}})],1)],1),a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"2","offset-md":"2"}},[a("v-btn",{attrs:{large:"",block:"",color:"blue"},on:{click:t.searchFromCup}},[a("v-icon",[t._v("find_replace")]),t._v("Hae cupista")],1)],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"2","offset-md":"2"}},[a("v-btn",{attrs:{large:"",block:"",color:"indigo"},on:{click:t.searchSelected}},[a("v-icon",[t._v("mdi-magnify")]),t._v("Hae ilmoittautuneista")],1)],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kippari",maxlength:t.maxlength,loading:t.loading,counter:t.maxlength},model:{value:t.captain_name,callback:function(e){t.captain_name=e},expression:"captain_name"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Varakippari",maxlength:t.maxlength,loading:t.loading,counter:t.maxlength},model:{value:t.temp_captain_name,callback:function(e){t.temp_captain_name=e},expression:"temp_captain_name"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Seura/Paikkakunta",id:"locality",maxlength:t.maxlength,loading:t.loading,counter:t.maxlength},model:{value:t.locality,callback:function(e){t.locality=e},expression:"locality"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Lähtöpaikka",id:"starting_place",maxlength:t.maxlength,loading:t.loading,counter:t.maxlength},model:{value:t.starting_place,callback:function(e){t.starting_place=e},expression:"starting_place"}})],1)],1),t.isTeamCompetition?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-combobox",{attrs:{items:t.teams,label:"Valitse, tai kirjoita tiimin nimi",chips:"",maxlength:"40"},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",t._b({key:JSON.stringify(e.item),attrs:{"input-value":e.selected,disabled:e.disabled},on:{"click:close":function(t){return e.parent.selectItem(e.item)}}},"v-chip",e.attrs,!1),[a("v-avatar",{staticClass:"accent white--text",attrs:{left:""},domProps:{textContent:t._s(e.item.slice(0,1).toUpperCase())}}),t._v(" "+t._s(e.item)+" ")],1)]}}],null,!1,3131936958),model:{value:t.team,callback:function(e){t.team=e},expression:"team"}})],1)],1):t._e(),t.old_info?t._e():a("v-row",[t.loading?a("v-row",[a("v-col",{attrs:{md:"12"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tiedot tietokantaan... ")]),a("ProgressBarQuery")],1)],1):a("v-row",{staticStyle:{margin:"40px"}},[a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"red",loading:t.refreshing},on:{click:function(e){return t.deleteSignee(!1,-1)}}},[a("v-icon",[t._v("mdi-delete")]),t._v("Poista Venekunta")],1)],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"yellow",loading:t.refreshing},on:{click:t.clearInputs}},[a("v-icon",[t._v("backspace-reverse-outline")]),t._v("Pyyhi Kentät")],1)],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green",loading:t.refreshing,id:"sbtn"},on:{click:t.validateInfo}},[a("v-icon",[t._v("mdi-content-save")]),t._v("Tallenna")],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[t.refreshing?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Synkronoidaan tietokannan kanssa... ")]):t._e()])],1),a("v-row",{staticStyle:{"margin-bottom":"20px"}},[a("v-col",{attrs:{md:"4","offset-md":"4"}},[t.competition_id?a("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",block:"",color:"blue darken-4"},on:{click:function(e){return t.refreshCompetition(t.competition_id)}}},[a("v-icon",[t._v("mdi-update")]),t._v("Päivitä kilpailun tiedot ")],1):t._e()],1)],1)],1)],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"signees"}},[a("v-row",[a("v-col",[a("v-row",{staticStyle:{"margin-top":"20px"}},[a("v-col",{staticClass:"title",attrs:{"offset-md":"4",md:"4"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ilmoittautuneita yhteensä: "),a("b",[t._v(t._s(t.signees.length))])])])],1),a("v-row",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Ilmoittautuneet")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae ilmoittautunutta","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.signees,search:t.search},on:{"click:row":t.rowClick}})],1)],1)],1),t.selected_id?a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue"},on:{click:t.searchSelected}},[a("v-icon",[t._v("mdi-information")]),t._v("Näytä valitun ilmoittautumistiedot")],1)],1)],1):a("v-row",[a("v-col",{staticStyle:{margin:"20px 50px"}},[t.signees.length?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Voit katsella venekunnan tietoja myös klikkaamalla haluamaasi riviä taulukosta ja painamalla ilmestyvää nappulaa ")]):a("h3",{staticClass:"center-align",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei ilmoittautuneita! ")])])],1)],1)],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=a("1da1"),o=(a("96cf"),a("d81d"),a("ac1f"),a("5319"),a("fb6a"),a("99af"),a("7db0"),a("d3b7"),a("c740"),a("159b"),a("b0c0"),a("7149")),r=a("51dd"),l=a("b3a7"),c=a("a822"),u={name:"Signing",components:{Timedate:l["a"],ProgressBarQuery:c["default"]},data:function(){return{dialog:!1,errors:[],tab:null,boat_number:null,starting_place:null,captain_name:null,temp_captain_name:null,locality:null,team:null,selected_id:null,selected_row:null,id:1,new_signee:null,notification:null,loading:!1,refreshing:!1,loading_site:!1,competition_id:null,old_info:null,signees:[],headers:[{text:"Kilp. Numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Seura/Paikkakunta",value:"locality"}],search:"",cup:[],teams:[],maxlength:40,isTeamCompetition:!1,number_rules:[function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],timer_refresh:null,interval:6e4,selectedItem:2,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}],snackbar:!1,text:"",timeout:5e3}},mounted:function(){if(null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition"));this.competition_id=t["id"],this.loading_site=!0,this.refreshCompetition(this.competition_id)}location.href="#",location.href="#app"},beforeDestroy:function(){},methods:{changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):(this.text="Olet jo tällä sivulla!",this.snackbar=!0)},refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.refreshing=!0,a.prev=1,a.next=4,o["a"].getCompetitions({_id:t});case 4:if(i=a.sent,!i){a.next=17;break}return e.$store.commit("refreshCompetition",i),e.isTeamCompetition=e.$store.getters.isTeamCompetition,e.signees=e.$store.getters.getSignees,e.teams=e.$store.getters.getTeams,e.signees.length?(e.boat_number=Math.max.apply(Math,e.signees.map((function(t){return t.boat_number})))+1,e.id=Math.max.apply(Math,e.signees.map((function(t){return t.id})))+1):(e.boat_number=1,e.id=1),a.next=13,r["a"].getCups({_id:i.cup_id});case 13:s=a.sent,s&&(e.cup=s),a.next=18;break;case 17:console.log("No competition found on database...");case 18:a.next=23;break;case 20:a.prev=20,a.t0=a["catch"](1),console.log(a.t0.message);case 23:e.loading_site=!1,e.refreshing=!1;case 25:case"end":return a.stop()}}),a,null,[[1,20]])})))()},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(e>31&&(e<48||e>57)&&46!==e)t.preventDefault();else{if(46!=e)return!0;t.preventDefault()}},capitalize_words:function(t){return t.replace(/(?:^|\s|['`‘’.-])[^\x60^\x7B-\xDF](?!(\s|$))/g,(function(t){return t.toUpperCase()}))},clearInputs:function(){this.boat_number=null,this.starting_place=null,this.captain_name=null,this.temp_captain_name=null,this.locality=null,this.team=null,this.errors=[],this.old_info=null,this.notification=""},overwriteSignee:function(t,e){if(!0===e?console.log("Overwrite!"):console.log("Don't overwrite!"),e)if(this.$store.commit("removeSignee",t),t.boat_number=parseInt(this.boat_number),t.starting_place=this.starting_place,t.captain_name=this.capitalize_words(this.captain_name),t.temp_captain_name=this.capitalize_words(this.temp_captain_name),t.locality=this.capitalize_words(this.locality),t.team=this.team,this.team.length>40){var a=this.team;a=a.slice(0,40),this.team=a,this.showError("Valitse tiimin nimeksi alle 40 merkkiä pitkä nimi (nimi lyhennetty 40 merkkiin)!")}else-1==this.teams.indexOf(this.team)&&(this.teams.push(this.team),this.$store.commit("setTeams",this.teams)),this.saveToDatabase(t,!0),this.clearInputs(),this.boat_number=Math.max.apply(Math,this.signees.map((function(t){return t.boat_number})))+1,this.notification="Tiedot korvattu uusilla!";else this.notification="Veneen numero asetettu ensimmäiseen vapaaseen paikkaan!",this.boat_number=Math.max.apply(Math,this.signees.map((function(t){return t.boat_number})))+1,this.old_info=null},searchSelected:function(){if(this.notification=null,this.errors=[],"signing"===this.tab)if(this.boat_number){var t=this.searchBoatNumber(this.boat_number);if(t)this.notification="Venekunta löydetty!\n(".concat(t.boat_number,") : ").concat(t.captain_name,", ").concat(t.temp_captain_name),this.selected_id=t.id,this.boat_number=t.boat_number,this.starting_place=t.starting_place,this.captain_name=t.captain_name,this.temp_captain_name=t.temp_captain_name,this.locality=t.locality,this.team=t.team;else{var e=this.boat_number;this.clearInputs(),this.boat_number=e,this.notification="Tällä numerolla ei ole vielä ilmoitettu venekuntaa!",this.selected_id=null}}else this.notification="Syötä venekunnan numero ennen hakemista!";else if(this.selected_id){var a=this.selected_id;if(a){var i=this.$store.getters.getSigneeById(a);if(i)this.notification="Venekunnan tiedot:\n(".concat(i.boat_number,") : ").concat(i.captain_name,", ").concat(i.temp_captain_name),this.boat_number=i.boat_number,this.starting_place=i.starting_place,this.captain_name=i.captain_name,this.temp_captain_name=i.temp_captain_name,this.locality=i.locality,this.team=i.team,this.tab="signing";else{var s=this.boat_number;this.clearInputs(),this.boat_number=s,this.notification="Tällä numerolla ei ole vielä ilmoitettu venekuntaa!",this.selected_id=null}}else this.showError("Tätä venekuntaa ei ole olemassa!?")}else this.showError("Valitse ilmoittautuneideiden listalta venekunta ennen hakemista!")},searchFromCup:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.selected_id=null,t.boat_number?(a=t.cup.signees.find((function(e){return parseInt(t.boat_number)===parseInt(e.boat_number)})),a?(t.notification="Cupista löydetty seuraavat tiedot:",t.captain_name=a.captain_name,t.temp_captain_name=a.temp_captain_name,t.locality=a.locality,t.team=a.team,t.starting_place=a.starting_place):(i=t.boat_number,t.clearInputs(),t.boat_number=i,t.notification="Tällä numerolla ei löydy cupista venekuntaa!")):t.notification="Syötä venekunnan numero ennen hakemista!";case 2:case"end":return e.stop()}}),e)})))()},rowClick:function(t,e){t.id==this.selected_id?(this.selected_id=null,e.select(!1)):(this.selected_row&&this.selected_row.select(!1),this.selected_id=t.id,e.select(!0),this.selected_row=e)},searchBoatNumber:function(t){return this.$store.getters.getSigneeByBoatNumber(parseInt(t))},searchId:function(t){var e=parseInt(t);return this.$store.getters.getSigneeById(e)},showError:function(t){this.errors.push(t),location.href="#",location.href="#app"},saveToDatabase:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,n,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return!0===e?a.$store.commit("replaceSignee",t):a.$store.commit("addSignee",t),s=a.cup.signees.findIndex((function(e){return parseInt(t.boat_number)===parseInt(e.boat_number)})),-1===s&&a.cup.signees.push({boat_number:t.boat_number,captain_name:t.captain_name,temp_captain_name:t.temp_captain_name,locality:t.locality,starting_place:t.starting_place}),n=a.$store.getters.getCompetition,a.signees=a.$store.getters.getSignees,n.signees=a.signees,n.state="Ilmoittautuminen",a.$store.commit("refreshCompetition",n),i.prev=8,a.loading=!0,l={$set:{signees:n.signees,state:n.state}},i.next=13,o["a"].updateValues(n._id,l);case 13:return a.loading=!1,l={$set:{signees:a.cup.signees}},i.next=17,r["a"].updateValues(n.cup_id,l);case 17:i.next=22;break;case 19:i.prev=19,i.t0=i["catch"](8),console.error(i.t0.message);case 22:case"end":return i.stop()}}),i,null,[[8,19]])})))()},deleteSignee:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,n,r,l,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.errors=[],t){i.next=6;break}a.boat_number||a.showError("Venekunnan kilpailunumero puuttuu!"),a.errors.length||(a.selected_id?(s=a.searchId(a.selected_id),s&&a.$confirm("Oletko varma että haluat poistaa kilpailijan: (".concat(s.boat_number,"), ").concat(s.captain_name,"?"),"Poista kilpailija","question").then((function(t){t&&a.deleteSignee(t,s.id)})).catch((function(t){t&&console.error(t)}))):(n=a.searchBoatNumber(a.boat_number),n&&a.$confirm("Oletko varma että haluat poistaa kilpailijan: (".concat(n.boat_number,"), ").concat(n.captain_name,"?"),"Poista kilpailija","question").then((function(t){t&&a.deleteSignee(t,n.id)})).catch((function(t){t&&console.error(t)})))),i.next=33;break;case 6:if(r=a.searchId(e),!r){i.next=32;break}return a.$store.commit("removeSignee",r),l=a.$store.getters.getCompetition,a.signees=a.$store.getters.getSignees,l.signees=a.signees,a.$store.commit("refreshCompetition",l),i.prev=13,a.loading=!0,c={$set:{signees:l.signees}},i.next=18,o["a"].updateValues(l._id,c);case 18:a.loading=!1,a.clearInputs(),a.boat_number=Math.max.apply(Math,a.signees.map((function(t){return t.boat_number})))+1,a.text="Poistettu (Nro: ".concat(r.boat_number,", Kippari: ").concat(r.captain_name,") Tiedot!"),a.snackbar=!0,location.href="#",location.href="#signing",i.next=30;break;case 27:i.prev=27,i.t0=i["catch"](13),console.log(i.t0.message);case 30:i.next=33;break;case 32:console.log("Tällä id:llä ei löytynyt kilpailijaa...");case 33:case"end":return i.stop()}}),i,null,[[13,27]])})))()},validateInfo:function(){if(this.notification=null,this.errors=[],this.boat_number||this.showError("Venekunnan kilpailunumero puuttuu!"),this.captain_name?this.captain_name=this.capitalize_words(this.captain_name):this.showError("Kipparin nimi puuttuu!"),this.temp_captain_name?this.temp_captain_name=this.capitalize_words(this.temp_captain_name):this.temp_captain_name="-",this.starting_place||(this.starting_place="-"),this.team||(this.team="-"),this.team.length>40){var t=this.team;t=t.slice(0,40),this.team=t,this.showError("Valitse tiimin nimeksi alle 40 merkkiä pitkä nimi (nimi lyhennetty 40 merkkiin, valittavissa pudotusvalikosta)!")}if(this.locality?this.locality=this.capitalize_words(this.locality):this.showError("Seura/Paikkakunta puuttuu!"),!this.errors.length)if(this.selected_id){var e=this.searchId(this.selected_id);if(e){var a=this.searchBoatNumber(this.boat_number);a&&a.id!=e.id?(console.log("Boat number already exists..."),this.old_info=a):(e.boat_number=parseInt(this.boat_number),e.starting_place=this.starting_place,e.captain_name=this.captain_name,e.temp_captain_name=this.temp_captain_name,e.locality=this.locality,e.team=this.team,this.new_signee=e,this.saveToDatabase(this.new_signee,!0),-1==this.teams.indexOf(this.team)&&(this.teams.push(this.team),this.$store.commit("setTeams",this.teams)),this.text="Päivitetty venekunnan (Nro: ".concat(this.new_signee.boat_number,", Kippari: ").concat(this.new_signee.captain_name,") Tiedot!"),this.snackbar=!0,this.clearInputs(),location.href="#",location.href="#signing",this.boat_number=Math.max.apply(Math,this.signees.map((function(t){return t.boat_number})))+1,this.id=Math.max.apply(Math,this.signees.map((function(t){return t.id})))+1,this.selected_id=null)}}else{var i=this.searchBoatNumber(this.boat_number);if(i&&i.id!=this.id)console.log("Boat number already exists..."),this.notification="Numerolla on jo olemassa venekunta, päällekirjoitetaanko?",this.old_info=i;else{var s=this.$store.getters.getCompetitionFishes,n=[];s.forEach((function(t){var e={name:t.name,weights:0,points:0};n.push(e)})),this.new_signee={id:this.id,boat_number:parseInt(this.boat_number),starting_place:this.starting_place,captain_name:this.captain_name,temp_captain_name:this.temp_captain_name,locality:this.locality,team:this.team,total_points:0,total_weights:0,returned:!1,weights:n},this.saveToDatabase(this.new_signee,!1),-1==this.teams.indexOf(this.team)&&(this.teams.push(this.team),this.$store.commit("setTeams",this.teams)),this.text="Venekunta ilmoitettu kisaan! (Nro: ".concat(this.new_signee.boat_number,", Kippari: ").concat(this.new_signee.captain_name,")"),this.snackbar=!0,this.clearInputs(),location.href="#",location.href="#signing",this.boat_number=Math.max.apply(Math,this.signees.map((function(t){return t.boat_number})))+1,this.id=Math.max.apply(Math,this.signees.map((function(t){return t.id})))+1,this.selected_id=null}}}}},m=u,d=(a("06e3"),a("2877")),p=a("6544"),h=a.n(p),_=a("0798"),v=a("8212"),g=a("8336"),f=a("b0af"),b=a("99d9"),k=a("cc20"),x=a("62ad"),w=a("2b5d"),y=a("a523"),T=a("8fea"),C=a("169a"),$=a("ce7e"),S=a("132d"),V=a("8860"),I=a("da13"),j=a("5d23"),P=a("1baa"),E=a("34c3"),D=a("f774"),K=a("0fd9"),N=a("2db4"),L=a("2fa4"),B=a("71a3"),R=a("c671"),O=a("fe57"),F=a("aac8"),M=a("9a96"),Y=a("8654"),A=Object(d["a"])(m,i,s,!1,null,null,null);e["default"]=A.exports;h()(A,{VAlert:_["a"],VAvatar:v["a"],VBtn:g["a"],VCard:f["a"],VCardActions:b["a"],VCardTitle:b["c"],VChip:k["a"],VCol:x["a"],VCombobox:w["a"],VContainer:y["a"],VDataTable:T["a"],VDialog:C["a"],VDivider:$["a"],VIcon:S["a"],VList:V["a"],VListItem:I["a"],VListItemContent:j["a"],VListItemGroup:P["a"],VListItemIcon:E["a"],VListItemTitle:j["c"],VNavigationDrawer:D["a"],VRow:K["a"],VSnackbar:N["a"],VSpacer:L["a"],VTab:B["a"],VTabItem:R["a"],VTabs:O["a"],VTabsItems:F["a"],VTabsSlider:M["a"],VTextField:Y["a"]})},b3c3:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",tile:"",dark:t.$store.getters.getTheme}},[a("v-list",{attrs:{dense:""}},[a("p",[t._v("Navigointi")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[a("v-divider"),t._l(t.items,(function(e,i){return a("div",{key:i},[a("v-list-item",{attrs:{disabled:t.$router.currentRoute.path===e.path},on:{click:function(a){return t.changePage(e.path)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1),a("v-divider")],1)}))],2)],1)],1)],1),a("v-container",{staticStyle:{width:"70%"}},[a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme}},[a("v-row",[a("v-col",[a("v-card",{staticStyle:{"background-color":"rgba(0, 0, 0, 0)"},attrs:{dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"12"}},[a("v-row",[a("v-col",{attrs:{md:"7"}},[a("h1",{staticStyle:{margin:"30px"}},[t._v("Tulokset")])]),a("v-col",{attrs:{md:"5"}},[a("div",{staticClass:"text-center"},[a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("p",{class:{"black-text":!t.$store.getters.getTheme,"white-text":t.$store.getters.getTheme},staticStyle:{margin:"10px"}},[t._v(" Kello/Kilpailuaika ")]),a("v-btn",t._g(t._b({attrs:{text:"",outlined:"",color:"red darken-4",dark:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-timer")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme,width:"600px"}},[a("Timedate"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Sulje ")])],1)],1)],1)],1)])],1)],1)],1)],1)],1)],1),a("v-row",{staticStyle:{"margin-top":"30px"}},[a("v-col",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{md:"4","offset-md":"4"}},[a("v-switch",{attrs:{dark:t.$store.getters.getTheme,loading:t.loading,color:"orange darken-3",label:"Tulosten automaattinen päivitys 60s välein"},model:{value:t.intervalSwitch,callback:function(e){t.intervalSwitch=e},expression:"intervalSwitch"}})],1)],1),a("v-row",{staticStyle:{"margin-bottom":"20px"}},[t.normal_points.length||t.team_results.length||t.biggest_fishes_results.length||t.biggest_amounts_results.length?a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-dialog",{attrs:{scrollable:"","max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:t.$store.getters.getTheme,large:"",text:"",outlined:"",loading:t.loading,disabled:!t.biggest_amounts_results.length||!t.competition}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa kaikki tulokset ")],1)]}}],null,!1,887593534),model:{value:t.dialog_print,callback:function(e){t.dialog_print=e},expression:"dialog_print"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v("Valitse mitä lataus sisältää")]),a("v-divider"),a("v-card-text",{staticStyle:{height:"300px",width:"100%"}},[a("v-checkbox",{attrs:{label:"Tilastoja",disabled:!t.biggest_amounts_results.length,color:"indigo darken-3",value:"stats"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Normaalikilpailun tulokset",color:"indigo darken-3",value:"normal"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),t.isTeamCompetition?a("v-checkbox",{attrs:{disabled:!t.team_results.length,label:"Tiimikilpailun tulokset",color:"indigo darken-3",value:"team"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}):t._e(),a("v-checkbox",{attrs:{disabled:!t.biggest_fishes_results.length,label:"Suurimmat yksittäiset kalat",color:"indigo darken-3",value:"biggest_fishes"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Suurimmat kalasaaliit",color:"indigo darken-3",value:"biggest_amounts"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length&&!t.biggest_amounts_results.length,label:"Suurimmat yksittäiset kalat / kalasaaliit (Voittajat)",color:"indigo darken-3",value:"biggest_winners"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}})],1),a("v-divider"),a("v-card-actions",[a("v-col",[a("v-btn",{attrs:{outlined:"",color:"red darken-4",text:""},on:{click:function(e){t.dialog_print=!1}}},[t._v("Sulje")])],1),a("v-col",[a("v-btn",{attrs:{outlined:"",color:"green darken-4",text:""},on:{click:t.choosePrints}},[t._v("Lataa")])],1)],1)],1)],1)],1):t._e()],1),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#stats"}},[t._v("Tilastoja")]),a("v-tab",{attrs:{href:"#normal-competition"}},[t._v("Normaalikilpailu")]),t.isTeamCompetition?a("v-tab",{attrs:{href:"#team-competition"}},[t._v("Tiimikilpailu")]):a("v-tab",{attrs:{href:"#team-competition",disabled:""}},[t._v("Ei Tiimikilpailua")]),a("v-tab",{attrs:{href:"#biggest-fishes"}},[t._v("Suurimmat Kalat")]),a("v-tab",{attrs:{href:"#biggest-fish-amounts"}},[t._v("Suurimmat Kalasaaliit")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(0, 0, 0, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"stats"}},[t.competition?a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"8"}},[a("v-btn",{staticClass:"white--text",staticStyle:{"margin-bottom":"20px"},attrs:{dark:t.$store.getters.getTheme,large:"",text:"",outlined:"",loading:t.loading,disabled:!t.biggest_amounts_results.length},on:{click:function(e){return t.saveStatsAsPDF("Tilastoja")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf")],1)],1)],1):t._e(),t.competition?a("v-row",[t.competition.normal_points.length?a("v-row",{staticStyle:{"min-height":"400px"}},[a("v-col",[t.competition.normal_points.length?a("v-row",{staticStyle:{"min-height":"400px"}},[a("v-col",{staticStyle:{"margin-bottom":"50px"},attrs:{sm:"12",md:"5","offset-md":"1"}},[t.fishes_chart_data?a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-card-title",[a("h4",{staticClass:"headline mb-1"},[t._v(" "+t._s(t.fishes_chart_title)+" ")])]),a("doughnut-chart",{attrs:{"chart-data":t.fishes_chart_data,"chart-id":"fishes_chart",title:t.fishes_chart_title}})],1)]}}],null,!1,1847150614)})],1):t._e()]),a("v-col",{attrs:{sm:"12",md:"5"}},[t.signee_chart_data?a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-card-title",[a("h4",{staticClass:"headline mb-1"},[t._v(" "+t._s(t.signee_chart_title)+" ")])]),a("pie-chart",{attrs:{"chart-data":t.signee_chart_data,"chart-id":"signee_chart",title:t.signee_chart_title}})],1)]}}],null,!1,4159745268)})],1):t._e()])],1):a("v-row",[a("v-col",{attrs:{md:"12"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1):a("v-row",[a("v-col",{attrs:{md:"12"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1):t._e(),t.competition?a("v-row",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" Kalalajien määritykset ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[t._l(t.calculated_fish_weights,(function(e,i){return a("div",{key:i},[a("v-list-item",[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(" x "+t._s(e.multiplier))])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on,n=i.attrs;return[a("span",t._g(t._b({},"span",n,!1),s),[a("b",[t._v(t._s(e.minsize)+" cm")])])]}}],null,!0)},[a("span",[t._v(t._s(e.minsize))])])],1),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[t._v(" "+t._s(e.weights?Math.round(100*(e.weights/1e3+Number.EPSILON))/100:0)+" kg ")])],1),a("v-divider")],1)})),a("v-list-item",[a("v-list-item-title",[t._v(" Saalista yhteensä ")]),a("v-list-item-subtitle",[a("h4",{staticClass:"green-text"},[a("b",[t._v(t._s(Math.round(100*(t.calculated_total_weights/1e3+Number.EPSILON))/100)+" kg")])])])],1)],2)],1)],1)],1),a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" Yleisiä tilastoja ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[a("v-list-item",[a("v-list-item-title",[t._v("Cup pistekerroin")]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v("x "+t._s(t.competition.cup_points_multiplier))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-title",[a("b",[t._v("Ilmoittautuneita yhteensä")])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(t.signees.length))]),t._v(" venettä ")])],1),a("v-divider"),a("v-list-item",[a("v-list-item-title",[a("b",[t._v("Saalista saaneita")])]),a("v-divider",{attrs:{vertical:""}}),t.$store.getters.getPointSignees.length?a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(Math.round(t.$store.getters.getPointSignees.length/t.competition.signees.length*100*100)/100)+"% ("+t._s(t.$store.getters.getPointSignees.length)+" / "+t._s(t.signees.length)+")")])]):a("v-list-item-subtitle",{staticClass:"red-text"},[a("b",[t._v("0% (0/0)")])])],1)],1)],1)],1)],1)],1)]}}],null,!1,3985178034)})],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("h2",{staticClass:"error"},[t._v(" Ei saatavilla kilpailun tietoja... (Connection timed out) ")])])],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"normal-competition"}},[a("v-row",[a("v-col",{staticStyle:{"padding-top":"50px","padding-bottom":"20px"},attrs:{md:"10","offset-md":"1"}},[a("v-row",[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.normal_options},on:{input:t.switchNormalResults},model:{value:t.selected_normal,callback:function(e){t.selected_normal=e},expression:"selected_normal"}})],1),t.normal_points.length||t.signees.length&&"Ilmoittautuneet"===t.selected_normal?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{dark:t.$store.getters.getTheme,large:"",text:"",outlined:"",loading:t.loading},on:{click:function(e){t.saveAsPDF("Normaalikilpailun tulokset ("+t.selected_normal+")","#normal-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.normal_points.length||t.signees.length&&"Ilmoittautuneet"===t.selected_normal?a("v-row",{staticClass:"row"},[a("v-col",{attrs:{md:"12"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v(" Normaalikilpailu ("+t._s(t.selected_normal)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.results,search:t.search,loading:t.loading},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},"Ilmoittautuneet"===t.selected_normal?{key:"item.boat_number",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.boat_number))])]}}:null,{key:"item.total_points",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.total_points.toLocaleString())+" p")])]}},{key:"item.cup_points_total",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:t.getColorPoints(i.cup_points_total)}},[t._v(t._s(i.cup_points_total))])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1)],1),t.isTeamCompetition?a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"team-competition"}},[t.team_results.length?a("v-row",[a("v-col",{staticStyle:{"padding-top":"50px"},attrs:{md:"3","offset-md":"8"}},[a("v-btn",{attrs:{dark:t.$store.getters.getTheme,large:"",text:"",outlined:"",loading:t.loading},on:{click:function(e){return t.saveAsPDF("Tiimikilpailun tulokset","#team-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1)],1):t._e(),a("v-row",[t.team_results.length?a("v-col",{staticStyle:{"padding-bottom":"20px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Tiimikilpailu")]),a("v-spacer"),a("v-switch",{staticClass:"black--text",attrs:{color:"indigo darken-3","append-icon":"mdi-weather-night","prepend-icon":"mdi-weather-sunny"},model:{value:t.$store.getters.getTheme,callback:function(e){t.$set(t.$store.getters,"getTheme",e)},expression:"$store.getters.getTheme"}}),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_team,callback:function(e){t.search_team=e},expression:"search_team"}})],1),a("v-data-table",{attrs:{headers:t.team_headers,items:t.team_results,search:t.search_team,loading:t.loading},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.points",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.points.toLocaleString())+" p")])]}}],null,!0)})],1)],1):a("v-col",[t.loading?t._e():a("v-col"),t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])],1)],1)],1):t._e(),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fishes"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_names},on:{input:t.calculateBiggestFishes},model:{value:t.selected_biggest_fish,callback:function(e){t.selected_biggest_fish=e},expression:"selected_biggest_fish"}})],1),t.biggest_fishes_results.length?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{dark:t.$store.getters.getTheme,large:"",text:"",outlined:"",loading:t.loading},on:{click:function(e){t.saveAsPDF("Suurimmat kalat ("+t.selected_biggest_fish+")","#biggest-fishes-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.biggest_fishes_results.length?a("v-row",[a("v-col",{staticStyle:{"margin-bottom":"40px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t.results_found_fishes?a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalat ("+t._s(t.selected_biggest_fish)+" "+t._s(t.results_found_fishes)+") ")]):a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalat ("+t._s(t.selected_biggest_fish)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_fishes,callback:function(e){t.search_fishes=e},expression:"search_fishes"}})],1),a("v-data-table",{attrs:{headers:t.biggest_fishes_headers,items:t.biggest_fishes_results,search:t.search_fishes,loading:t.loading},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.name",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.name))])]}},{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fish-amounts"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_amount_names},on:{input:t.calculateBiggestAmounts},model:{value:t.selected_biggest_amount,callback:function(e){t.selected_biggest_amount=e},expression:"selected_biggest_amount"}})],1),t.biggest_amounts_results.length?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{dark:t.$store.getters.getTheme,large:"",outlined:"",text:"",loading:t.loading,disabled:!t.biggest_amounts_results.length},on:{click:function(e){t.saveAsPDF("Suurimmat kalat ("+t.selected_biggest_amount+")","#biggest-amounts-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.biggest_amounts_results.length?a("v-row",[a("v-col",{staticStyle:{"margin-bottom":"40px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t.results_found_amounts?a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+" "+t._s(t.results_found_amounts)+") ")]):a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+") ")]),a("v-spacer"),a("v-switch",{staticClass:"black--text",attrs:{color:"indigo darken-3","append-icon":"mdi-weather-night","prepend-icon":"mdi-weather-sunny"},model:{value:t.$store.getters.getTheme,callback:function(e){t.$set(t.$store.getters,"getTheme",e)},expression:"$store.getters.getTheme"}}),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_amounts,callback:function(e){t.search_amounts=e},expression:"search_amounts"}})],1),a("v-data-table",{attrs:{headers:t.biggest_amounts_headers,items:t.biggest_amounts_results,search:t.search_amounts,loading:t.loading},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.name",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.name))])]}},{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1),t.competition?a("div",[t.loading?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään... ")])]),a("ProgressBarQuery")],1):a("v-row",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{large:"",rounded:"",color:t.competition.isPublic?"grey darken-4":"green darken-4",loading:t.updating},on:{click:function(e){return t.publishCompetition(t.competition.isPublic)}}},[t.competition.isPublic?a("div",[a("v-icon",[t._v("mdi-incognito")]),t._v(" Aseta kilpailu salaiseksi ")],1):a("div",[a("v-icon",{attrs:{color:"green"}},[t._v("mdi-publish")]),t._v(" Aseta kilpailu julkiseksi ")],1)])],1),a("v-col",[a("v-btn",{attrs:{large:"",rounded:"",color:t.competition.isFinished?"yellow":"green darken-3",loading:t.updating},on:{click:function(e){return t.endCompetition(t.competition.isFinished)}}},[t.competition.isFinished?a("div",[a("v-icon",{attrs:{color:"red darken-2"}},[t._v("mdi-cancel")]),t._v(" Aseta kilpailu keskeneräiseksi ")],1):a("div",[a("v-icon",{attrs:{color:"yellow"}},[t._v("mdi-trophy")]),t._v(" Aseta kilpailu päättyneeksi ")],1)])],1),a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",rounded:"",color:"blue darken-4",loading:t.updating},on:{click:function(e){return t.refreshCompetition(t.competition._id)}}},[a("v-icon",[t._v("mdi-update")]),t._v("Päivitä tulokset ")],1)],1)],1)],1):t._e()],1)]),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=a("1da1"),o=(a("96cf"),a("ac1f"),a("5319"),a("5b81"),a("d3b7"),a("159b"),a("b0c0"),a("4e827"),a("4de4"),a("7149")),r=a("b3a7"),l=a("a822"),c=a("748a"),u=a("e5e9"),m=a("e0b1"),d={name:"Results",components:{Timedate:r["a"],ProgressBarQuery:l["default"],PieChart:c["a"],DoughnutChart:u["a"]},data:function(){return{dialog_clock:!1,dialog:!1,dialog_print:!1,loading:!1,updating:!1,tab:null,signees:[],fish_names:[],fish_amount_names:[],table_fish_names:[],results:[],normal_points:[],normal_weights:[],team_results:[],biggest_fishes:{},biggest_fishes_results:[],selected_biggest_fish:null,biggest_amounts:{},biggest_amounts_results:[],selected_biggest_amount:null,results_found_fishes:"",results_found_amounts:"",competition:null,isTeamCompetition:!0,calculated_total_weights:null,calculated_fish_weights:null,selected_normal:null,fishes_chart:null,signees_chart:null,timer_refresh:null,interval:6e4,normal_options:["Pisteet","Kalat","Ilmoittautuneet"],headers:[],biggest_fishes_headers:[],biggest_amounts_headers:[],normal_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Tulos",value:"total_points"},{text:"Cup sij. pisteet",value:"cup_placement_points"},{text:"Cup osal. pisteet",value:"cup_participation_points"},{text:"Yht.",value:"cup_points_total"}],signee_headers:[],team_headers:[{text:"Sijoitus",value:"placement"},{text:"Tiimi",value:"name"},{text:"Jäsen 1",value:"captain_name_1"},{text:"Jäsen 2",value:"captain_name_2"},{text:"Jäsen 3",value:"captain_name_3"},{text:"Pisteet",value:"points"}],winner_headers:[{text:"Kalalaji",value:"name"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],biggest_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],search:"",search_team:"",search_fishes:"",search_amounts:"",selected_print:[],intervalSwitch:!1,signee_chart_data:null,fishes_chart_data:null,fishes_chart_title:null,signee_chart_title:null,selectedItem:4,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}],snackbar:!1,text:"",timeout:5e3}},watch:{intervalSwitch:function(t){var e=this;if(t){var a=JSON.parse(localStorage.getItem("competition")),i=a["id"];this.timer_refresh=setInterval((function(){return e.refreshCompetition(i)}),this.interval),this.text="Automaattinen päivitys käytössä!",this.snackbar=!0}else clearInterval(this.timer_refresh),this.text="Automaattinen päivitys pois käytöstä!",this.snackbar=!0}},created:function(){this.saveAllAsPDF=m["a"].saveAllAsPDF,this.saveStatsAsPDF=m["a"].saveStatsAsPDF,this.saveAsPDF=m["a"].saveAsPDF,this.dictToArray=m["a"].dictToArray,this.capitalize_words=m["a"].capitalize_words,this.replaceAll=m["a"].replaceAll,this.formatDate=m["a"].formatDate,this.range=m["a"].range,this.getColorPoints=m["a"].getColorPoints,this.getColor=m["a"].getColor,this.drawCharts=m["a"].drawCharts,this.sortDict=m["a"].sortDict,this.onafterprint=m["a"].onafterprint,this.onbeforeprint=m["a"].onbeforeprint},mounted:function(){if(null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition")),e=t["id"];this.refreshCompetition(e)}location.href="#",location.href="#app"},beforeDestroy:function(){clearInterval(this.timer_refresh)},methods:{changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):(this.text="Olet jo tällä sivulla!",this.snackbar=!0)},choosePrints:function(){this.dialog_print=!1,this.saveAllAsPDF(this.tab)},refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.fish_names=[],e.fish_amount_names=[],e.table_fish_names=[],e.signee_headers=[{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Lähtöpaikka",value:"starting_place"}],i=1,a.prev=6,a.next=9,o["a"].getCompetitions({_id:t});case 9:s=a.sent,s?(e.competition=s,e.$store.commit("refreshCompetition",e.competition),e.isTeamCompetition=e.$store.getters.isTeamCompetition,e.signees=e.$store.getters.getResultSignees,e.selected_normal="Pisteet",e.normal_points=e.competition.normal_points,e.normal_weights=e.competition.normal_weights,e.isTeamCompetition&&(e.signee_headers.push({text:"Tiimi",value:"team"}),e.team_results=e.competition.team_results,n=-1,r=-1,e.team_results.forEach((function(t){n===t.points?t.placement=r:(t.placement=r=i,n=t.points),i++}))),e.biggest_fishes=e.$store.getters.getBiggestFishes,e.biggest_amounts=e.$store.getters.getBiggestAmounts,e.calculated_total_weights=e.$store.getters.getCompetitionTotalWeights,e.calculated_fish_weights=e.competition.fishes,l=e.$store.getters.getCompetitionFishes,e.fish_names.push("Voittajat"),e.fish_amount_names.push("Voittajat"),l.forEach((function(t){e.fish_names.push(t.name),e.fish_amount_names.push(t.name),e.table_fish_names.push(t.name)})),e.calculateAll(),e.fishes_chart&&e.signees_chart&&(e.fishes_chart.destroy(),e.signees_chart.destroy()),e.$nextTick((function(){return e.drawCharts(e.tab)})),e.normal_points.length?(e.results=e.normal_points,e.headers=e.normal_headers):(e.results=e.$store.getters.getSignees,e.headers=e.signee_headers,e.selected_normal="Ilmoittautuneet"),e.text="Tiedot ajantasalla!",e.snackbar=!0):(e.signees=[],e.biggest_fishes=[],e.biggest_amounts=[],console.log("No competition found on database...")),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](6),console.error(a.t0.message);case 16:e.loading=!1;case 17:case"end":return a.stop()}}),a,null,[[6,13]])})))()},publishCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.competition.isPublic=!t,i={$set:{isPublic:e.competition.isPublic}},e.updateToDatabase(e.competition,i);case 3:case"end":return a.stop()}}),a)})))()},endCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.competition.isFinished=!t,e.competition.isFinished?e.competition.state="Päättynyt":e.competition.state="Kesken",i={$set:{isFinished:e.competition.isFinished}},e.updateToDatabase(e.competition,i);case 4:case"end":return a.stop()}}),a)})))()},updateToDatabase:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a.$store.commit("refreshCompetition",a.competition),a.updating=!0,t.next=5,o["a"].updateValues(a.competition._id,e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0.message);case 10:a.updating=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},calculateAll:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.calculateBiggestFishes(),t.calculateBiggestAmounts();case 2:case"end":return e.stop()}}),e)})))()},switchNormalResults:function(){var t=this;this.selected_normal||(this.selected_normal="Pisteet"),"Pisteet"===this.selected_normal&&(this.headers=this.normal_headers,this.results=this.normal_points),"Kalat"===this.selected_normal&&(this.headers=[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"}],this.results=this.normal_weights,this.table_fish_names.forEach((function(e){t.headers.push({text:e,value:e})})),this.headers.push({text:"Tulos",value:"total_points"})),"Ilmoittautuneet"===this.selected_normal&&(this.headers=this.signee_headers,this.results=this.$store.getters.getSignees)},calculateBiggestFishes:function(){var t=this.biggest_fishes,e=1;if(this.results_found_fishes=null,this.selected_biggest_fish||(this.selected_biggest_fish="Voittajat"),"Voittajat"===this.selected_biggest_fish)this.biggest_fishes_headers=this.winner_headers,this.biggest_fishes,this.biggest_fishes_results=this.sortDict(t);else{this.biggest_fishes_headers=this.biggest_headers;var a=[];t[this.selected_biggest_fish]?(a=t[this.selected_biggest_fish].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),this.results_found_amounts=""):this.results_found_fishes="- Ei tuloksia";var i=-1,s=-1;this.biggest_fishes_results=a,this.biggest_fishes_results.forEach((function(t){i===t.weight?t.placement=s:(t.placement=s=e,i=t.weight),e++}))}},calculateBiggestAmounts:function(){var t=this.biggest_amounts,e=1;if(this.results_found_amount="",this.selected_biggest_amount||(this.selected_biggest_amount="Voittajat"),"Voittajat"===this.selected_biggest_amount)this.biggest_amounts_headers=this.winner_headers,this.biggest_amounts,this.biggest_amounts_results=this.sortDict(t);else{this.biggest_amounts_headers=this.biggest_headers;var a=[];t[this.selected_biggest_amount]?(a=t[this.selected_biggest_amount].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),a=a.filter((function(t){return parseInt(t.weight)>0})),this.results_found_amounts=""):this.results_found_amount="- Ei tuloksia";var i=-1,s=-1;this.biggest_amounts_results=a,this.biggest_amounts_results.forEach((function(t){i===t.weight?t.placement=s:(t.placement=s=e,i=t.weight),e++}))}}}},p=d,h=a("2877"),_=a("6544"),v=a.n(_),g=a("8336"),f=a("b0af"),b=a("99d9"),k=a("ac7c"),x=a("cc20"),w=a("62ad"),y=a("a523"),T=a("8fea"),C=a("169a"),$=a("ce7e"),S=a("ce87"),V=a("132d"),I=a("8860"),j=a("da13"),P=a("5d23"),E=a("1baa"),D=a("34c3"),K=a("f774"),N=a("0fd9"),L=a("b974"),B=a("2db4"),R=a("2fa4"),O=a("b73d"),F=a("71a3"),M=a("c671"),Y=a("fe57"),A=a("aac8"),H=a("9a96"),J=a("8654"),Q=a("3a2f"),z=Object(h["a"])(p,i,s,!1,null,"295cadac",null);e["default"]=z.exports;v()(z,{VBtn:g["a"],VCard:f["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCheckbox:k["a"],VChip:x["a"],VCol:w["a"],VContainer:y["a"],VDataTable:T["a"],VDialog:C["a"],VDivider:$["a"],VHover:S["a"],VIcon:V["a"],VList:I["a"],VListItem:j["a"],VListItemContent:P["a"],VListItemGroup:E["a"],VListItemIcon:D["a"],VListItemSubtitle:P["b"],VListItemTitle:P["c"],VNavigationDrawer:K["a"],VRow:N["a"],VSelect:L["a"],VSnackbar:B["a"],VSpacer:R["a"],VSwitch:O["a"],VTab:F["a"],VTabItem:M["a"],VTabs:Y["a"],VTabsItems:A["a"],VTabsSlider:H["a"],VTextField:J["a"],VTooltip:Q["a"]})},f52d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[t.errors.length?a("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),a("v-list",t._l(t.errors,(function(e,i){return a("v-list-item",{key:i},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),a("v-card",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme},attrs:{dark:t.$store.getters.getTheme}},[a("h1",{staticStyle:{margin:"30px"}},[t._v("Kilpailun luonti")]),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#basic-info"}},[t._v("1. Perustiedot")]),a("v-tab",{attrs:{href:"#fishes",disabled:!t.basic_info_validated}},[t._v("2. Kilpailun kalalajit")]),a("v-tab",{attrs:{href:"#points",disabled:!t.fish_species_validated}},[t._v("3. Pistekertoimet ja alamitat")]),a("v-tab",{attrs:{href:"#summary",disabled:!t.fish_specs_validated}},[t._v("4. Yhteenveto")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(1, 1, 1, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"basic-info"}},[t.loading?a("v-container",[a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Valmistellaan kilpailun luontia... ")]),a("ProgressBarQuery")],1)],1)],1):a("v-container",[a("v-row",[a("v-col",[a("h4",[t._v("Kilpailun perustiedot")]),t.basic_info_validated?a("p",{staticClass:"yellow lighten-1 black--text"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),a("v-row",[a("v-col",{attrs:{md:"12"}},[t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun nimi",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Paikkakunta",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.locality,callback:function(e){t.locality=e},expression:"locality"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{attrs:{md:"3"}},[a("p",{staticClass:"center-align flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Valitse Cup ")])]),a("v-col",{staticClass:"d-flex",attrs:{md:"6"}},[a("v-select",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.cups,"item-text":"select","item-value":"_id",hint:t.cup.name+" ("+t.cup.year+")",disabled:t.basic_info_validated,outlined:"","return-object":"","single-line":""},model:{value:t.cup,callback:function(e){t.cup=e},expression:"cup"}})],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"3"}},[a("v-btn",{attrs:{tile:"",color:"green lighten-1"},on:{click:function(e){return t.$router.push({path:"/continue",query:{tab:"create"}})}}},[a("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo uusi cup!")],1)],1)],1):a("v-row",{staticClass:"valign-wrapper"},[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6","offset-md":"2"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(' Ei luotuja cuppeja, Luo cup ensin "Jatka Kilpailuja sivulla" (Voit myös luoda cupin kilpailuille, jotka ei ole missään cupissa") ')])]),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"2"}},[a("router-link",{attrs:{to:"/continue"}},[a("v-btn",{attrs:{tile:"",color:"blue lighten-1"}},[a("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo cup!")],1)],1)],1)],1),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun voittajan cup sijoittumispisteet","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_placement_points>=0?t.cup_placement_points++:t.cup_placement_points=1},"click:prepend":function(e){t.cup_placement_points>=1?t.cup_placement_points--:t.cup_placement_points=0},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_placement_points,callback:function(e){t.cup_placement_points=e},expression:"cup_placement_points"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun cup osallistumispisteet","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_participation_points>=0?t.cup_participation_points++:t.cup_participation_points=1},"click:prepend":function(e){t.cup_participation_points>=1?t.cup_participation_points--:t.cup_participation_points=0},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_participation_points,callback:function(e){t.cup_participation_points=e},expression:"cup_participation_points"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Cup pistekerroin","append-outer-icon":"add",maxlength:"3","prepend-icon":"remove",counter:3,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_points_multiplier>=1?t.cup_points_multiplier+=.5:t.cup_points_multiplier=1},"click:prepend":function(e){t.cup_points_multiplier>=1.5?t.cup_points_multiplier-=.5:t.cup_points_multiplier=1},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_points_multiplier,callback:function(e){t.cup_points_multiplier=e},expression:"cup_points_multiplier"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Onko Tiimikilpailua?")])]),a("v-col",{attrs:{"offset-md":"4"}},[a("v-radio-group",{attrs:{row:"",disabled:t.basic_info_validated},model:{value:t.team_competition,callback:function(e){t.team_competition=e},expression:"team_competition"}},[a("v-radio",{attrs:{label:"Kyllä",value:"Kyllä"}}),a("v-radio",{attrs:{label:"Ei",value:"Ei"}})],1)],1)],1)],1):t._e(),t.cup.name?a("v-row",{staticStyle:{padding:"10px","margin-bottom":"50px"}},[a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-row",{attrs:{align:"center"}},[a("span",{staticClass:"flow-text col s6",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun Aloituspäivä")])]),a("v-row",{attrs:{align:"center"}},[a("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi",disabled:t.basic_info_validated},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),a("v-col",{attrs:{cols:"12",md:"5","offset-md":"2"}},[a("v-row",{attrs:{align:"center"}},[a("span",{staticClass:"flow-text col s6",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun Lopetuspäivä")])]),a("v-row",[a("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi",disabled:t.basic_info_validated},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun alkamismisaika")])])],1),a("v-row",{attrs:{align:"center"}},[a("v-col",[a("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"5","offset-md":"1"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"12","offset-md":"2"}},[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun loppumisaika")])])],1),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"12","offset-md":"2"}},[a("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1)],1)],1)],1):t._e(),t.basic_info_validated?t._e():a("v-row",[t.cup.name?a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-btn",{attrs:{large:"",block:"",color:"green"},on:{click:t.checkBasicInformation}},[a("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1):t._e()],1)],1),t.basic_info_validated?a("v-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"}},[a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[a("v-icon",[t._v("mdi-pencil")]),t._v("Muuta tietoja")],1)],1),a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("fishes")}}},[a("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1):t._e()],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"fishes"}},[a("v-container",{staticStyle:{width:"70%"}},[a("v-row",[a("v-col",[t.fish_species_validated?a("p",{staticClass:"yellow lighten-1 black--text"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),a("v-row",[a("v-col",[a("v-row",[a("v-col",[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kalalajien valinta ")]),a("p",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" (Yli 40 merkkiä pitkät nimet lyhennetään 40 merkkiin) ")])])],1),a("v-row",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-combobox",{attrs:{filter:t.filter,"hide-no-data":!t.search,items:t.options,"return-object":"","search-input":t.search,disabled:t.fish_species_validated,"hide-selected":"",label:"Valitse kalalaji, tai luo oma kirjoittamalla",multiple:"",solo:"",clearable:"",rules:t.rules,maxlength:40,dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light"},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[a("v-list-item",[a("span",{staticClass:"subheading"},[t._v("Luo uusi kalalaji painamalla Enter: ")]),a("v-chip",{attrs:{color:""+t.colors[t.nonce-1],label:"",small:""}},[t._v(" "+t._s(t.search)+" ")])],1)]},proxy:!0},{key:"selection",fn:function(e){var i=e.attrs,s=e.item,n=e.parent,o=e.selected;return[s===Object(s)?a("v-chip",t._b({attrs:{color:s.color,"input-value":o,label:""}},"v-chip",i,!1),[a("span",{staticClass:"pr-2"},[t._v(" "+t._s(s.text)+" ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return n.selectItem(s)}}},[t._v(" $delete ")])],1):t._e()]}},{key:"item",fn:function(e){var i=e.index,s=e.item;return[t.editing===s?a("v-text-field",{attrs:{autofocus:"",flat:"","background-color":"transparent",solo:"",maxlength:40,rules:t.rules},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.edit(i,s)}},model:{value:t.editing.text,callback:function(e){t.$set(t.editing,"text",e)},expression:"editing.text"}}):a("v-chip",{attrs:{color:s.color,dark:"",label:""}},[t._v(" "+t._s(s.text)+" ")]),a("v-spacer"),a("v-list-item-action",{on:{click:function(t){t.stopPropagation()}}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.edit(i,s)}}},[a("v-icon",[t._v(t._s(t.editing!==s?"mdi-pencil":"mdi-check"))])],1)],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1)],1)],1),a("v-row",{staticStyle:{"margin-top":"50px","margin-bottom":"20px"}},[t.fish_species_validated?a("v-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"}},[a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("basic-info")}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[a("v-icon",[t._v("mdi-pencil")]),t._v("Muuta tietoja")],1)],1),a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("points")}}},[a("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1):a("v-row",[a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("basic-info")}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.checkFishSpecies}},[a("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"points"}},[a("v-container",{staticStyle:{width:"70%"}},[a("v-row",[a("v-col",[a("p",{staticClass:"flow-text center-align",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Syötä kaloille pistekertoimet ja alamitat ")]),t.fish_specs_validated?a("p",{staticClass:"yellow lighten-1 black--text"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),a("v-row",[a("v-col",{staticClass:"specs",attrs:{id:"select_specs"}},[t.selected.length?a("ul",t._l(t.selected,(function(e,i){return a("li",{key:i,staticClass:"row",attrs:{id:"fish_spec"}},[a("v-row",[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme},attrs:{id:"fish_"+(i+1)+"_name"}},[t._v(t._s(i+1)+". "+t._s(e.text))])]),a("v-col",{staticClass:"input-fields"},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Pistekerroin",id:"fish_"+(i+1)+"_multiplier",maxlength:"4",value:"1",type:"number",counter:4,rules:t.number_rules,disabled:t.fish_specs_validated},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}}})],1),a("v-col",{staticClass:"input-fields"},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Alamitta",id:"fish_"+(i+1)+"_minsize",maxlength:40,value:"0",counter:40,rules:t.rules,disabled:t.fish_specs_validated},on:{paste:function(t){t.preventDefault()}}})],1)],1)],1)})),0):a("p",{staticClass:"flow-text center-align"},[t._v(" Yhtään kalaa ei ole valittu! ")])])],1),a("v-row",{staticStyle:{"margin-bottom":"20px"}},[t.selected.length&&!t.validated?a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("fishes")}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.checkFishSpecs}},[a("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1):a("v-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"}},[a("v-col",{attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("fishes")}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),a("v-col",{attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[a("v-icon",[t._v("mdi-pencil")]),t._v("Muuta tietoja")],1)],1),a("v-col",{attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("summary")}}},[a("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"summary"}},[t.loading?a("v-container",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Tallennetaan kilpailua tietokantaan... ")]),a("ProgressBarQuery")],1):a("v-container",[a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Perustiedot ")])])],1),a("v-row",{staticClass:"basic_summary"},[a("v-col",[a("v-list",{attrs:{outlined:"",elevation:"20",dark:t.$store.getters.getTheme}},[a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-ferry")])],1),a("v-list-item-title",[t._v("Kilpailu")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.name)+" ("+t._s(t.locality)+")")])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"yellow darken-1"}},[t._v("mdi-medal")])],1),a("v-list-item-title",[t._v("Cup")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.cup.name))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"green darken-2"}},[t._v("mdi-scoreboard")])],1),a("v-list-item-title",[t._v("Voittajan Cup sijoittumispisteet")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.cup_placement_points))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"green darken-1"}},[t._v("mdi-scoreboard")])],1),a("v-list-item-title",[t._v("Kilpailijoiden Cup osallistumispisteet ")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.cup_participation_points))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-close-outline")])],1),a("v-list-item-title",[t._v("Kilpailun Cup pistekerroin")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.cup_points_multiplier))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-account-multiple-outline")])],1),a("v-list-item-title",[t._v("Onko Tiimikilpailua?")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[t._v(t._s(t.team_competition)+" ")])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-calendar-today")])],1),a("v-list-item-title",[t._v("Päivämäärä")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.start_date)+" - "+t._s(t.end_date))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-clock-time-four")])],1),a("v-list-item-title",[t._v("Kilpailuaika")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.start_time)+" - "+t._s(t.end_time))])])],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{md:"12"}},[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kalojen määritykset ")])])],1),a("v-row",{staticClass:"fishes_summary"},[a("v-col",{attrs:{md:"12"}},[a("v-list",{attrs:{outlined:"",elevation:"20",dark:t.$store.getters.getTheme}},t._l(t.completed_fish_specs,(function(e,i){return a("div",{key:i},[a("v-list-item",[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(" x "+t._s(e.multiplier))])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on,n=i.attrs;return[a("span",t._g(t._b({},"span",n,!1),s),[a("b",[t._v(t._s(e.minsize)+" cm")])])]}}],null,!0)},[a("span",[t._v(t._s(e.minsize))])])],1)],1)],1)})),0)],1)],1),a("v-row",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[a("v-col",{attrs:{md:"5","offset-md":"1"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("points")}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),t.validated?a("v-col",{attrs:{md:"5"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.submitCompetition}},[a("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo kilpailu näillä tiedoilla")],1)],1):t._e()],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=a("2909"),o=a("1da1"),r=(a("96cf"),a("d81d"),a("d3b7"),a("25f0"),a("4e827"),a("b0c0"),a("159b"),a("99af"),a("7db0"),a("a9e3"),a("fb6a"),a("ac1f"),a("5319"),a("7149")),l=a("51dd"),c=a("a822"),u=a("e0b1"),m={name:"RegisterComp",components:{ProgressBarQuery:c["default"]},data:function(){var t=this;return{tab:null,errors:[],selected:[],days_options:[1,2,3,4,5,6,7],name:null,locality:null,cups:[],cup:{},cup_placement_points:30,cup_participation_points:5,cup_points_multiplier:1,team_competition:"Ei",start_date:(new Date).toISOString().substr(0,10),end_date:(new Date).toISOString().substr(0,10),start_time:null,end_time:null,basic_info:null,completed_fish_specs:[],basic_info_validated:!1,fish_species_validated:!1,fish_specs_validated:!1,validated:!1,loading:!1,max_input:40,tabs:null,rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(e){return(e||"").length<=t.max_input||"Enintään 40 merkkiä"}],number_rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],placement_points_array:[{points:35,placement:1},{points:33,placement:2},{points:31,placement:3},{points:29,placement:4},{points:27,placement:5},{points:25,placement:6},{points:24,placement:7},{points:23,placement:8},{points:22,placement:9},{points:21,placement:10},{points:20,placement:11},{points:19,placement:12},{points:18,placement:13},{points:17,placement:14},{points:16,placement:15},{points:15,placement:16},{points:14,placement:17},{points:13,placement:18},{points:12,placement:19},{points:11,placement:20},{points:10,placement:21},{points:9,placement:22},{points:8,placement:23},{points:7,placement:24},{points:6,placement:25},{points:5,placement:26}],activator:null,attach:null,colors:["green lighten-2","purple lighten-2","indigo lighten-2","cyan lighten-2","teal lighten-2","orange lighten-2"],options:[{text:"Ahven",color:"blue lighten-1",index:0},{text:"Hauki",color:"red lighten-1",index:1},{text:"Kuha",color:"green lighten-1",index:2},{text:"Lohi",color:"purple lighten-1",index:3},{text:"Taimen",color:"indigo lighten-1",index:4}],editing:null,editingIndex:-1,nonce:1,menu:!1,x:0,search:null,y:0,snackbar:!1,text:"",timeout:5e3}},mounted:function(){this.getCups(),location.href="#",location.href="#app"},watch:{selected:function(t,e){var a=this;t.length!==e.length&&(this.selected=t.map((function(t,e){if("string"===typeof t){var i=0;a.nonce>=1&&(i=a.nonce-1),t={text:t,color:a.colors[i],index:e},a.options.push(t),a.nonce++}return t})))}},methods:{changeTab:function(t){this.tab=t},edit:function(t,e){this.editing?(this.editing=null,this.editingIndex=-1):(this.editing=e,this.editingIndex=t)},filter:function(t,e,a){if(t.header)return!1;var i=function(t){return null!=t?t:""},s=i(a),n=i(e);return s.toString().toLowerCase().indexOf(n.toString().toLowerCase())>-1},getCups:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")),i=a["_id"],t.loading=!0,e.prev=3,e.next=6,l["a"].getCups({user_id:i});case 6:t.cups=e.sent,t.cups.length&&(t.cups.sort((function(t,e){return t.name-e.name})),t.cups.forEach((function(t){t.select="".concat(t.name," (").concat(t.year,")")})),t.$route.query.cup?t.cup=t.cups.find((function(e){return e.id===t.$route.query.cup})):t.cup=t.cups[t.cups.length-1]),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.error=e.t0.message;case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))()},isNumber:function(t,e){var a=46,i=".";e||(a=58,i=":"),t=t||window.event;var s=t.which?t.which:t.keyCode;if(s>31&&(s<48||s>57)&&s!==a)t.preventDefault();else{if(s!=a)return!0;if(!(t.target.value.indexOf(i)>=0))return!0;t.preventDefault()}},showError:function(t){this.errors.push(t),location.href="#",location.href="#app"},checkBasicInformation:function(){var t=this;this.errors=[],this.basic_info_validated=!1,this.validated=!1;var e=this.$moment(this.start_date,"YYYY-M-D",!0).isValid(),a=this.$moment(this.end_date,"YYYY-M-D",!0).isValid(),i=this.$moment(this.start_time,"H:mm",!0).isValid(),s=this.$moment(this.end_time,"H:mm",!0).isValid();if(this.name||this.showError("Kilpailun nimi puuttuu!"),this.locality||this.showError("Kilpailun paikkakunta puuttuu!"),this.cup.id||this.showError("Cuppia ei valittuna!"),this.cup_placement_points||this.showError("Määritä kilpailun voittajalle Cup sijoittumispisteet (Voittaja saa pisteet: Sijoittumispisteet + Osallistumispisteet)!"),this.cup_participation_points||this.showError("Määritä kilpailun Cup osallistumispisteet!"),this.cup_points_multiplier||this.showError("Kilpailun pistekerroin puuttuu!"),this.cup_points_multiplier<.1&&this.showError("Kilpailun pistekerroin pitää olla vähintään 0.1!"),this.start_time&&i||(1==!this.start_time?this.showError("Kilpailun alkamisnaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.start_time)),this.end_time&&s||(1==!this.end_time?this.showError("Kilpailun loppumisaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.end_time)),this.start_date&&e||(1==!this.start_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)')),this.end_date&&a){var o=this.$moment(this.start_date).format("DD.MM.YYYY"),r=this.$moment(this.end_date).format("DD.MM.YYYY"),l=this.$moment("".concat(o," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),c=this.$moment("".concat(r," ").concat(this.end_time),"DD.MM.YYYY HH:mm");c.isBefore(l,"minutes")&&this.showError("Kilpailun päättymispäivämäärä ja kellonaika ei voi olla ennen alkamispäivämäärää!")}else 1==!this.end_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)');if(!this.errors.length){var u=this.$moment(this.start_date).format("DD.MM.YYYY"),m=this.$moment(this.end_date).format("DD.MM.YYYY"),d=this.$moment("".concat(u," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),p=this.$moment("".concat(m," ").concat(this.end_time),"DD.MM.YYYY HH:mm"),h=[];if(1!==this.cup_points_multiplier){var _=1;this.placement_points_array.forEach((function(e){h.push({placement:_,points:(e.points-t.cup_participation_points)*t.cup_points_multiplier+t.cup_participation_points}),_++}))}else h=Object(n["a"])(this.placement_points_array);this.basic_info={name:this.name,locality:this.locality,cup_name:this.cup.name,cup_placement_points:Number(this.cup_placement_points),cup_participation_points:Number(this.cup_participation_points),cup_placement_points_array:h,cup_points_multiplier:Number(this.cup_points_multiplier),team_competition:"Ei"!==this.team_competition,start_date:d,end_date:p,start_time:this.start_time,end_time:this.end_time},this.disableInputs(!0),this.tab="fishes"}},checkFishSpecies:function(){this.errors=[],this.fish_species_validated=!1,this.validated=!1,this.selected.length?(this.selected.forEach((function(t){t.text.length>40&&(t.text=t.text.slice(0,40))})),this.disableInputs(!0),this.tab="points"):(this.fish_species_validated=!1,this.showError("Yhtään kalalajia ei ole valittu!"))},checkFishSpecs:function(){this.completed_fish_specs=[];var t=u["a"].getRandomColors(this.selected.length);this.errors=[];for(var e=1;e<this.selected.length+1;e++){var a={name:document.getElementById("fish_".concat(e,"_name")).innerHTML.replace("".concat(e,". "),""),multiplier:Number(document.getElementById("fish_".concat(e,"_multiplier")).value),minsize:document.getElementById("fish_".concat(e,"_minsize")).value,weights:0,color:t[e-1]};!a.multiplier||!a.minsize||parseInt(a.multiplier)<1||parseInt(a.minsize)<0?this.showError("Syötä kalan '".concat(a.name,"' kaikki tiedot oikein! (Pistekerroin > 0, Alamitta >= 0 )")):this.completed_fish_specs.push(a)}!this.errors.length&&this.completed_fish_specs.length==this.selected.length&&this.completed_fish_specs.length>0?(this.fish_specs_validated=!0,this.basic_info_validated&&this.fish_species_validated&&this.fish_specs_validated?(this.disableInputs(!0),this.tab="summary"):(this.validated=!1,0==this.basic_info_validated?this.showError("Tarkista kilpailun perustiedot!"):console.log("Perustiedot kunnossa!"),0==this.fish_species_validated?this.showError("Tarkista kalojen tiedot!"):console.log("Kalojen tiedot kunnossa!"),0==this.fish_specs_validated?this.showError("Tarkista kalojen pistekertoimet ja alamitat!"):console.log("Kalojen pistekertoimet ja alamitat kunnossa!"))):this.showError("Joitain tietoja puuttuu vielä!")},disableInputs:function(t){"basic-info"===this.tab&&(t?this.basic_info_validated=!0:(this.basic_info_validated=!1,this.validated=!1)),"fishes"===this.tab&&(t?this.fish_species_validated=!0:(this.fish_species_validated=!1,this.validated=!1)),"points"===this.tab&&(t?(this.fish_specs_validated=!0,this.validated=!0):(this.fish_specs_validated=!1,this.validated=!1))},submitCompetition:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.validated){e.next=19;break}return t.loading=!0,a=JSON.parse(localStorage.getItem("user")),i=a["_id"],s=t.cup.id,n={cup_id:s,user_id:i,name:t.basic_info.name,locality:t.basic_info.locality,cup_name:t.basic_info.cup_name,cup_placement_points:t.basic_info.cup_placement_points,cup_placement_points_array:t.basic_info.cup_placement_points_array,cup_participation_points:t.basic_info.cup_participation_points,cup_points_multiplier:t.basic_info.cup_points_multiplier,team_competition:t.basic_info.team_competition,start_date:t.basic_info.start_date,end_date:t.basic_info.end_date,duration:t.basic_info.duration,start_time:t.basic_info.start_time,end_time:t.basic_info.end_time,fishes:t.completed_fish_specs,state:"Rekisteröity",total_weights:0,signees:[],results:[],teams:[],biggest_fishes:{},biggest_amounts:{}},e.prev=6,e.next=9,r["a"].insertCompetition(n);case 9:t.text="Kilpailu lisätty tietokantaan!",t.snackbar=!0,t.$router.push({path:"/continue"}),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](6),t.errors.push(e.t0.message);case 17:e.next=20;break;case 19:t.errors.push("Not validated somehow?");case 20:case"end":return e.stop()}}),e,null,[[6,14]])})))()}}},d=m,p=a("2877"),h=a("6544"),_=a.n(h),v=a("0798"),g=a("8336"),f=a("b0af"),b=a("cc20"),k=a("62ad"),x=a("2b5d"),w=a("a523"),y=a("2e4b"),T=a("ce7e"),C=a("132d"),$=a("8860"),S=a("da13"),V=a("1800"),I=a("5d23"),j=a("34c3"),P=a("67b6"),E=a("43a6"),D=a("0fd9"),K=a("b974"),N=a("2db4"),L=a("2fa4"),B=a("71a3"),R=a("c671"),O=a("fe57"),F=a("aac8"),M=a("9a96"),Y=a("8654"),A=a("c964"),H=a("3a2f"),J=Object(p["a"])(d,i,s,!1,null,null,null);e["default"]=J.exports;_()(J,{VAlert:v["a"],VBtn:g["a"],VCard:f["a"],VChip:b["a"],VCol:k["a"],VCombobox:x["a"],VContainer:w["a"],VDatePicker:y["a"],VDivider:T["a"],VIcon:C["a"],VList:$["a"],VListItem:S["a"],VListItemAction:V["a"],VListItemContent:I["a"],VListItemIcon:j["a"],VListItemSubtitle:I["b"],VListItemTitle:I["c"],VRadio:P["a"],VRadioGroup:E["a"],VRow:D["a"],VSelect:K["a"],VSnackbar:N["a"],VSpacer:L["a"],VTab:B["a"],VTabItem:R["a"],VTabs:O["a"],VTabsItems:F["a"],VTabsSlider:M["a"],VTextField:Y["a"],VTimePicker:A["a"],VTooltip:H["a"]})}}]);
//# sourceMappingURL=about~7c5ad5f5.30145cd1.js.map