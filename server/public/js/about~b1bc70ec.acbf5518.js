(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about~b1bc70ec"],{2226:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-row",[i("v-col",[i("CompetitionNavigation")],1),i("v-col",[i("Timedate")],1)],1),i("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[t.errors.length?i("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[i("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),i("v-list",t._l(t.errors,(function(e,a){return i("v-list-item",{key:a},[i("v-list-item-icon",[i("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),t.loading?i("div",[i("v-row",[i("v-col",[i("v-card",{staticStyle:{background:"transparent","text-align":"center"},attrs:{elevation:"2",outlined:"",dark:t.$store.getters.getTheme}},[i("h1",{staticClass:"text-center"},[t._v("Valmistellaan kilpailua...")]),i("ProgressBarQuery")],1)],1)],1)],1):i("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[i("v-row",{attrs:{align:"center"}},[i("v-col",[i("h1",{staticStyle:{margin:"30px"}},[t._v("Yleisnäkymä")])])],1),i("v-row",[i("v-col",[i("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[i("v-card-title",{staticClass:"text-center"},[i("p",{staticClass:"display-1"},[t._v(" "+t._s(t.competition.name)+" ")])]),i("v-list",{attrs:{outlined:"",elevation:"10"}},[i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-calendar-today")])],1),i("v-list-item-title",[t._v("Päivämäärä")]),i("v-list-item-subtitle",{staticClass:"blue--text"},[i("b",[t._v(t._s(t.formatted_start_date)+" - "+t._s(t.formatted_end_date))])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-clock-time-four")])],1),i("v-list-item-title",[t._v("Kilpailuaika")]),i("v-list-item-subtitle",{staticClass:"blue--text"},[i("b",[t._v(t._s(t.competition.start_time)+" - "+t._s(t.competition.end_time))])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"green darken-4"}},[t._v("mdi-state-machine")])],1),i("v-list-item-title",[t._v("Tila")]),i("v-list-item-subtitle",{class:{"green--text":"Kaikki maalissa"===t.competition.state,"blue--text":"Kaikki maalissa"!==t.competition.state}},[i("b",[t._v(t._s(t.competition.state))])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-card-account-details-outline")])],1),i("v-list-item-title",[t._v("Ilmoittautuneita")]),i("v-list-item-subtitle",{class:{"green--text":t.competition.signees.length,"red--text":!t.competition.signees.length}},[i("b",[t._v(t._s(t.competition.signees.length))])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"blue darken-4"}},[t._v("mdi-water-alert")])],1),i("v-list-item-title",[t._v("Vielä vesillä")]),t.competition.signees.length?i("v-list-item-subtitle",{class:{"green--text":!t.competition.signees.length-t.$store.getters.getFinishedSignees.length,"red--text":t.competition.signees.length}},[i("b",[t._v(t._s(t.hasNotReturnedPercentage)+"%")]),t._v(" ("+t._s(t.competition.signees.length-t.$store.getters.getFinishedSignees.length)+" / "+t._s(t.competition.signees.length)+") ")]):i("v-list-item-subtitle",{staticClass:"green--text"},[i("b",[t._v("Ketään ei vielä vesillä!")])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"blue"}},[t._v("mdi-fish")])],1),i("v-list-item-title",[t._v("Saalista saaneita")]),t.competition.signees.length?i("v-list-item-subtitle",{staticClass:"green--text"},[i("b",[t._v(t._s(t.hasGottenFishPercentage)+"%")]),t._v(" ("+t._s(t.$store.getters.getPointSignees.length)+" / "+t._s(t.competition.signees.length)+") ")]):i("v-list-item-subtitle",{staticClass:"red--text"},[i("b",[t._v("Ei vielä ilmoittautuneita!")])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"yellow darken-4"}},[t._v("mdi-seal")])],1),i("v-list-item-title",[t._v("Kalaa saatu yhteensä")]),t.competition.signees.length?i("v-list-item-subtitle",{staticClass:"green--text"},[i("b",[t._v(t._s(t.competition.total_weights/1e3)+" kg")])]):i("v-list-item-subtitle",{staticClass:"red--text"},[i("b",[t._v("Ei vielä ilmoittautuneita!")])])],1)],1)],1)],1)],1)],1)],1)],1)},s=[],n=i("1da1"),o=(i("96cf"),i("99af"),i("7149")),r=i("b3a7"),l=i("7ba5"),c=i("a822"),u={name:"Overview",components:{Timedate:r["a"],ProgressBarQuery:c["default"],CompetitionNavigation:l["a"]},data:function(){return{competition:null,loading:!1,errors:[],formatted_start_date:null,formatted_end_date:null,dialog:!1,hasNotReturnedPercentage:0,hasGottenFishPercentage:0,selectedItem:0,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}]}},created:function(){if(null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition")),e=t["id"];this.refreshCompetition(e)}else console.log("No competition in localstorage!")},mounted:function(){if(location.href="#",location.href="#app",null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition")),e=t["id"];this.refreshCompetition(e)}else console.log("No competition in localstorage!")},methods:{refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.loading=!0,e.errors=[],i.prev=2,i.next=5,o["a"].getCompetitions({_id:t});case 5:a=i.sent,a?(e.competition=a,e.$store.commit("refreshCompetition",e.competition),localStorage.setItem("cup",e.competition.cup_id),s=e.$moment(e.competition.start_date),n=e.$moment(e.competition.end_date),e.formatted_start_date="".concat(s.date(),".").concat(s.month()+1,".").concat(s.year()),e.formatted_end_date="".concat(n.date(),".").concat(n.month()+1,".").concat(n.year()),e.hasGottenFishPercentage=Math.round(e.$store.getters.getPointSignees.length/e.competition.signees.length*100*100)/100,e.hasNotReturnedPercentage=Math.round((e.competition.signees.length-e.$store.getters.getFinishedSignees.length)/a.signees.length*100*100)/100):e.competition={name:"Kilpailua ei löytynyt tietokannasta..."},i.next=12;break;case 9:i.prev=9,i.t0=i["catch"](2),console.log(i.t0.message);case 12:e.loading=!1;case 13:case"end":return i.stop()}}),i,null,[[2,9]])})))()}}},d=u,m=i("2877"),p=i("6544"),h=i.n(p),_=i("0798"),v=i("b0af"),g=i("99d9"),f=i("62ad"),b=i("a523"),k=i("ce7e"),x=i("132d"),w=i("8860"),y=i("da13"),C=i("5d23"),S=i("34c3"),$=i("0fd9"),T=Object(m["a"])(d,a,s,!1,null,null,null);e["default"]=T.exports;h()(T,{VAlert:_["a"],VCard:v["a"],VCardTitle:g["c"],VCol:f["a"],VContainer:b["a"],VDivider:k["a"],VIcon:x["a"],VList:w["a"],VListItem:y["a"],VListItemContent:C["a"],VListItemIcon:S["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"],VRow:$["a"]})},"38eb":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("PublicNavigation"),i("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[i("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[i("v-row",[i("v-dialog",{attrs:{width:"500"},model:{value:t.pdfDialog,callback:function(e){t.pdfDialog=e},expression:"pdfDialog"}},[i("v-card",{attrs:{dark:t.$store.getters.getTheme}},[i("v-card-title",[t._v(" Pdf Asetukset ")]),i("v-card-text",[i("v-checkbox",{attrs:{label:"Pfd Vaakatasossa"},model:{value:t.isLandscape,callback:function(e){t.isLandscape=e},expression:"isLandscape"}})],1),i("v-divider"),i("v-card-actions",[i("v-btn",{attrs:{color:"yellow",text:""},on:{click:function(e){t.pdfDialog=!1}}},[t._v(" Peruuta ")]),i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.pdfDialog=!1,t.pdfWrapper()}}},[t._v(" Lataa ")])],1)],1)],1)],1),i("v-row",[i("v-col",[i("v-row",[i("v-col",{attrs:{md:"6","offset-md":"3"}},[i("h1",[t._v("Kilpailujen tuloksia")])])],1),t.competitions.length?i("v-row",{staticClass:"scroll_table"},[i("v-col",{attrs:{md:"6","offset-md":"3"}},[i("v-select",{attrs:{dark:"","menu-props":t.$store.getters.getTheme?"dark":"light",items:t.competitions,"item-text":"select","item-value":"_id",label:"Valitse näytettävä kilpailu",loading:t.loading,outlined:"","return-object":"","single-line":""},on:{input:t.pickCompetition},scopedSlots:t._u([{key:"item",fn:function(e){return[i("v-list-item-icon",[e.item.isFinished?i("v-icon",{attrs:{color:"green"}},[t._v("mdi-trophy")]):i("v-icon",{attrs:{color:"yellow"}},[t._v("mdi-trophy")])],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:t._s(e.item.name+", "+e.item.locality)}}),i("v-list-item-subtitle",{staticClass:"green--text",domProps:{innerHTML:t._s(e.item.cup_name+" ("+t.$moment(e.item.start_date).format("YYYY")+")")}}),i("v-list-item-subtitle",{staticClass:"blue--text",domProps:{innerHTML:t._s(t.$moment(e.item.start_date).format("DD.MM.YYYY"))}}),e.item.isFinished?t._e():i("v-list-item-subtitle",[t._v("Kesken!")])],1)]}}],null,!1,1041930679),model:{value:t.selected_competition,callback:function(e){t.selected_competition=e},expression:"selected_competition"}})],1)],1):t._e(),i("v-row",{staticStyle:{"margin-bottom":"20px"},attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-btn",{staticClass:"black--text",attrs:{large:"",outlined:"",color:"yellow",disabled:!t.competition},on:{click:t.cancelSelection}},[i("v-icon",[t._v("mdi-cancel")]),t._v("Peruuta valinta ")],1)],1),i("v-col",[i("v-dialog",{attrs:{scrollable:"","max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:t.$store.getters.getTheme,large:"",color:"red lighten-2",outlined:"",loading:t.loading_competition,disabled:!t.biggest_amounts_results.length||!t.competition}},"v-btn",s,!1),a),[i("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa kaikki tulokset ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{dark:t.$store.getters.getTheme}},[i("v-card-text",{staticStyle:{"margin-top":"20px"}},[i("h1",[t._v("PDF Asetukset")]),i("v-checkbox",{attrs:{label:"Pfd Vaakatasossa"},model:{value:t.isLandscape,callback:function(e){t.isLandscape=e},expression:"isLandscape"}})],1),i("v-card-title",[t._v("Valitse mitä lataus sisältää")]),i("v-divider"),i("v-card-text",{staticStyle:{height:"300px",width:"100%"}},[i("v-checkbox",{attrs:{label:"Tilastoja",disabled:!t.biggest_amounts_results.length,color:"indigo darken-3",value:"stats"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),i("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Normaalikilpailun tulokset",color:"indigo darken-3",value:"normal"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),t.isTeamCompetition?i("v-checkbox",{attrs:{disabled:!t.team_results.length,label:"Tiimikilpailun tulokset",color:"indigo darken-3",value:"team"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}):t._e(),i("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Suurimmat kalat ja kalasaaliit (Kaikki kalat samassa taulukossa)",color:"indigo darken-3",value:"all_biggest"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),i("v-checkbox",{attrs:{disabled:!t.biggest_fishes_results.length,label:"Suurimmat yksittäiset kalat (Kalalajeittain taulukossa)",color:"indigo darken-3",value:"biggest_fishes"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),i("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Suurimmat kalasaaliit (Kalalajeittain taulukossa)",color:"indigo darken-3",value:"biggest_amounts"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),i("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length&&!t.biggest_amounts_results.length,label:"Suurimmat yksittäiset kalat / kalasaaliit (Voittajat)",color:"indigo darken-3",value:"biggest_winners"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}})],1),i("v-divider"),i("v-card-actions",[i("v-col",[i("v-btn",{attrs:{outlined:"",color:"red darken-4",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Sulje")])],1),i("v-col",[i("v-btn",{attrs:{outlined:"",color:"green darken-4",text:""},on:{click:t.choosePrints}},[t._v("Lataa")])],1)],1)],1)],1)],1)],1),i("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tabs-slider",{attrs:{color:"blue darken-4"}}),i("v-tab",{attrs:{href:"#stats"}},[t._v("Tilastoja")]),i("v-tab",{attrs:{href:"#normal-competition",disabled:!t.selected_competition}},[t._v("Normaalikilpailu")]),t.isTeamCompetition?i("v-tab",{attrs:{href:"#team-competition",disabled:!t.selected_competition}},[t._v("Tiimikilpailu")]):t._e(),i("v-tab",{attrs:{href:"#biggest-fishes",disabled:!t.selected_competition}},[t._v("Suurimmat Kalat")]),i("v-tab",{attrs:{href:"#biggest-fish-amounts",disabled:!t.selected_competition}},[t._v("Suurimmat Kalasaaliit")])],1),t.loading?i("v-row",{staticStyle:{margin:"50px"}},[i("v-col",[i("h2",{staticClass:"white--text"},[t._v("Haetaan kilpailuja...")]),i("ProgressBarQuery")],1)],1):t._e(),!t.loading&&t.selected_competition?i("v-tabs-items",{staticStyle:{background:"rgba(0, 0, 0, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"stats"}},[i("stats",{attrs:{competition:t.competition,signees:t.signees,loading:t.loading_competition,biggest_amounts:t.biggest_amounts_results,calculated_weights:t.calculated_fish_weights,calculated_total:t.calculated_total_weights,fishes_chart_title:t.fishes_chart_title,fishes_chart_data:t.fishes_chart_data,signee_chart_title:t.signee_chart_title,signee_chart_data:t.signee_chart_data},on:{dialog:function(e){t.pdf=e.pdf,t.pdfDialog=e.pdfDialog}}})],1),i("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"normal-competition"}},[i("normal-comp",{attrs:{loading:t.loading_competition,search:t.search,headers:t.headers,results:t.results,normal_options:t.normal_options,normal_points:t.normal_points,selected_normal:t.selected_normal},on:{switch:t.switchNormalResults,dialog:function(e){t.pdf=e.pdf,t.pdfDialog=e.pdfDialog}}})],1),t.isTeamCompetition?i("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"team-competition"}},[i("team-comp",{attrs:{team_results:t.team_results,loading:t.loading_competition,search_team:t.search_team,headers:t.team_headers},on:{dialog:function(e){t.pdf=e.pdf,t.pdfDialog=e.pdfDialog}}})],1):t._e(),i("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fishes"}},[i("v-row",{staticStyle:{"padding-top":"50px"}},[i("v-col",{attrs:{md:"3","offset-md":"4"}},[i("v-select",{attrs:{dark:"","menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_names},on:{input:t.calculateBiggestFishes},model:{value:t.selected_biggest_fish,callback:function(e){t.selected_biggest_fish=e},expression:"selected_biggest_fish"}})],1),t.biggest_fishes_results.length?i("v-col",{attrs:{md:"3","offset-md":"1"}},[i("v-btn",{attrs:{large:"",outlined:"",color:"red lighten-2",dark:"",loading:t.loading_competition},on:{click:function(e){t.pdf="#biggest-fishes-table",t.pdfDialog=!0}}},[i("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),i("biggest-fishes",{attrs:{biggest_fishes_results:t.biggest_fishes_results,fish_names:t.fish_names,loading:t.loading_competition,headers:t.biggest_fishes_headers,results_found_fishes:t.results_found_fishes,search_fishes:t.search_fishes}})],1),i("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fish-amounts"}},[i("v-row",{staticStyle:{"padding-top":"50px"}},[i("v-col",{attrs:{md:"3","offset-md":"4"}},[i("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_amount_names},on:{input:t.calculateBiggestAmounts},model:{value:t.selected_biggest_amount,callback:function(e){t.selected_biggest_amount=e},expression:"selected_biggest_amount"}})],1),t.biggest_amounts_results.length?i("v-col",{attrs:{md:"3","offset-md":"1"}},[i("v-btn",{attrs:{large:"",outlined:"",color:"red lighten-2",loading:t.loading,disabled:!t.biggest_amounts_results.length},on:{click:function(e){t.pdf="#biggest-amounts-table",t.pdfDialog=!0}}},[i("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),i("biggest-amounts",{attrs:{biggest_amounts_results:t.biggest_amounts_results,fish_names:t.fish_names,headers:t.biggest_amounts_headers,loading:t.loading_competition,results_found_amounts:t.results_found_amounts,search_amounts:t.search_amounts,selected_biggest_amount:t.selected_biggest_amount}})],1)],1):i("v-row",{staticStyle:{margin:"20px"}},[t.loading_competition||t.loading?t._e():i("v-col",[i("h2",{staticClass:"white--text"},[t._v("Kilpailua ei valittuna")])])],1),t.competition?i("div",{staticStyle:{margin:"20px"}},[t.loading_competition?i("v-row",[i("v-col",[i("h2",{staticClass:"white--text"},[t._v(" Päivitetään tuloksia tietokannasta... ")]),i("ProgressBarQuery")],1)],1):i("v-row",[i("v-col",[i("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",tile:"",loading:t.loading_competition,color:"blue darken-4"},on:{click:function(e){return t.refreshCompetition(!0)}}},[i("v-icon",[t._v("mdi-update")]),t._v("Päivitä tulokset ")],1)],1)],1)],1):t._e()],1)],1),i("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[i("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)],1)],1)},s=[],n=i("5530"),o=i("1da1"),r=(i("96cf"),i("ac1f"),i("5319"),i("5b81"),i("d3b7"),i("159b"),i("99af"),i("b0c0"),i("4e827"),i("b64b"),i("7db0"),i("4de4"),i("e9c4"),i("7149")),l=i("a822"),c=i("de30"),u=i("998c"),d=i("e0b1"),m=i("c54f"),p=i("0157"),h=i("543c"),_=i("1670"),v={name:"PublicResults",components:{ProgressBarQuery:l["default"],PublicNavigation:c["a"],Stats:u["a"],TeamComp:m["a"],NormalComp:p["a"],BiggestFishes:h["a"],BiggestAmounts:_["a"]},data:function(){return{pdfDialog:!1,pdf:null,isLandscape:!1,competitions:[],competition:null,selected_competition:null,loading:!1,loading_competition:!1,tab:null,signees:[],fish_names:[],fish_amount_names:[],table_fish_names:[],results:[],normal_points:[],normal_weights:[],team_results:[],biggest_fishes:{},biggest_fishes_results:[],selected_biggest_fish:null,biggest_amounts:{},biggest_amounts_results:[],selected_biggest_amount:null,results_found_fishes:"",results_found_amounts:"",isTeamCompetition:!1,calculated_total_weights:null,calculated_fish_weights:null,selected_normal:null,fishes_chart:null,signees_chart:null,normal_options:["Pisteet","Kalat","Ilmoittautuneet"],headers:[],biggest_fishes_headers:[],biggest_amounts_headers:[],normal_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Tulos",value:"total_points"},{text:"Cup pisteet",value:"cup_points_total"}],signee_headers:[],team_headers:[{text:"Sijoitus",value:"placement"},{text:"Tiimi",value:"name"},{text:"Jäsen 1",value:"captain_name_1"},{text:"Jäsen 2",value:"captain_name_2"},{text:"Jäsen 3",value:"captain_name_3"},{text:"Pisteet",value:"points"}],winner_headers:[{text:"Kalalaji",value:"name"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],all_fishes_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Kala",value:"fish"},{text:"Paino",value:"weight"}],biggest_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],search:"",search_team:"",search_fishes:"",search_amounts:"",selected_print:[],dialog:!1,signee_chart_data:null,fishes_chart_data:null,fishes_chart_title:null,signee_chart_title:null,selectedItem:0,items:[{text:"Kilpailujen tuloksia",icon:"mdi-seal",path:"/public-results",disabled:!0},{text:"Cuppien tuloksia",icon:"mdi-trophy",path:"/public-cups",disabled:!1}],snackbar:!1,text:"",timeout:5e3}},created:function(){this.saveAllAsPDF=d["default"].saveAllAsPDF,this.saveStatsAsPDF=d["default"].saveStatsAsPDF,this.saveAsPDF=d["default"].saveAsPDF,this.dictToArray=d["default"].dictToArray,this.capitalize_words=d["default"].capitalize_words,this.replaceAll=d["default"].replaceAll,this.formatDate=d["default"].formatDate,this.range=d["default"].range,this.getColorPoints=d["default"].getColorPoints,this.getColor=d["default"].getColor,this.initChartData=d["default"].initChartData,this.sortDict=d["default"].sortDict},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,i={isPublic:!0},e.next=5,r["a"].getCompetitions(i);case 5:t.competitions=e.sent,t.competitions.length?(t.competitions.forEach((function(e){e.start_date=t.$moment(e.start_date),e.end_date=t.$moment(e.end_date),e.select="".concat(e.name,", ").concat(e.start_date.year(),"  (").concat(e.cup_name,")")})),t.competitions.sort((function(t,e){return e.start_date.isAfter(t.start_date)})),t.$store.commit("refreshCompetition",t.competition),t.refreshCompetition(!1)):(t.signees=[],t.biggest_fishes=[],t.biggest_amounts=[]),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error(e.t0.message);case 12:t.loading=!1,location.href="#",location.href="#app";case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))()},methods:{pdfWrapper:function(){"Tilastoja"===this.pdf&&this.saveStatsAsPDF(this.pdf,this.isLandscape?"landscape":"portrait"),"#normal-table"===this.pdf&&this.saveAsPDF("Normaalikilpailun tulokset (".concat(this.selected_normal,")"),this.pdf,this.isLandscape?"landscape":"portrait"),"#team-table"===this.pdf&&this.saveAsPDF("Tiimikilpailun tulokset","#team-table",this.isLandscape?"landscape":"portrait"),"#biggest-fishes-table"===this.pdf&&this.saveAsPDF("Suurimmat kalat (".concat(this.selected_biggest_fish,")"),"#biggest-fishes-table",this.isLandscape?"landscape":"portrait"),"#biggest-amounts-table"===this.pdf&&this.saveAsPDF("Suurimmat kalat (".concat(this.selected_biggest_amount,")"),"#biggest-amounts-table",this.isLandscape?"landscape":"portrait")},choosePrints:function(){this.dialog=!1,this.selected_print.length&&this.saveAllAsPDF(this.tab,this.isLandscape?"landscape":"portrait")},changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):(this.text="Olet jo tällä sivulla!",this.snackbar=!0)},cancelSelection:function(){this.competition=null,this.selected_competition=null,localStorage.removeItem("competition")},calculateBiggestFishes:function(){var t=this,e=this.biggest_fishes,i=1;if(this.results_found_fishes=null,this.selected_biggest_fish||(this.selected_biggest_fish="Voittajat"),"Voittajat"===this.selected_biggest_fish)this.biggest_fishes_headers=this.winner_headers,this.biggest_fishes,this.biggest_fishes_results=this.sortDict(e);else if("Kaikki"===this.selected_biggest_fish)(function(){t.biggest_fishes_headers=t.all_fishes_headers;for(var a=[],s=function(){var t=o[n];e[t].forEach((function(e){e.fish=t,a.push(e)}))},n=0,o=Object.keys(e);n<o.length;n++)s();a.length?(a.sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),t.results_found_amounts=""):t.results_found_fishes="- Ei tuloksia";var r=-1,l=-1;t.biggest_fishes_results=a,t.biggest_fishes_results.forEach((function(t){r===t.weight?t.placement=l:(t.placement=l=i,r=t.weight),i++}))})();else{var a=[];this.biggest_fishes_headers=this.biggest_headers,e[this.selected_biggest_fish]?(a=e[this.selected_biggest_fish].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),this.results_found_amounts=""):this.results_found_fishes="- Ei tuloksia";var s=-1,n=-1;this.biggest_fishes_results=a,this.biggest_fishes_results.forEach((function(t){s===t.weight?t.placement=n:(t.placement=n=i,s=t.weight),i++}))}},calculateBiggestAmounts:function(){var t=this,e=this.biggest_amounts,i=1;if(this.results_found_amount="",this.selected_biggest_amount||(this.selected_biggest_amount="Voittajat"),"Voittajat"===this.selected_biggest_amount)this.biggest_amounts_headers=this.winner_headers,this.biggest_amounts,this.biggest_amounts_results=this.sortDict(e);else if("Kaikki"===this.selected_biggest_amount)(function(){t.biggest_amounts_headers=t.all_fishes_headers;for(var a=[],s=function(){var t=r[o];e[t].forEach((function(e){e.fish=t;var i=a.find((function(t){return t.boat_number===e.boat_number}));i?i.weight<e.weight&&(i=Object(n["a"])(Object(n["a"])({},e),{},{fish:t})):a.push(e)}))},o=0,r=Object.keys(e);o<r.length;o++)s();a.length?(a.sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),t.results_found_amounts=""):t.results_found_amount="- Ei tuloksia";var l=-1,c=-1;t.biggest_amounts_results=a,t.biggest_amounts_results.forEach((function(t){l===t.weight?t.placement=c:(t.placement=c=i,l=t.weight),i++}))})();else{this.biggest_amounts_headers=this.biggest_headers;var a=[];e[this.selected_biggest_amount]?(a=e[this.selected_biggest_amount].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),a=a.filter((function(t){return parseInt(t.weight)>0})),this.results_found_amounts=""):this.results_found_amount="- Ei tuloksia";var s=-1,o=-1;this.biggest_amounts_results=a,this.biggest_amounts_results.forEach((function(t){s===t.weight?t.placement=o:(t.placement=o=i,s=t.weight),i++}))}},calculateAll:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.calculateBiggestFishes(),t.calculateBiggestAmounts();case 2:case"end":return e.stop()}}),e)})))()},switchNormalResults:function(){var t=this;this.selected_normal||(this.selected_normal="Pisteet"),"Pisteet"===this.selected_normal&&(this.headers=this.normal_headers,this.results=this.normal_points),"Kalat"===this.selected_normal&&(this.headers=[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"}],this.results=this.normal_weights,this.table_fish_names.forEach((function(e){t.headers.push({text:e,value:e})})),this.headers.push({text:"Tulos",value:"total_points"})),"Ilmoittautuneet"===this.selected_normal&&(this.headers=this.signee_headers,this.results=this.$store.getters.getSignees)},refreshCompetition:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,s,n,o,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e.competition){i.next=15;break}if(e.loading_competition=!0,!t){i.next=7;break}return i.next=5,r["a"].getCompetitions({_id:e.competition._id});case 5:a=i.sent,a&&(e.competition=a,e.$store.commit("refreshCompetition",e.competition),localStorage.setItem("competition",JSON.stringify({id:a._id,start_date:a.start_date,end_date:a.end_date})));case 7:e.fish_names=[],e.fish_amount_names=[],e.table_fish_names=[],e.selected_print=[],e.signee_headers=[{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Lähtöpaikka",value:"starting_place"}],s=1;try{e.isTeamCompetition=e.$store.getters.isTeamCompetition,e.signees=e.$store.getters.getResultSignees,e.normal_points=e.competition.normal_points,e.normal_weights=e.competition.normal_weights,e.isTeamCompetition&&(e.signee_headers.push({text:"Tiimi",value:"team"}),e.team_results=e.competition.team_results,n=-1,o=-1,e.team_results.forEach((function(t){n===t.points?t.placement=o:(t.placement=o=s,n=t.points),s++}))),e.biggest_fishes=e.$store.getters.getBiggestFishes,e.biggest_amounts=e.$store.getters.getBiggestAmounts,e.calculated_total_weights=e.$store.getters.getCompetitionTotalWeights,e.calculated_fish_weights=e.competition.fishes,e.selected_normal="Pisteet",l=e.$store.getters.getCompetitionFishes,e.fish_names.push("Voittajat"),e.fish_amount_names.push("Voittajat"),e.fish_names.push("Kaikki"),e.fish_amount_names.push("Kaikki"),l.forEach((function(t){e.fish_names.push(t.name),e.fish_amount_names.push(t.name),e.table_fish_names.push(t.name)})),e.calculateAll(),e.fishes_chart&&e.signees_chart&&(e.fishes_chart.destroy(),e.signees_chart.destroy()),e.$nextTick((function(){var t=e.initChartData(e.calculated_fish_weights,e.table_fish_names,e.$store.getters.getPointSignees.length,e.signees.length);e.fishes_chart_title=t.fishes_chart.title,e.fishes_chart_data=t.fishes_chart.data,e.signee_chart_title=t.signee_chart.title,e.signee_chart_data=t.signee_chart.data})),e.normal_points.length?(e.results=e.normal_points,e.headers=e.normal_headers):(e.results=e.$store.getters.getSignees,e.headers=e.signee_headers,e.selected_normal="Ilmoittautuneet"),t&&(e.text="Tiedot ajantasalla!",e.snackbar=!0)}catch(c){console.error(c)}e.loading_competition=!1;case 15:case"end":return i.stop()}}),i)})))()},pickCompetition:function(){this.$store.commit("refreshCompetition",this.selected_competition),this.competition=this.selected_competition,localStorage.setItem("competition",JSON.stringify({id:this.competition._id,start_date:this.competition.start_date,end_date:this.competition.end_date})),this.refreshCompetition(!1)}}},g=v,f=i("2877"),b=i("6544"),k=i.n(b),x=i("8336"),w=i("b0af"),y=i("99d9"),C=i("ac7c"),S=i("62ad"),$=i("a523"),T=i("169a"),V=i("ce7e"),P=i("132d"),j=i("5d23"),I=i("34c3"),E=i("0fd9"),K=i("b974"),D=i("2db4"),L=i("2fa4"),Y=i("71a3"),R=i("c671"),F=i("fe57"),N=i("aac8"),O=i("9a96"),A=Object(f["a"])(g,a,s,!1,null,null,null);e["default"]=A.exports;k()(A,{VBtn:x["a"],VCard:w["a"],VCardActions:y["a"],VCardText:y["b"],VCardTitle:y["c"],VCheckbox:C["a"],VCol:S["a"],VContainer:$["a"],VDialog:T["a"],VDivider:V["a"],VIcon:P["a"],VListItemContent:j["a"],VListItemIcon:I["a"],VListItemSubtitle:j["b"],VListItemTitle:j["c"],VRow:E["a"],VSelect:K["a"],VSnackbar:D["a"],VSpacer:L["a"],VTab:Y["a"],VTabItem:R["a"],VTabs:F["a"],VTabsItems:N["a"],VTabsSlider:O["a"]})},"501e":function(t,e,i){},"73cf":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[i("v-card",{staticStyle:{background:"transparent",padding:"20px"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[t.errors.length?i("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[i("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),i("v-list",t._l(t.errors,(function(e,a){return i("v-list-item",{key:a},[i("v-list-item-icon",[i("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),i("v-row",[i("v-col",[i("h1",{staticStyle:{margin:"30px"}},[t._v("Register")])])],1),i("form",[i("v-row",[i("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Käyttäjänimi",id:"name",name:"name",type:"text",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),i("v-row",[i("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Sähköpostiosoite",id:"email",name:"email",type:"email",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),i("v-row",[i("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasana",id:"password",name:"password",type:"password",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),i("v-row",[i("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasanan vahvistus",id:"password_confirmation",name:"password_confirmation",type:"password",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}})],1)],1),t.password&&t.password===t.password_confirmation?i("v-row",[i("v-col",[i("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Salasanat täsmäävät! "),i("v-icon",[t._v("mdi-check-outline")])],1)])],1):i("v-row",[t.password&&t.password_confirmation?i("v-col",[i("span",{staticClass:"flow-text red-text"},[t._v("Salasanat ei täsmää! "),i("v-icon",[t._v("mdi-alert-circle")])],1)]):t._e()],1),i("v-row",[i("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[i("span",{staticClass:"col s6 flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Admin?")]),i("v-radio-group",{attrs:{row:""},model:{value:t.is_admin,callback:function(e){t.is_admin=e},expression:"is_admin"}},[i("v-radio",{attrs:{label:"Kyllä",value:"Yes"}}),i("v-radio",{attrs:{label:"Ei",value:"No"}})],1)],1)],1),t.loading?i("ProgressBarQuery",{staticStyle:{"margin-bottom":"20px"}}):i("v-row",[i("v-col",[i("v-btn",{staticClass:"white--text",attrs:{id:"sbtn",large:"",tile:"",color:"blue darken-4",disabled:0===t.password.length||t.password!==t.password_confirmation},on:{click:t.handleSubmit}},[i("v-icon",[t._v("mdi-account-plus")]),t._v("Rekisteröidy ")],1)],1)],1)],1)],1),i("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[i("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=i("1da1"),o=(i("96cf"),i("b0c0"),i("3faa")),r=i("a822"),l={props:["nextUrl"],data:function(){return{errors:[],name:"",email:"",password:"",password_confirmation:"",is_admin:"No",loading:!1,snackbar:!1,text:"",timeout:5e3}},components:{ProgressBarQuery:r["default"]},mounted:function(){var t=document.getElementById("password_confirmation");t.addEventListener("keyup",(function(t){13===t.keyCode&&(t.preventDefault(),document.getElementById("sbtn").click())})),location.href="#",location.href="#app"},methods:{showError:function(t){this.errors.push(t),location.href="#",location.href="#app"},handleSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.loading=!0,t.preventDefault(),e.errors=[],e.email||e.showError("Syötä sähköposti!"),e.password||e.showError("Syötä salasana!"),e.name||e.showError("Syötä nimi!"),!(e.password===e.password_confirmation&&e.password.length>0)){i.next=19;break}if(e.errors.length){i.next=16;break}return a={name:e.name,email:e.email,password:e.password,is_admin:"Yes"===e.is_admin},i.next=11,o["a"].insertUser(a);case 11:s=i.sent,e.loading=!1,s.success?e.showError("Käyttäjä rekisteröity!"):"Email is already in use!"===s.error.msg?e.showError("Sähköposti on jo käytössä!"):"Username is already taken!"===s.error.msg?e.showError("Käyttäjänimi on jo käytössä!"):(e.showError("Jokin meni pieleen... yritä uudelleen!"),console.log(s.error)),i.next=17;break;case 16:e.loading=!1;case 17:i.next=21;break;case 19:e.loading=!1,e.showError("Salasanat eivät vastaa toisiaan!");case 21:case"end":return i.stop()}}),i)})))()}}},c=l,u=i("2877"),d=i("6544"),m=i.n(d),p=i("0798"),h=i("8336"),_=i("b0af"),v=i("62ad"),g=i("a523"),f=i("132d"),b=i("8860"),k=i("da13"),x=i("5d23"),w=i("34c3"),y=i("67b6"),C=i("43a6"),S=i("0fd9"),$=i("2db4"),T=i("8654"),V=Object(u["a"])(c,a,s,!1,null,null,null);e["default"]=V.exports;m()(V,{VAlert:p["a"],VBtn:h["a"],VCard:_["a"],VCol:v["a"],VContainer:g["a"],VIcon:f["a"],VList:b["a"],VListItem:k["a"],VListItemContent:x["a"],VListItemIcon:w["a"],VListItemTitle:x["c"],VRadio:y["a"],VRadioGroup:C["a"],VRow:S["a"],VSnackbar:$["a"],VTextField:T["a"]})},"9e41":function(t,e,i){"use strict";i("501e")},a404:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("PublicNavigation"),i("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[i("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[i("v-row",[i("v-col",{attrs:{md:"6","offset-md":"3"}},[i("h1",[t._v("Cuppien tuloksia")])])],1),t.cups.length?i("v-row",{staticClass:"scroll_table"},[i("v-col",{attrs:{md:"4","offset-md":"4"}},[i("v-select",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:"",items:t.cups,"item-text":"select","item-value":"_id",label:"Valitse näytettävä Cup",outlined:"","return-object":"","single-line":""},on:{input:t.pickCup},model:{value:t.selected_cup,callback:function(e){t.selected_cup=e},expression:"selected_cup"}})],1)],1):i("v-row",[t.loading?i("v-col",[i("h2",{staticClass:"white--text"},[t._v("Ei cuppeja saatavilla :(")])]):i("v-col",[i("h2",{staticClass:"white--text"},[t._v("Haetaan cuppeja...")]),i("ProgressBarQuery")],1)],1),i("v-row",[i("v-col",[i("v-btn",{attrs:{large:"",outlined:"",color:"yellow",disabled:!t.selected_cup},on:{click:function(e){t.selected_cup=null,t.competitions=[],t.results=[]}}},[i("v-icon",[t._v("mdi-cancel")]),t._v("Peruuta valinta ")],1)],1)],1),t.selected_cup&&!t.loading?i("cup-points",{attrs:{competitions:t.competitions,headers:t.headers,cup:t.selected_cup,isResults:t.isResults,loading:t.loading,notFinishedCount:t.notFinishedCount,results:t.results,selectNumbers:t.selectNumbers},on:{change:function(e){return t.changeHeaders(e)},refresh:function(e){return t.refreshCup(e)},calculate:function(e){return t.calculateAll(t.competitions,e)},save:function(e){t.selectedCompetitions=e.selectedCompetitions,t.isLandscape=e.isLandscape,t.showInfoInPdf=e.showInfoInPdf,t.saveAsPDF("Tulokset")}}}):t._e(),t.loading?i("v-row",{staticStyle:{margin:"20px"}},[i("v-row",[i("v-col",[i("h2",{staticClass:"white--text"},[t._v("Haetaan cupin kilpailuja...")]),i("ProgressBarQuery")],1)],1)],1):t._e(),i("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[i("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)],1)],1)},s=[],n=i("2909"),o=i("1da1"),r=(i("96cf"),i("d3b7"),i("159b"),i("99af"),i("b0c0"),i("c740"),i("a434"),i("7db0"),i("4e827"),i("4de4"),i("a15b"),i("d81d"),i("e9c4"),i("ac1f"),i("1276"),i("5319"),i("4fadc"),i("07ac"),i("fb6a"),i("5b81"),i("3ca3"),i("ddb0"),i("51dd")),l=i("7149"),c=i("8baf"),u=(i("0da4"),i("a822")),d=i("de30"),m=i("e650"),p={name:"PublicCups",components:{ProgressBarQuery:u["default"],CupPoints:m["a"],PublicNavigation:d["a"]},data:function(){return{dialog:!1,isLandscape:!1,cup:null,cups:[],competitions:[],headers:[],results:[],loading:!1,selectNumbers:[],selectedCompetitions:0,selected_cup:null,tab:null,search:"",notFinishedCount:0,selectedItem:1,items:[{text:"Kilpailujen tuloksia",icon:"mdi-seal",path:"/public-results",disabled:!1},{text:"Cuppien tuloksia",icon:"mdi-trophy",path:"/public-cups",disabled:!0}],snackbar:!1,text:"",timeout:5e3,isResults:!1,showInfoInPdf:!0}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].getCups({isPublic:!0});case 2:t.cups=e.sent,t.cups.length&&t.cups.forEach((function(t){t.select="".concat(t.name," (").concat(t.year,")")})),location.href="#",location.href="#app";case 6:case"end":return e.stop()}}),e)})))()},methods:{pickCup:function(){this.refreshCup(this.selected_cup)},changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):(this.text="Olet jo tällä sivulla!",this.snackbar=!0)},calculateAll:function(t,e){var i=this,a=[];if(this.isResults=!1,t.forEach((function(t){t.normal_points.length&&t.normal_points.forEach((function(e){var s=a.findIndex((function(t){return parseInt(e.boat_number)===parseInt(t.boat_number)}));if(s>-1){var n=a[s];n.points_compare.push(e.cup_points_total),n.cup_results[t.key_name]={points:e.cup_points_total,placement:e.placement},a.splice(s,1,n)}else{var o=i.selected_cup.signees.find((function(t){return t.boat_number===e.boat_number}));e.captain_name=o.captain_name,e.temp_captain_name=o.temp_captain_name,e.locality=o.locality,e.cup_results=[],e.points_compare=[],e.points_compare.push(e.cup_points_total),e.cup_results[t.key_name]={points:e.cup_points_total,placement:e.placement},a.push(e)}}))})),a.length){this.isResults=!0,a=this.limitCompetitions(a,e),this.results=a.sort((function(t,e){return parseInt(e.cup_results["total"])-parseInt(t.cup_results["total"])})),this.changeHeaders("Paikkakunta");var s=1,n=-1,o=-1;this.results.forEach((function(t){n===t.cup_results["total"]?t.final_placement=o:(t.final_placement=s,n=t.cup_results["total"],o=t.final_placement),t.final_cup_points=t.cup_results["total"],s++}))}},limitCompetitions:function(t,e){var i=this;return e=e<0?0:e,t.forEach((function(t){if(i.competitions.length>=e){t.points_compare.sort((function(t,e){return parseInt(e)-parseInt(t)})),t.cup_results["total"]=0;var a=0;i.competitions.forEach((function(i){t.cup_results[i.key_name]&&(t.cup_results[i.key_name].placement=i.normal_points.find((function(e){return e.boat_number===t.boat_number})).placement,t.cup_results[i.key_name].points<t.points_compare[e]&&(t.cup_results[i.key_name].points=i.cup_participation_points),t.cup_results[i.key_name].points===t.points_compare[e]&&(1!==a&&(t.cup_results[i.key_name].points=i.cup_participation_points),a++))}))}t.cup_results.forEach((function(e){t.cup_results["total"]+=e.points}))})),t},refreshCup:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.loading=!0,e.$store.commit("refreshCup",t),i.prev=2,i.next=5,l["a"].getCompetitions({cup_id:t.id});case 5:e.competitions=i.sent,a=1,e.selectNumbers=[],e.competitions=e.competitions.filter((function(t){return t.isPublic})),e.competitions.forEach((function(t){e.selectNumbers.push(a),t.start_date=e.$moment(t.start_date),t.end_date=e.$moment(t.end_date),t.key_name=a,a++})),e.competitions.sort((function(t,e){return e.start_date.isBefore(t.start_date)})),t.meaningful_competitions>0?e.selectedCompetitions=t.meaningful_competitions:e.selectedCompetitions=e.competitions.length,e.calculateAll(e.competitions,e.selectedCompetitions),e.text="Tiedot ajantasalla!",e.snackbar=!0,e.loading=!1,i.next=22;break;case 18:i.prev=18,i.t0=i["catch"](2),e.loading=!1,console.error(i.t0);case 22:case"end":return i.stop()}}),i,null,[[2,18]])})))()},getCompetitionFinishedColor:function(t){return t?"red":"primary"},replaceAllChars:function(t,e){return Object(n["a"])(t).map((function(t){for(var i in e)t==i&&(t=e[i]);return t})).join("")},changeHeaders:function(t){var e=this;this.headers=[],this.headers.push({text:"Sijoitus",highlight:!1,align:"center",value:"final_placement"}),this.headers.push({text:"Kilp. Nro",align:"center",highlight:!1,value:"boat_number"}),this.headers.push({text:"Kippari",align:"center",highlight:!1,value:"captain_name"}),this.headers.push({text:"Paikkakunta",align:"center",highlight:!1,value:"locality"}),this.notFinishedCount=0,this.competitions.forEach((function(i){if(i.isFinished||e.notFinishedCount++,"Paikkakunta"===t){var a=e.headers.filter((function(t){return i.locality===t.text}));if(a.length){var s=" ".concat(i.locality," #").concat(a.length+1);e.headers.push({text:s,align:"center",highlight:!0,isFinished:!i.isFinished,value:"cup_results[".concat(i.key_name,"].points")})}else e.headers.push({text:i.locality,align:"center",highlight:!0,isFinished:!i.isFinished,value:"cup_results[".concat(i.key_name,"].points")})}else e.headers.push({text:i.name,align:"center",highlight:!0,isFinished:!i.isFinished,value:"cup_results[".concat(i.key_name,"].points")})})),this.headers.push({text:"Yhteensä",align:"center",highlight:!1,value:"final_cup_points"})},pickCompetition:function(t){this.$store.state.competition=t,localStorage.setItem("competition",JSON.stringify({id:t._id,start_date:t.start_date,end_date:t.end_date})),this.$router.push({path:"/overview"})},replaceAll:function(t,e,i){return t.split(e).join(i)},capitalize_words:function(t){return t.replace(/(?:^|\s|['`‘’.-])[^\x60^\x7B-\xDF](?!(\s|$))/g,(function(t){return t.toUpperCase()}))},dictToArray:function(t){var e=this,i=Object.entries(t),a=[];return i.forEach((function(t){var i=Object.values(t[1]),s=i[9];i[0]=String(i[11])+".",i[1]="("+String(i[1])+")",i[3]=i[4];var n=4;e.competitions.forEach((function(t){s[t.key_name]?i[n]="".concat(s[t.key_name].points,"p (").concat(s[t.key_name].placement,".)"):i[n]="-",n++})),i[n]="".concat(s["total"],"p"),a.push(i)})),a},saveAsPDF:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,o,r,l,u,d,m,p,h,_,v,g,f,b,k,x,w;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=new c["default"]({orientation:e.isLandscape?"landscape":"portrait"}),o="".concat(e.selected_cup.name," (").concat(e.selected_cup.year,")"),l=[],m=Object(n["a"])(e.competitions),p=m.slice().reverse().findIndex((function(t){return!0===t.isFinished})),h=m.length-1,_=p>=0?h-p:p,v=m[_],g=e.$moment(v.start_date),f="".concat(g.date(),".").concat(g.month()+1,".").concat(g.year()),s.setFontSize(24),s.text(13,15,o,{align:"left"}),s.line(0,20,400,20),s.setFontSize(14),0,b=0,e.competitions.forEach((function(t){t.isFinished?0:b++})),r=0===b?"Tulokset ".concat(f):"Tilanne ".concat(f,", ").concat(v.name," (").concat(v.locality,") jälkeen (").concat(b," kpl kilpailuja kesken)"),s.text(13,30,r,{align:"left"}),e.showInfoInPdf&&s.text(13,40,t+" (".concat(e.selectedCompetitions,"/").concat(e.competitions.length," parasta kilpailua otettu huomioon)"),{align:"left"}),e.headers.forEach((function(t){l.push(t.text)})),u=e.dictToArray(e.results,1),d=45,s.autoTable({head:[l],body:u,styles:{overflow:"linebreak",halign:"justify",fontSize:"8",lineColor:100,lineWidth:.25},columnStyles:{cellwidth:"auto"},headStyles:{cellwidth:"wrap"},theme:"striped",pageBreak:"auto",tableWidth:"auto",startY:d,margin:{top:20}}),k="".concat(e.selected_cup.year,"_").concat(e.replaceAll("Cup"," ",""),"_").concat(e.replaceAll(e.capitalize_words(t)," ",""),".pdf"),a.next=27,Promise.resolve().then(i.bind(null,"e0b1"));case 27:x=a.sent,w=x.default,w.openPdfOnNewTab(s,k);case 30:case"end":return a.stop()}}),a)})))()}}},h=p,_=(i("9e41"),i("2877")),v=i("6544"),g=i.n(v),f=i("8336"),b=i("b0af"),k=i("62ad"),x=i("a523"),w=i("132d"),y=i("0fd9"),C=i("b974"),S=i("2db4"),$=Object(_["a"])(h,a,s,!1,null,"55c24034",null);e["default"]=$.exports;g()($,{VBtn:f["a"],VCard:b["a"],VCol:k["a"],VContainer:x["a"],VIcon:w["a"],VRow:y["a"],VSelect:C["a"],VSnackbar:S["a"]})},a55b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[i("v-card",{staticStyle:{background:"transparent",padding:"20px"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[t.errors.length?i("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[i("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),i("v-list",t._l(t.errors,(function(e,a){return i("v-list-item",{key:a},[i("v-list-item-icon",[i("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),i("h1",{staticStyle:{margin:"50px"}},[t._v("Login")]),i("form",[i("v-row",[i("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,id:"name",label:"Käyttäjänimi",maxlength:"40",loading:t.loading,counter:40},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),i("v-row",[i("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasana",id:"password",type:"password",maxlength:"40",loading:t.loading,counter:40},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t.loading?i("v-row",[i("ProgressBarQuery",{staticStyle:{"margin-bottom":"20px"}})],1):i("v-row",[i("v-col",[i("v-btn",{staticClass:"white--text",attrs:{id:"sbtn",large:"",tile:"",outlined:"",color:"white"},on:{click:t.handleSubmit}},[i("v-icon",[t._v("mdi-login")]),t._v("Kirjaudu ")],1)],1)],1)],1)],1),i("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[i("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=i("1da1"),o=(i("96cf"),i("b0c0"),i("3faa")),r=i("a822"),l={data:function(){return{errors:[],name:null,password:null,loading:!1,snackbar:!1,text:"",timeout:5e3}},components:{ProgressBarQuery:r["default"]},mounted:function(){var t=document.getElementById("password");t.addEventListener("keyup",(function(t){13===t.keyCode&&(t.preventDefault(),document.getElementById("sbtn").click())})),location.href="#",location.href="#app"},methods:{showError:function(t){this.errors.push(t),location.href="#",location.href="#app"},handleSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.preventDefault(),e.errors=[],e.name||e.showError("Syötä Käyttäjänimi!"),e.password||e.showError("Syötä salasana!"),e.errors.length){i.next=34;break}return e.loading=!0,a={name:e.name,email:e.name,password:e.password},i.prev=7,i.next=10,o["a"].loginUser(a);case 10:if(s=i.sent,!s.success){i.next=18;break}e.$store.state.is_admin=s.is_admin,e.$store.state.logged_in=!0,null!=e.$route.params.nextUrl?e.$router.push(e.$route.params.nextUrl):e.$router.push({path:"/dashboard"}),e.loading=!1,i.next=27;break;case 18:if(401!==s.status&&404!==s.status){i.next=24;break}return e.loading=!1,e.showError("Käyttäjänimi tai salasana ei täsmää!"),i.abrupt("return");case 24:e.loading=!1,e.showError("Jokin meni vikaan, yritä uudestaan!"),console.log(s.error,s.status);case 27:i.next=34;break;case 29:i.prev=29,i.t0=i["catch"](7),console.log(i.t0),e.showError("Näillä tiedoilla ei löytynyt käyttäjää!"),e.$router.push({path:"/login"});case 34:case"end":return i.stop()}}),i,null,[[7,29]])})))()}}},c=l,u=i("2877"),d=i("6544"),m=i.n(d),p=i("0798"),h=i("8336"),_=i("b0af"),v=i("62ad"),g=i("a523"),f=i("132d"),b=i("8860"),k=i("da13"),x=i("5d23"),w=i("34c3"),y=i("0fd9"),C=i("2db4"),S=i("8654"),$=Object(u["a"])(c,a,s,!1,null,null,null);e["default"]=$.exports;m()($,{VAlert:p["a"],VBtn:h["a"],VCard:_["a"],VCol:v["a"],VContainer:g["a"],VIcon:f["a"],VList:b["a"],VListItem:k["a"],VListItemContent:x["a"],VListItemIcon:w["a"],VListItemTitle:x["c"],VRow:y["a"],VSnackbar:C["a"],VTextField:S["a"]})},f52d:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[i("v-row",[t.prevRoute?i("v-col",[t.prevRoute.name?i("v-btn",{attrs:{large:"",rounded:"",color:"yellow"},on:{click:function(e){return t.$router.push({path:t.prevRoute.path})}}},[i("v-icon",[t._v("mdi-keyboard-return")]),t._v("Palaa takaisin")],1):t._e()],1):t._e()],1),t.errors.length?i("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[i("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),i("v-list",t._l(t.errors,(function(e,a){return i("v-list-item",{key:a},[i("v-list-item-icon",[i("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),i("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[i("h1",{staticStyle:{margin:"30px"}},[t._v("Kilpailun luonti")]),i("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tabs-slider",{attrs:{color:"blue darken-4"}}),i("v-tab",{attrs:{href:"#basic-info"}},[t._v("1. Perustiedot")]),i("v-tab",{attrs:{href:"#fishes",disabled:!t.basic_info_validated}},[t._v("2. Kilpailun kalalajit")]),i("v-tab",{attrs:{href:"#points",disabled:!t.fish_species_validated}},[t._v("3. Pistekertoimet ja alamitat")]),i("v-tab",{attrs:{href:"#summary",disabled:!t.fish_specs_validated}},[t._v("4. Yhteenveto")])],1),i("v-tabs-items",{staticStyle:{background:"rgba(1, 1, 1, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab-item",{attrs:{value:"basic-info"}},[t.loading?i("v-container",[i("v-row",[i("v-col",[i("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Valmistellaan kilpailun luontia... ")]),i("ProgressBarQuery")],1)],1)],1):i("v-container",[i("v-row",[i("v-col",[i("p",{staticClass:"white--text"},[t._v("Kilpailun perustiedot")]),t.basic_info_validated?i("p",{staticClass:"yellow lighten-1 black--text"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),i("v-row",[i("v-col",{attrs:{cols:"12"}},[t.cup.name?i("v-row",{attrs:{justify:"center"}},[i("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun nimi",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1):t._e(),t.cup.name?i("v-row",{attrs:{justify:"center"}},[i("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Paikkakunta",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.locality,callback:function(e){t.locality=e},expression:"locality"}})],1)],1):t._e(),t.cup.name?i("v-row",{attrs:{align:"center",justify:"end"}},[i("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[i("v-subheader",{staticClass:"white--text"},[t._v(" Valitse Cup ")]),i("v-select",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.cups,"item-text":"select","item-value":"_id",hint:t.cup.name+" ("+t.cup.year+")",disabled:t.basic_info_validated,outlined:"","return-object":"","single-line":""},model:{value:t.cup,callback:function(e){t.cup=e},expression:"cup"}})],1),i("v-col",{staticStyle:{"margin-top":"20px"},attrs:{cols:"3"}},[i("v-btn",{attrs:{tile:"",color:"green lighten-1",outlined:"",large:""},on:{click:function(e){return t.$router.push({path:"/continue",query:{tab:"create"}})}}},[i("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo uusi cup!")],1)],1)],1):i("v-row",{staticClass:"valign-wrapper"},[i("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6","offset-md":"2"}},[i("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(' Ei luotuja cuppeja, Luo cup ensin "Jatka Kilpailuja sivulla" (Voit myös luoda cupin kilpailuille, jotka ei ole missään cupissa") ')])]),i("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"2"}},[i("router-link",{attrs:{to:"/continue"}},[i("v-btn",{attrs:{tile:"",color:"blue lighten-1"}},[i("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo cup!")],1)],1)],1)],1),t.cup.name?i("v-row",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"6"}},[i("h2",{staticClass:"white--text"},[t._v("Kilpailun sijoittumispisteet")]),i("v-list",{staticStyle:{"max-height":"400px","overflow-y":"auto"},attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},t._l(t.placement_points_array,(function(e,a){return i("div",{key:a,staticStyle:{"margin-top":"20px"}},[i("v-list-item",[i("v-row",{attrs:{align:"center"}},[i("v-col",[i("h3",[t._v("#"+t._s(e.placement))])]),i("v-col",[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Pisteet",rules:t.number_rules,disabled:t.basic_info_validated||!t.editPoints},on:{blur:t.sortPlacements},model:{value:e.points,callback:function(i){t.$set(e,"points",i)},expression:"p.points"}})],1),t.editPoints?i("v-col",[i("v-btn",{attrs:{color:"red"},on:{click:function(e){return t.removePlacement(a)}}},[i("v-icon",[t._v("mdi-delete")])],1)],1):t._e()],1)],1),i("v-divider")],1)})),0),t.editPoints?i("v-row",[i("v-col",[i("v-btn",{attrs:{color:"green"},on:{click:t.addPlacement}},[i("v-icon",[t._v("mdi-plus")]),t._v("Lisää pistesija")],1)],1)],1):t._e(),i("v-row",[t.editPoints?i("v-col",[i("v-btn",{attrs:{block:"",color:"yellow"},on:{click:t.cancelPoints}},[i("v-icon",[t._v("mdi-cancel")]),t._v("Peruuta")],1)],1):t._e(),i("v-col",[i("v-btn",{attrs:{block:"",color:t.editPoints?"green darken-2":"grey"},on:{click:t.confirmPoints}},[i("v-icon",[t._v("mdi-check")]),t._v(t._s(t.editPoints?"Valmis":"Muokkaa"))],1)],1)],1)],1),t.editPoints?i("v-col",{attrs:{cols:"2"}},[i("div",{staticStyle:{"margin-top":"200px"}},[i("p",[t._v(" Palauta alkuperäiset pisteet:"),i("br"),t._v("#1 = 30, #2 = 28, #3 = 26... ")]),i("v-btn",{attrs:{color:"red"},on:{click:t.resetPoints}},[t._v("Palauta")])],1)]):t._e()],1):t._e(),t.cup.name?i("v-row",{attrs:{justify:"center"}},[i("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun cup osallistumispisteet","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_participation_points>=0?t.cup_participation_points++:t.cup_participation_points=1},"click:prepend":function(e){t.cup_participation_points>=1?t.cup_participation_points--:t.cup_participation_points=0},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_participation_points,callback:function(e){t.cup_participation_points=e},expression:"cup_participation_points"}})],1)],1):t._e(),t.cup.name?i("v-row",{attrs:{justify:"center"}},[i("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Cup pistekerroin","append-outer-icon":"add",maxlength:"3","prepend-icon":"remove",counter:3,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_points_multiplier>=1?t.cup_points_multiplier+=.5:t.cup_points_multiplier=1},"click:prepend":function(e){t.cup_points_multiplier>=1.5?t.cup_points_multiplier-=.5:t.cup_points_multiplier=1},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_points_multiplier,callback:function(e){t.cup_points_multiplier=e},expression:"cup_points_multiplier"}})],1)],1):t._e(),t.cup.name?i("v-row",{attrs:{justify:"center",align:"center"}},[i("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[i("span",{staticClass:"white--text"},[t._v("Onko Tiimikilpailua?")]),i("v-row",{attrs:{justify:"center",align:"center"}},[i("v-spacer"),i("v-col",[i("v-radio-group",{attrs:{row:"",disabled:t.basic_info_validated},model:{value:t.team_competition,callback:function(e){t.team_competition=e},expression:"team_competition"}},[i("v-radio",{attrs:{label:"Kyllä",value:"Kyllä"}}),i("v-radio",{attrs:{label:"Ei",value:"Ei"}})],1)],1),i("v-spacer")],1)],1)],1):t._e(),t.cup.name?i("v-row",{staticStyle:{padding:"20px","margin-bottom":"20px"},attrs:{justify:"center",align:"center"}},[i("v-col",{attrs:{cols:"12",xl:"6",l:"6",md:"6",s:"10",xs:"12"}},[i("span",{staticClass:"white--text"},[t._v("Kilpailun Aloituspäivä")]),i("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi","first-day-of-week":"1",disabled:t.basic_info_validated},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1),i("v-col",{attrs:{cols:"12",xl:"6",l:"6",md:"6",s:"10",xs:"12"}},[i("span",{staticClass:"white--text"},[t._v("Kilpailun Lopetuspäivä")]),i("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi","first-day-of-week":"1",disabled:t.basic_info_validated},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1):t._e(),t.cup.name?i("v-row",{staticStyle:{padding:"20px","margin-bottom":"20px"},attrs:{justify:"center",align:"center"}},[i("v-col",{attrs:{cols:"12",xl:"6",l:"6",md:"6",s:"10",xs:"12"}},[i("span",{staticClass:"white--text"},[t._v("Kilpailun alkamismisaika")]),i("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1),i("v-col",{attrs:{cols:"12",xl:"6",l:"6",md:"6",s:"10",xs:"12"}},[i("span",{staticClass:"white--text"},[t._v("Kilpailun loppumisaika")]),i("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1)],1):t._e(),t.basic_info_validated?t._e():i("v-row",[t.cup.name?i("v-col",{attrs:{md:"6","offset-md":"3"}},[i("v-btn",{attrs:{large:"",block:"",color:"green"},on:{click:t.checkBasicInformation}},[i("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1):t._e()],1)],1),t.basic_info_validated?i("v-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"}},[i("v-col",{attrs:{md:"6"}},[i("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[i("v-icon",[t._v("mdi-pencil")]),t._v("Muuta tietoja")],1)],1),i("v-col",{attrs:{md:"6"}},[i("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("fishes")}}},[i("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1):t._e()],1)],1)],1),i("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"fishes"}},[i("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[i("v-row",[i("v-col",[t.fish_species_validated?i("p",{staticClass:"yellow lighten-1 black--text"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),i("v-row",[i("v-col",[i("v-row",[i("v-col",[i("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kalalajien valinta ")]),i("p",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" (Yli 40 merkkiä pitkät nimet lyhennetään 40 merkkiin) ")])])],1),i("v-row",[i("v-col",{attrs:{md:"10","offset-md":"1"}},[i("v-combobox",{attrs:{filter:t.filter,"hide-no-data":!t.search,items:t.options,"return-object":"","search-input":t.search,disabled:t.fish_species_validated,"hide-selected":"",label:"Valitse kalalaji, tai luo oma kirjoittamalla",multiple:"",solo:"",clearable:"",rules:t.rules,maxlength:40,dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light"},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[i("v-list-item",[i("span",{staticClass:"subheading"},[t._v("Luo uusi kalalaji painamalla Enter: ")]),i("v-chip",{attrs:{color:""+t.colors[t.nonce-1],label:"",small:""}},[t._v(" "+t._s(t.search)+" ")])],1)]},proxy:!0},{key:"selection",fn:function(e){var a=e.attrs,s=e.item,n=e.parent,o=e.selected;return[s===Object(s)?i("v-chip",t._b({attrs:{color:s.color,"input-value":o,label:""}},"v-chip",a,!1),[i("span",{staticClass:"pr-2"},[t._v(" "+t._s(s.text)+" ")]),i("v-icon",{attrs:{small:""},on:{click:function(t){return n.selectItem(s)}}},[t._v(" $delete ")])],1):t._e()]}},{key:"item",fn:function(e){var a=e.index,s=e.item;return[t.editing===s?i("v-text-field",{attrs:{autofocus:"",flat:"","background-color":"transparent",solo:"",maxlength:40,rules:t.rules},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.edit(a,s)}},model:{value:t.editing.text,callback:function(e){t.$set(t.editing,"text",e)},expression:"editing.text"}}):i("v-chip",{attrs:{color:s.color,dark:"",label:""}},[t._v(" "+t._s(s.text)+" ")]),i("v-spacer"),i("v-list-item-action",{on:{click:function(t){t.stopPropagation()}}},[i("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.edit(a,s)}}},[i("v-icon",[t._v(t._s(t.editing!==s?"mdi-pencil":"mdi-check"))])],1)],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1)],1)],1),i("v-row",{staticStyle:{"margin-top":"50px","margin-bottom":"20px"}},[t.fish_species_validated?i("v-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"}},[i("v-col",[i("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("basic-info")}}},[i("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),i("v-col",[i("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[i("v-icon",[t._v("mdi-pencil")]),t._v("Muuta tietoja")],1)],1),i("v-col",[i("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("points")}}},[i("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1):i("v-row",[i("v-col",{attrs:{md:"6"}},[i("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("basic-info")}}},[i("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),i("v-col",{attrs:{md:"6"}},[i("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.checkFishSpecies}},[i("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1)],1)],1)],1),i("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"points"}},[i("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[i("v-row",[i("v-col",[i("p",{staticClass:"flow-text center-align",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Syötä kaloille pistekertoimet ja alamitat ")]),t.fish_specs_validated?i("p",{staticClass:"yellow lighten-1 black--text"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),i("v-row",[i("v-col",{staticClass:"specs",attrs:{id:"select_specs"}},[t.selected.length?i("ul",t._l(t.selected,(function(e,a){return i("li",{key:a,staticClass:"row",attrs:{id:"fish_spec"}},[i("v-row",[i("v-col",[i("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme},attrs:{id:"fish_"+(a+1)+"_name"}},[t._v(t._s(a+1)+". "+t._s(e.text))])]),i("v-col",{staticClass:"input-fields"},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Pistekerroin",id:"fish_"+(a+1)+"_multiplier",maxlength:"4",value:"1",type:"number",counter:4,rules:t.number_rules,disabled:t.fish_specs_validated},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}}})],1),i("v-col",{staticClass:"input-fields"},[i("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Alamitta",id:"fish_"+(a+1)+"_minsize",maxlength:40,value:"0",counter:40,rules:t.rules,disabled:t.fish_specs_validated},on:{paste:function(t){t.preventDefault()}}})],1)],1)],1)})),0):i("p",{staticClass:"flow-text center-align"},[t._v(" Yhtään kalaa ei ole valittu! ")])])],1),i("v-row",{staticStyle:{"margin-bottom":"20px"}},[t.selected.length&&!t.validated?i("v-row",[i("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[i("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("fishes")}}},[i("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),i("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[i("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.checkFishSpecs}},[i("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1):i("v-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"}},[i("v-col",{attrs:{md:"4"}},[i("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("fishes")}}},[i("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),i("v-col",{attrs:{md:"4"}},[i("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[i("v-icon",[t._v("mdi-pencil")]),t._v("Muuta tietoja")],1)],1),i("v-col",{attrs:{md:"4"}},[i("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("summary")}}},[i("v-icon",[t._v("mdi-check")]),t._v("Jatka")],1)],1)],1)],1)],1)],1),i("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"summary"}},[t.loading?i("v-container",[i("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Tallennetaan kilpailua tietokantaan... ")]),i("ProgressBarQuery")],1):i("v-container",[i("v-row",[i("v-col",[i("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Perustiedot ")])])],1),i("v-row",{staticClass:"basic_summary"},[i("v-col",[i("v-list",{attrs:{outlined:"",elevation:"20",dark:t.$store.getters.getTheme}},[i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-ferry")])],1),i("v-list-item-title",[t._v("Kilpailu")]),i("v-list-item-subtitle",{staticClass:"blue-text"},[i("b",[t._v(t._s(t.name)+" ("+t._s(t.locality)+")")])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"yellow darken-1"}},[t._v("mdi-medal")])],1),i("v-list-item-title",[t._v("Cup")]),i("v-list-item-subtitle",{staticClass:"blue-text"},[i("b",[t._v(t._s(t.cup.name))])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"green"}},[t._v("mdi-clipboard-check")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Kilpailun sijoittumispisteet")]),i("v-list",{staticStyle:{"max-height":"400px","overflow-y":"auto"},attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},t._l(t.placement_points_array,(function(e,a){return i("div",{key:a,staticStyle:{"margin-top":"20px"}},[i("v-list-item",[i("v-row",{attrs:{align:"center"}},[i("v-col",[i("h3",[t._v("#"+t._s(e.placement))])]),i("v-col",[i("p",[t._v(t._s(e.points)+"p")])])],1)],1),i("v-divider")],1)})),0)],1)],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"green darken-1"}},[t._v("mdi-scoreboard")])],1),i("v-list-item-title",[t._v("Kilpailijoiden Cup osallistumispisteet ")]),i("v-list-item-subtitle",{staticClass:"blue-text"},[i("b",[t._v(t._s(t.cup_participation_points))])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-close-outline")])],1),i("v-list-item-title",[t._v("Kilpailun Cup pistekerroin")]),i("v-list-item-subtitle",{staticClass:"blue-text"},[i("b",[t._v(t._s(t.cup_points_multiplier))])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-account-multiple-outline")])],1),i("v-list-item-title",[t._v("Onko Tiimikilpailua?")]),i("v-list-item-subtitle",{staticClass:"blue-text"},[t._v(t._s(t.team_competition)+" ")])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-calendar-today")])],1),i("v-list-item-title",[t._v("Päivämäärä")]),i("v-list-item-subtitle",{staticClass:"blue-text"},[i("b",[t._v(t._s(t.start_date)+" - "+t._s(t.end_date))])])],1),i("v-divider"),i("v-list-item",[i("v-list-item-icon",[i("v-icon",[t._v("mdi-clock-time-four")])],1),i("v-list-item-title",[t._v("Kilpailuaika")]),i("v-list-item-subtitle",{staticClass:"blue-text"},[i("b",[t._v(t._s(t.start_time)+" - "+t._s(t.end_time))])])],1)],1)],1)],1),i("v-row",[i("v-col",{attrs:{md:"12"}},[i("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kalojen määritykset ")])])],1),i("v-row",{staticClass:"fishes_summary"},[i("v-col",{attrs:{md:"12"}},[i("v-list",{attrs:{outlined:"",elevation:"20",dark:t.$store.getters.getTheme}},t._l(t.completed_fish_specs,(function(e,a){return i("div",{key:a},[i("v-list-item",[i("v-list-item-title",[t._v(t._s(e.name))]),i("v-divider",{attrs:{vertical:""}}),i("v-list-item-subtitle",{staticClass:"green-text"},[i("b",[t._v(" x "+t._s(e.multiplier))])]),i("v-divider",{attrs:{vertical:""}}),i("v-list-item-subtitle",{staticClass:"blue-text"},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on,n=a.attrs;return[i("span",t._g(t._b({},"span",n,!1),s),[i("b",[t._v(t._s(e.minsize)+" cm")])])]}}],null,!0)},[i("span",[t._v(t._s(e.minsize))])])],1)],1)],1)})),0)],1)],1),i("v-row",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[i("v-col",{attrs:{md:"5","offset-md":"1"}},[i("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("points")}}},[i("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin")],1)],1),t.validated?i("v-col",{attrs:{md:"5"}},[i("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.submitCompetition}},[i("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo kilpailu näillä tiedoilla")],1)],1):t._e()],1)],1)],1)],1)],1),i("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[i("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=i("2909"),o=i("1da1"),r=(i("96cf"),i("e9c4"),i("d81d"),i("a434"),i("4e827"),i("d3b7"),i("159b"),i("25f0"),i("b0c0"),i("99af"),i("7db0"),i("a9e3"),i("fb6a"),i("ac1f"),i("5319"),i("7149")),l=i("51dd"),c=i("a822"),u=i("e0b1"),d=i("5fb0"),m={name:"RegisterComp",components:{ProgressBarQuery:c["default"]},data:function(){var t=this;return{prevRoute:null,tab:null,errors:[],selected:[],days_options:[1,2,3,4,5,6,7],name:null,locality:null,cups:[],cup:{},cup_participation_points:5,cup_points_multiplier:1,team_competition:"Ei",start_date:(new Date).toISOString().substr(0,10),end_date:(new Date).toISOString().substr(0,10),start_time:null,end_time:null,basic_info:null,completed_fish_specs:[],basic_info_validated:!1,fish_species_validated:!1,fish_specs_validated:!1,validated:!1,loading:!1,max_input:40,tabs:null,rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(e){return(e||"").length<=t.max_input||"Enintään 40 merkkiä"}],number_rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],placement_points_array:[],temp_placement_points_array:[],activator:null,attach:null,colors:["green lighten-2","purple lighten-2","indigo lighten-2","cyan lighten-2","teal lighten-2","orange lighten-2"],options:[{text:"Ahven",color:"blue lighten-1",index:0},{text:"Hauki",color:"red lighten-1",index:1},{text:"Kuha",color:"green lighten-1",index:2},{text:"Lohi",color:"purple lighten-1",index:3},{text:"Taimen",color:"indigo lighten-1",index:4}],editing:null,editingIndex:-1,nonce:1,menu:!1,x:0,search:null,y:0,snackbar:!1,text:"",timeout:5e3,editPoints:!1}},beforeRouteEnter:function(t,e,i){i((function(t){t.prevRoute=e}))},mounted:function(){this.getCups(),location.href="#",location.href="#app",this.placement_points_array=JSON.parse(JSON.stringify(d["a"].placement_points))},watch:{selected:function(t,e){var i=this;t.length!==e.length&&(this.selected=t.map((function(t,e){if("string"===typeof t){var a=0;i.nonce>=1&&(a=i.nonce-1),t={text:t,color:i.colors[a],index:e},i.options.push(t),i.nonce++}return t})))}},methods:{addPlacement:function(){var t=this.placement_points_array[this.placement_points_array.length-1];this.placement_points_array.push({points:t.points>1?t.points-1:1,placement:t.placement+1})},removePlacement:function(t){this.placement_points_array.splice(t,1)},sortPlacements:function(){this.placement_points_array.sort((function(t,e){return e.points-t.points})),this.savePlacements()},savePlacements:function(){this.placement_points_array.forEach((function(t,e){t.placement=e+1}))},cancelPoints:function(){this.editPoints=!this.editPoints,this.placement_points_array=JSON.parse(JSON.stringify(this.temp_placement_points_array))},confirmPoints:function(){this.savePlacements(),this.editPoints=!this.editPoints,this.temp_placement_points_array=JSON.parse(JSON.stringify(this.placement_points_array))},resetPoints:function(){this.placement_points_array=JSON.parse(JSON.stringify(d["a"].placement_points)),this.editPoints=!this.editPoints},changeTab:function(t){this.tab=t},edit:function(t,e){this.editing?(this.editing=null,this.editingIndex=-1):(this.editing=e,this.editingIndex=t)},filter:function(t,e,i){if(t.header)return!1;var a=function(t){return null!=t?t:""},s=a(i),n=a(e);return s.toString().toLowerCase().indexOf(n.toString().toLowerCase())>-1},getCups:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=JSON.parse(localStorage.getItem("user")),a=i["_id"],t.loading=!0,e.prev=3,e.next=6,l["a"].getCups({user_id:a});case 6:t.cups=e.sent,t.cups.length&&(t.cups.sort((function(t,e){return t.name-e.name})),t.cups.forEach((function(t){t.select="".concat(t.name," (").concat(t.year,")")})),t.$route.query.cup?t.cup=t.cups.find((function(e){return e.id===t.$route.query.cup})):t.cup=t.cups[t.cups.length-1]),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.error=e.t0.message;case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))()},isNumber:function(t,e){var i=46,a=".";e||(i=58,a=":"),t=t||window.event;var s=t.which?t.which:t.keyCode;if(s>31&&(s<48||s>57)&&s!==i)t.preventDefault();else{if(s!=i)return!0;if(!(t.target.value.indexOf(a)>=0))return!0;t.preventDefault()}},showError:function(t){this.errors.push(t),location.href="#",location.href="#app"},checkBasicInformation:function(){var t=this;this.errors=[],this.basic_info_validated=!1,this.validated=!1;var e=this.$moment(this.start_date,"YYYY-M-D",!0).isValid(),i=this.$moment(this.end_date,"YYYY-M-D",!0).isValid(),a=this.$moment(this.start_time,"H:mm",!0).isValid(),s=this.$moment(this.end_time,"H:mm",!0).isValid();if(this.name||this.showError("Kilpailun nimi puuttuu!"),this.locality||this.showError("Kilpailun paikkakunta puuttuu!"),this.cup.id||this.showError("Cuppia ei valittuna!"),this.cup_participation_points||this.showError("Määritä kilpailun Cup osallistumispisteet!"),this.cup_points_multiplier||this.showError("Kilpailun pistekerroin puuttuu!"),this.cup_points_multiplier<.1&&this.showError("Kilpailun pistekerroin pitää olla vähintään 0.1!"),this.start_time&&a||(1==!this.start_time?this.showError("Kilpailun alkamisnaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.start_time)),this.end_time&&s||(1==!this.end_time?this.showError("Kilpailun loppumisaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.end_time)),this.start_date&&e||(1==!this.start_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)')),this.end_date&&i){var o=this.$moment(this.start_date).format("DD.MM.YYYY"),r=this.$moment(this.end_date).format("DD.MM.YYYY"),l=this.$moment("".concat(o," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),c=this.$moment("".concat(r," ").concat(this.end_time),"DD.MM.YYYY HH:mm");c.isBefore(l,"minutes")&&this.showError("Kilpailun päättymispäivämäärä ja kellonaika ei voi olla ennen alkamispäivämäärää!")}else 1==!this.end_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)');if(!this.errors.length){var u=this.$moment(this.start_date).format("DD.MM.YYYY"),d=this.$moment(this.end_date).format("DD.MM.YYYY"),m=this.$moment("".concat(u," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),p=this.$moment("".concat(d," ").concat(this.end_time),"DD.MM.YYYY HH:mm"),h=[];if(1!==this.cup_points_multiplier){var _=1;this.placement_points_array.forEach((function(e){h.push({placement:_,points:e.points*t.cup_points_multiplier}),_++}))}else h=Object(n["a"])(this.placement_points_array);this.basic_info={name:this.name,locality:this.locality,cup_name:this.cup.name,cup_participation_points:Number(this.cup_participation_points),cup_placement_points_array:h,cup_points_multiplier:Number(this.cup_points_multiplier),team_competition:"Ei"!==this.team_competition,start_date:m,end_date:p,start_time:this.start_time,end_time:this.end_time},this.disableInputs(!0),this.tab="fishes"}},checkFishSpecies:function(){this.errors=[],this.fish_species_validated=!1,this.validated=!1,this.selected.length?(this.selected.forEach((function(t){t.text.length>40&&(t.text=t.text.slice(0,40))})),this.disableInputs(!0),this.tab="points"):(this.fish_species_validated=!1,this.showError("Yhtään kalalajia ei ole valittu!"))},checkFishSpecs:function(){this.completed_fish_specs=[];var t=u["default"].getRandomColors(this.selected.length);this.errors=[];for(var e=1;e<this.selected.length+1;e++){var i={name:document.getElementById("fish_".concat(e,"_name")).innerHTML.replace("".concat(e,". "),""),multiplier:Number(document.getElementById("fish_".concat(e,"_multiplier")).value),minsize:document.getElementById("fish_".concat(e,"_minsize")).value,weights:0,color:t[e-1]};!i.multiplier||!i.minsize||parseInt(i.multiplier)<1||parseInt(i.minsize)<0?this.showError("Syötä kalan '".concat(i.name,"' kaikki tiedot oikein! (Pistekerroin > 0, Alamitta >= 0 )")):this.completed_fish_specs.push(i)}!this.errors.length&&this.completed_fish_specs.length==this.selected.length&&this.completed_fish_specs.length>0?(this.fish_specs_validated=!0,this.basic_info_validated&&this.fish_species_validated&&this.fish_specs_validated?(this.disableInputs(!0),this.tab="summary"):(this.validated=!1,0==this.basic_info_validated?this.showError("Tarkista kilpailun perustiedot!"):console.log("Perustiedot kunnossa!"),0==this.fish_species_validated?this.showError("Tarkista kalojen tiedot!"):console.log("Kalojen tiedot kunnossa!"),0==this.fish_specs_validated?this.showError("Tarkista kalojen pistekertoimet ja alamitat!"):console.log("Kalojen pistekertoimet ja alamitat kunnossa!"))):this.showError("Joitain tietoja puuttuu vielä!")},disableInputs:function(t){"basic-info"===this.tab&&(t?this.basic_info_validated=!0:(this.basic_info_validated=!1,this.validated=!1)),"fishes"===this.tab&&(t?this.fish_species_validated=!0:(this.fish_species_validated=!1,this.validated=!1)),"points"===this.tab&&(t?(this.fish_specs_validated=!0,this.validated=!0):(this.fish_specs_validated=!1,this.validated=!1))},submitCompetition:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.validated){e.next=19;break}return t.loading=!0,i=JSON.parse(localStorage.getItem("user")),a=i["_id"],s=t.cup.id,n={cup_id:s,user_id:a,name:t.basic_info.name,locality:t.basic_info.locality,cup_name:t.basic_info.cup_name,cup_placement_points_array:t.basic_info.cup_placement_points_array,cup_participation_points:t.basic_info.cup_participation_points,cup_points_multiplier:t.basic_info.cup_points_multiplier,team_competition:t.basic_info.team_competition,start_date:t.basic_info.start_date,end_date:t.basic_info.end_date,duration:t.basic_info.duration,start_time:t.basic_info.start_time,end_time:t.basic_info.end_time,fishes:t.completed_fish_specs,state:"Rekisteröity",total_weights:0,signees:[],results:[],teams:[],biggest_fishes:{},biggest_amounts:{}},e.prev=6,e.next=9,r["a"].insertCompetition(n);case 9:t.text="Kilpailu lisätty tietokantaan!",t.snackbar=!0,t.$router.push({path:"/continue"}),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](6),t.errors.push(e.t0.message);case 17:e.next=20;break;case 19:t.errors.push("Not validated somehow?");case 20:case"end":return e.stop()}}),e,null,[[6,14]])})))()}}},p=m,h=i("2877"),_=i("6544"),v=i.n(_),g=i("0798"),f=i("8336"),b=i("b0af"),k=i("cc20"),x=i("62ad"),w=i("2b5d"),y=i("a523"),C=i("2e4b"),S=i("ce7e"),$=i("132d"),T=i("8860"),V=i("da13"),P=i("1800"),j=i("5d23"),I=i("34c3"),E=i("67b6"),K=i("43a6"),D=i("0fd9"),L=i("b974"),Y=i("2db4"),R=i("2fa4"),F=i("e0c7"),N=i("71a3"),O=i("c671"),A=i("fe57"),B=i("aac8"),M=i("9a96"),J=i("8654"),H=i("c964"),Q=i("3a2f"),z=Object(h["a"])(p,a,s,!1,null,null,null);e["default"]=z.exports;v()(z,{VAlert:g["a"],VBtn:f["a"],VCard:b["a"],VChip:k["a"],VCol:x["a"],VCombobox:w["a"],VContainer:y["a"],VDatePicker:C["a"],VDivider:S["a"],VIcon:$["a"],VList:T["a"],VListItem:V["a"],VListItemAction:P["a"],VListItemContent:j["a"],VListItemIcon:I["a"],VListItemSubtitle:j["b"],VListItemTitle:j["c"],VRadio:E["a"],VRadioGroup:K["a"],VRow:D["a"],VSelect:L["a"],VSnackbar:Y["a"],VSpacer:R["a"],VSubheader:F["a"],VTab:N["a"],VTabItem:O["a"],VTabs:A["a"],VTabsItems:B["a"],VTabsSlider:M["a"],VTextField:J["a"],VTimePicker:H["a"],VTooltip:Q["a"]})}}]);
//# sourceMappingURL=about~b1bc70ec.acbf5518.js.map