(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about~01425cc1"],{"73cf":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Header",{staticStyle:{"margin-bottom":"60px"}}),a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme},staticStyle:{"margin-top":"100px"}},[a("v-container",[t.errors.length?a("div",{attrs:{id:"errordiv"}},[a("ul",{staticClass:"collection with-header",staticStyle:{border:"1px solid red"}},[a("li",{staticClass:"collection-header",staticStyle:{background:"rgba(0,0,0,0)"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")])],1),t._l(t.errors,(function(e,i){return a("li",{key:i,staticClass:"collection-item",attrs:{id:"error"}},[a("p",{staticClass:"flow-text"},[t._v(t._s(i+1)+". "+t._s(e))])])}))],2)]):t._e(),a("v-row",[a("v-col",[a("h4",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Register ")])])],1),a("form",[a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Käyttäjänimi",id:"name",name:"name",type:"text",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Sähköpostiosoite",id:"email",name:"email",type:"email",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasana",id:"password",name:"password",type:"password",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasanan vahvistus",id:"password_confirmation",name:"password_confirmation",type:"password",maxlength:"40",loading:t.loading,counter:40},on:{paste:function(t){t.preventDefault()}},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}})],1)],1),t.password&&t.password===t.password_confirmation?a("v-row",[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Salasanat täsmäävät! "),a("i",{staticClass:"material-icons green-text"},[t._v("done_outline")])])])],1):a("v-row",[t.password&&t.password_confirmation?a("v-col",[a("span",{staticClass:"flow-text red-text"},[t._v("Salasanat ei täsmää! "),a("i",{staticClass:"material-icons red-text"},[t._v("error_outline")])])]):t._e()],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("span",{staticClass:"col s6 flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Admin?")]),a("v-radio-group",{attrs:{row:""},model:{value:t.is_admin,callback:function(e){t.is_admin=e},expression:"is_admin"}},[a("v-radio",{attrs:{label:"Kyllä",value:"Yes"}}),a("v-radio",{attrs:{label:"Ei",value:"No"}})],1)],1)],1),t.loading?a("ProgressBarQuery",{staticStyle:{"margin-bottom":"20px"}}):a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"sbtn",large:"",tile:"",color:"blue darken-4",disabled:0===t.password.length||t.password!==t.password_confirmation},on:{click:t.handleSubmit}},[a("i",{staticClass:"material-icons left"},[t._v("login")]),t._v("Rekisteröidy ")])],1)],1)],1)],1)],1)],1)},s=[],r=(a("b0c0"),a("96cf"),a("1da1")),l=a("4d5c"),o=a.n(l),n=a("3faa"),c=a("96c7"),p=a("a822"),d={props:["nextUrl"],data:function(){return{errors:[],name:"",email:"",password:"",password_confirmation:"",is_admin:"No",loading:!1}},components:{Header:c["default"],ProgressBarQuery:p["default"]},mounted:function(){var t=document.getElementById("password_confirmation");t.addEventListener("keyup",(function(t){13===t.keyCode&&(t.preventDefault(),document.getElementById("sbtn").click())})),location.href="#",location.href="#app"},methods:{showError:function(t){this.errors.push(t),o.a.toast({html:t}),location.href="#",location.href="#app"},handleSubmit:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.loading=!0,t.preventDefault(),e.errors=[],e.email||e.showError("Syötä sähköposti!"),e.password||e.showError("Syötä salasana!"),e.name||e.showError("Syötä nimi!"),!(e.password===e.password_confirmation&&e.password.length>0)){a.next=30;break}if(e.errors.length){a.next=27;break}return a.next=10,n["a"].getEmail(e.email);case 10:if(i=a.sent,!i.length){a.next=16;break}e.showError("Tällä sähköpostilla on jo rekisteröitynyt käyttäjä!"),e.loading=!1,a.next=25;break;case 16:if("Yes"!=e.is_admin){a.next=22;break}return s={name:e.name,email:e.email,password:e.password,is_admin:!0},a.next=20,n["a"].insertAdmin(s).then((function(t){var a=t.data.user.preferences;a||(a={isDark:!0,lang:"fi"}),localStorage.setItem("user",JSON.stringify({id:t.data.user._id,name:t.data.user.name,email:t.data.user.email,is_admin:t.data.user.is_admin,createdAt:t.data.user.createdAt,preferences:a})),localStorage.setItem("jwt",t.data.token),e.$store.state.isDark=a.isDark,e.$store.state.lang=a.lang,e.$store.state.logged_in=!0,e.$store.state.is_admin=!0,null!=localStorage.getItem("jwt")&&(e.$emit("loggedIn"),null!=e.$route.params.nextUrl?e.$router.push(e.$route.params.nextUrl):e.$router.push({path:"/dashboard"})),e.loading=!1})).catch((function(t){e.loading=!1,e.showError(t)}));case 20:a.next=25;break;case 22:return r={name:e.name,email:e.email,password:e.password},a.next=25,n["a"].insertUser(r).then((function(t){var a=t.data.user.preferences;a||(a={isDark:!0,lang:"fi"}),localStorage.setItem("user",JSON.stringify({id:t.data.user._id,name:t.data.user.name,email:t.data.user.email,is_admin:t.data.user.is_admin,createdAt:t.data.user.createdAt,preferences:a})),localStorage.setItem("jwt",t.data.token),e.$store.state.isDark=a.isDark,e.$store.state.lang=a.lang,e.$store.state.logged_in=!0,e.$store.state.is_admin=!1,null!=localStorage.getItem("jwt")&&(e.$emit("loggedIn"),null!=e.$route.params.nextUrl?e.$router.push(e.$route.params.nextUrl):e.$router.push({path:"/dashboard"})),e.loading=!1})).catch((function(t){return 500===t.response.status?(e.loading=!1,void e.showError("Ongelma käyttäjän rekisteröimisessä... Tarkasta tiedot ja yritä uudelleen")):(e.loading=!1,console.error(t))}));case 25:a.next=28;break;case 27:e.loading=!1;case 28:a.next=32;break;case 30:e.loading=!1,e.showError("Salasanat eivät vastaa toisiaan!");case 32:case"end":return a.stop()}}),a)})))()}}},u=d,m=a("2877"),_=a("6544"),h=a.n(_),v=a("0798"),f=a("8336"),g=a("62ad"),b=a("a523"),k=a("67b6"),w=a("43a6"),x=a("0fd9"),y=a("8654"),C=Object(m["a"])(u,i,s,!1,null,null,null);e["default"]=C.exports;h()(C,{VAlert:v["a"],VBtn:f["a"],VCol:g["a"],VContainer:b["a"],VRadio:k["a"],VRadioGroup:w["a"],VRow:x["a"],VTextField:y["a"]})},f52d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Header"),a("Timedate",{staticStyle:{"margin-top":"0"}}),t.errors.length?a("div",{attrs:{id:"errordiv"}},[a("ul",{staticClass:"collection with-header",staticStyle:{border:"1px solid red"}},[a("li",{staticClass:"collection-header",staticStyle:{background:"rgba(0,0,0,0)"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")])],1),t._l(t.errors,(function(e,i){return a("li",{key:i,staticClass:"collection-item",attrs:{id:"error"}},[a("p",{staticClass:"flow-text"},[t._v(t._s(i+1)+". "+t._s(e))])])}))],2)]):t._e(),a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme}},[t._m(0),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#basic-info"}},[t._v("1. Perustiedot")]),a("v-tab",{attrs:{href:"#fishes",disabled:!t.basic_info_validated}},[t._v("2. Kilpailun kalalajit")]),a("v-tab",{attrs:{href:"#points",disabled:!t.fish_species_validated}},[t._v("3. Pistekertoimet ja alamitat")]),a("v-tab",{attrs:{href:"#summary",disabled:!t.fish_specs_validated}},[t._v("4. Yhteenveto")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(1,1,1,0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"basic-info"}},[t.loading?a("v-container",[a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Valmistellaan kilpailun luontia... ")]),a("ProgressBarQuery")],1)],1)],1):a("v-container",[a("v-row",[a("v-col",[a("p",{staticClass:"center-align flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kilpailun perustiedot ")]),t.basic_info_validated?a("p",{staticClass:"flow-text yellow lighten-1 center-align"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),a("v-row",[a("v-col",{attrs:{md:"12"}},[t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun nimi",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Paikkakunta",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.locality,callback:function(e){t.locality=e},expression:"locality"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{attrs:{md:"3"}},[a("p",{staticClass:"center-align flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Valitse Cup ")])]),a("v-col",{staticClass:"d-flex",attrs:{md:"6"}},[a("v-select",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.cups,"item-text":"select","item-value":"_id",hint:t.cup.name+" ("+t.cup.year+")",disabled:t.basic_info_validated,outlined:"","return-object":"","single-line":""},model:{value:t.cup,callback:function(e){t.cup=e},expression:"cup"}})],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"3"}},[a("v-btn",{attrs:{tile:"",color:"green lighten-1"},on:{click:function(e){return t.$router.push({path:"/continue",query:{tab:"create"}})}}},[a("i",{staticClass:"material-icons left"},[t._v("add_circle_outline")]),t._v("Luo uusi cup!")])],1)],1):a("v-row",{staticClass:"valign-wrapper"},[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6","offset-md":"2"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(' Ei luotuja cuppeja, Luo cup ensin "Jatka Kilpailuja sivulla" (Voit myös luoda cupin kilpailuille, jotka ei ole missään cupissa") ')])]),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"2"}},[a("router-link",{attrs:{to:"/continue"}},[a("v-btn",{attrs:{tile:"",color:"blue lighten-1"}},[a("i",{staticClass:"material-icons left"},[t._v("add_circle_outline")]),t._v("Luo cup!")])],1)],1)],1),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun voittajan cup sijoittumispisteet","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_placement_points>=0?t.cup_placement_points++:t.cup_placement_points=1},"click:prepend":function(e){t.cup_placement_points>=1?t.cup_placement_points--:t.cup_placement_points=0},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_placement_points,callback:function(e){t.cup_placement_points=e},expression:"cup_placement_points"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun cup osallistumispisteet","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_participation_points>=0?t.cup_participation_points++:t.cup_participation_points=1},"click:prepend":function(e){t.cup_participation_points>=1?t.cup_participation_points--:t.cup_participation_points=0},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_participation_points,callback:function(e){t.cup_participation_points=e},expression:"cup_participation_points"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Cup pistekerroin","append-outer-icon":"add",maxlength:"3","prepend-icon":"remove",counter:3,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_points_multiplier>=1?t.cup_points_multiplier+=.5:t.cup_points_multiplier=1},"click:prepend":function(e){t.cup_points_multiplier>=1.5?t.cup_points_multiplier-=.5:t.cup_points_multiplier=1},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_points_multiplier,callback:function(e){t.cup_points_multiplier=e},expression:"cup_points_multiplier"}})],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Onko Tiimikilpailua?")])]),a("v-col",{attrs:{"offset-md":"4"}},[a("v-radio-group",{attrs:{row:"",disabled:t.basic_info_validated},model:{value:t.team_competition,callback:function(e){t.team_competition=e},expression:"team_competition"}},[a("v-radio",{attrs:{label:"Kyllä",value:"Kyllä"}}),a("v-radio",{attrs:{label:"Ei",value:"Ei"}})],1)],1)],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-row",{attrs:{align:"center"}},[a("span",{staticClass:"flow-text col s6",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun Aloituspäivä")])]),a("v-row",{attrs:{align:"center"}},[a("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi",disabled:t.basic_info_validated},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),a("v-col",{staticStyle:{"margin-bottom":"50px"},attrs:{cols:"12",md:"5","offset-md":"2"}},[a("v-row",{attrs:{align:"center"}},[a("span",{staticClass:"flow-text col s6",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun Lopetuspäivä")])]),a("v-row",[a("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi",disabled:t.basic_info_validated},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1)],1):t._e(),t.cup.name?a("v-row",[a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun alkamismisaika")])])],1),a("v-row",{attrs:{align:"center"}},[a("v-col",[a("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"5","offset-md":"1"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"12","offset-md":"2"}},[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v("Kilpailun loppumisaika")])])],1),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"12","offset-md":"2"}},[a("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1)],1)],1)],1):t._e(),t.basic_info_validated?t._e():a("v-row",[t.cup.name?a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-btn",{attrs:{large:"",block:"",color:"green"},on:{click:t.checkBasicInformation}},[a("i",{staticClass:"material-icons left"},[t._v("check")]),t._v("Jatka")])],1):t._e()],1)],1),t.basic_info_validated?a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[a("i",{staticClass:"material-icons left"},[t._v("settings")]),t._v("Muuta tietoja")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("fishes")}}},[a("i",{staticClass:"material-icons right"},[t._v("arrow_forward")]),t._v("Jatka")])],1)],1):t._e()],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"fishes"}},[a("v-container",[a("v-row",[a("v-col",[t.fish_species_validated?a("p",{staticClass:"flow-text yellow lighten-1 center-align"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),a("v-row",[a("v-col",[a("v-row",[a("v-col",[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kalalajien valinta ")]),a("p",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" (Yli 40 merkkiä pitkät nimet lyhennetään 40 merkkiin) ")])])],1),a("v-row",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-combobox",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.options,label:"Valitse kalalaji, tai luo oma kirjoittamalla",disabled:t.fish_species_validated,multiple:"",chips:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",t._b({key:JSON.stringify(e.item),attrs:{"input-value":e.selected,disabled:e.disabled},on:{"click:close":function(t){return e.parent.selectItem(e.item)}}},"v-chip",e.attrs,!1),[a("v-avatar",{staticClass:"accent white--text",attrs:{left:""},domProps:{textContent:t._s(e.item.slice(0,1).toUpperCase())}}),t._v(" "+t._s(e.item)+" ")],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1)],1)],1),a("v-row",{staticStyle:{"margin-top":"50px"}},[t.fish_species_validated?a("v-row",[a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("basic-info")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[a("i",{staticClass:"material-icons left"},[t._v("settings")]),t._v("Muuta tietoja")])],1),a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("points")}}},[a("i",{staticClass:"material-icons right"},[t._v("arrow_forward")]),t._v("Jatka")])],1)],1):a("v-row",[a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("basic-info")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.checkFishSpecies}},[a("i",{staticClass:"material-icons left"},[t._v("check")]),t._v("Jatka")])],1)],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"points"}},[a("v-container",[a("v-row",[a("v-col",[a("p",{staticClass:"flow-text center-align",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Syötä kaloille pistekertoimet ja alamitat ")]),t.fish_specs_validated?a("p",{staticClass:"flow-text yellow lighten-1 center-align"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat vielä muokata tietoja ')]):t._e()])],1),a("v-row",[a("v-col",{staticClass:"specs",attrs:{id:"select_specs"}},[t.selected.length?a("ul",t._l(t.selected,(function(e,i){return a("li",{key:e,staticClass:"row",attrs:{id:"fish_spec"}},[a("v-row",[a("v-col",[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme},attrs:{id:"fish_"+(i+1)+"_name"}},[t._v(t._s(i+1)+". "+t._s(e))])]),a("v-col",{staticClass:"input-fields"},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Pistekerroin",id:"fish_"+(i+1)+"_multiplier",maxlength:"4",value:"1",type:"number",counter:4,rules:t.number_rules,disabled:t.fish_specs_validated},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}}})],1),a("v-col",{staticClass:"input-fields"},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Alamitta",id:"fish_"+(i+1)+"_minsize",maxlength:40,value:"0",counter:40,rules:t.rules,disabled:t.fish_specs_validated},on:{paste:function(t){t.preventDefault()}}})],1)],1)],1)})),0):a("p",{staticClass:"flow-text center-align"},[t._v(" Yhtään kalaa ei ole valittu! ")])])],1),a("v-row",[t.selected.length&&!t.validated?a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("fishes")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.checkFishSpecs}},[a("i",{staticClass:"material-icons left"},[t._v("check")]),t._v("Tarkista tiedot")])],1)],1):a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("fishes")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){return t.disableInputs(!1)}}},[a("i",{staticClass:"material-icons left"},[t._v("settings")]),t._v("Muuta tietoja")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.changeTab("summary")}}},[a("i",{staticClass:"material-icons right"},[t._v("arrow_forward")]),t._v("Jatka")])],1)],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"summary"}},[t.loading?a("v-container",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Tallennetaan kilpailua tietokantaan... ")]),a("ProgressBarQuery")],1):a("v-container",[a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Perustiedot ")])])],1),a("v-row",{staticClass:"basic_summary"},[a("v-col",[a("table",{staticClass:"centered responsive-table highlight",class:{"white--text":t.$store.getters.getTheme}},[a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Kilpailu ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.name)+" ("+t._s(t.locality)+") ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v("Cup")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.cup.name)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Voittajan Cup sijoittumispisteet ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.cup_placement_points)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Kilpailijoiden Cup osallistumispisteet ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.cup_participation_points)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Kilpailun Cup pistekerroin ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.cup_points_multiplier)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Onko Tiimikilpailua? ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.team_competition)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Aloituspäivä ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.start_date)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Lopetuspäivä ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.end_date)+" ")])]),a("tr",[a("th",{staticStyle:{border:"1px solid black"}},[t._v(" Kilpailuajankohta ")]),a("td",{staticClass:"center-align",staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(t.start_time)+" - "+t._s(t.end_time)+" ")])])])])],1),a("v-row",[a("v-col",{attrs:{md:"12"}},[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kalojen määritykset ")])])],1),a("v-row",{staticClass:"fishes_summary"},[a("v-col",{attrs:{md:"12"}},[a("table",{staticClass:"highlight centered responsive-table table_header",class:{"white--text":t.$store.getters.getTheme}},[a("thead",[a("tr",[a("th",[t._v("Kalalaji")]),a("th",[t._v("Pistekerroin")]),a("th",[t._v("Alamitta")])])]),a("tbody",t._l(t.completed_fish_specs,(function(e,i){return a("tr",{key:i},[a("th",{staticStyle:{border:"1px solid black"},attrs:{scope:"row"}},[t._v(" "+t._s(e.name)+" ")]),a("td",{staticStyle:{border:"1px solid black"}},[t._v(" x "+t._s(e.multiplier)+" ")]),a("td",{staticStyle:{border:"1px solid black"}},[t._v(" "+t._s(e.minsize)+" cm ")])])})),0)])])],1),a("v-row",[a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"5","offset-md":"1"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue lighten-2"},on:{click:function(e){return t.changeTab("points")}}},[a("i",{staticClass:"material-icons left"},[t._v("arrow_back")]),t._v("Takaisin")])],1),t.validated?a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"5"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.submitCompetition}},[a("i",{staticClass:"material-icons left"},[t._v("add_circle_outline")]),t._v("Luo kilpailu näillä tiedoilla")])],1):t._e()],1)],1)],1)],1)],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section"},[a("div",{staticClass:"col s12 center-align"},[a("h1",[t._v("Kilpailun luonti")])])])}],r=(a("99af"),a("7db0"),a("4160"),a("c975"),a("fb6a"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("159b"),a("2909")),l=(a("96cf"),a("1da1")),o=a("4d5c"),n=a.n(o),c=a("9225"),p=a("7149"),d=a("51dd"),u=a("a822"),m=a("b3a7"),_=a("96c7"),h={name:"RegisterComp",components:{ProgressBarQuery:u["default"],Header:_["default"],Timedate:m["default"]},data:function(){var t=this;return{tab:null,errors:[],options:["Ahven","Hauki","Kuha","Lohi","Taimen"],selected:[],days_options:[1,2,3,4,5,6,7],name:null,locality:null,cups:[],cup:{},cup_placement_points:30,cup_participation_points:5,cup_points_multiplier:1,team_competition:"Ei",start_date:(new Date).toISOString().substr(0,10),end_date:(new Date).toISOString().substr(0,10),start_time:null,end_time:null,basic_info:null,completed_fish_specs:[],basic_info_validated:!1,fish_species_validated:!1,fish_specs_validated:!1,validated:!1,loading:!1,max_input:40,tabs:null,rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(e){return(e||"").length<=t.max_input||"Enintään 40 merkkiä"}],number_rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],placement_points_array:[{points:35,placement:1},{points:33,placement:2},{points:31,placement:3},{points:29,placement:4},{points:27,placement:5},{points:25,placement:6},{points:24,placement:7},{points:23,placement:8},{points:22,placement:9},{points:21,placement:10},{points:20,placement:11},{points:19,placement:12},{points:18,placement:13},{points:17,placement:14},{points:16,placement:15},{points:15,placement:16},{points:14,placement:17},{points:13,placement:18},{points:12,placement:19},{points:11,placement:20},{points:10,placement:21},{points:9,placement:22},{points:8,placement:23},{points:7,placement:24},{points:6,placement:25},{points:5,placement:26}]}},mounted:function(){this.checkLogin(),n.a.AutoInit();var t=document.querySelectorAll(".collapsible");n.a.Collapsible.init(t,c["a"]);this.getCups(),location.href="#",location.href="#app"},methods:{changeTab:function(t){this.tab=t},getCups:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")),i=a["id"],t.loading=!0,e.prev=3,e.next=6,d["a"].getCups({user_id:i});case 6:t.cups=e.sent,t.cups.length&&(t.cups.sort((function(t,e){return t.name-e.name})),t.cups.forEach((function(t){t.select="".concat(t.name," (").concat(t.year,")")})),t.$route.query.cup?t.cup=t.cups.find((function(e){return e.id===t.$route.query.cup})):t.cup=t.cups[t.cups.length-1]),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.error=e.t0.message;case 13:t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))()},checkLogin:function(){if(null!=localStorage.getItem("jwt")){this.$store.state.logged_in=!0;var t=JSON.parse(localStorage.getItem("user"));1==t.is_admin?this.$store.state.is_admin=!0:this.$store.state.is_admin=!1}else this.$store.state.logged_in=!1,this.$store.state.is_admin=!1},isNumber:function(t,e){var a=46,i=".";e||(a=58,i=":"),t=t||window.event;var s=t.which?t.which:t.keyCode;if(s>31&&(s<48||s>57)&&s!==a)t.preventDefault();else{if(s!=a)return!0;if(!(t.target.value.indexOf(i)>=0))return!0;t.preventDefault()}},showError:function(t){this.errors.push(t),n.a.toast({html:t}),location.href="#",location.href="#app"},checkBasicInformation:function(){var t=this;this.errors=[],this.basic_info_validated=!1,this.validated=!1;var e=this.$moment(this.start_date,"YYYY-M-D",!0).isValid(),a=this.$moment(this.end_date,"YYYY-M-D",!0).isValid(),i=this.$moment(this.start_time,"H:mm",!0).isValid(),s=this.$moment(this.end_time,"H:mm",!0).isValid();if(this.name||this.showError("Kilpailun nimi puuttuu!"),this.locality||this.showError("Kilpailun paikkakunta puuttuu!"),this.cup.id||this.showError("Cuppia ei valittuna!"),this.cup_placement_points||this.showError("Määritä kilpailun voittajalle Cup sijoittumispisteet (Voittaja saa pisteet: Sijoittumispisteet + Osallistumispisteet)!"),this.cup_participation_points||this.showError("Määritä kilpailun Cup osallistumispisteet!"),this.cup_points_multiplier||this.showError("Kilpailun pistekerroin puuttuu!"),this.cup_points_multiplier<.1&&this.showError("Kilpailun pistekerroin pitää olla vähintään 0.1!"),this.start_time&&i||(1==!this.start_time?this.showError("Kilpailun alkamisnaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.start_time)),this.end_time&&s||(1==!this.end_time?this.showError("Kilpailun loppumisaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.end_time)),this.start_date&&e||(1==!this.start_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)')),this.end_date&&a){var l=this.$moment(this.start_date).format("DD.MM.YYYY"),o=this.$moment(this.end_date).format("DD.MM.YYYY"),n=this.$moment("".concat(l," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),c=this.$moment("".concat(o," ").concat(this.end_time),"DD.MM.YYYY HH:mm");c.isBefore(n,"minutes")&&this.showError("Kilpailun päättymispäivämäärä ja kellonaika ei voi olla ennen alkamispäivämäärää!")}else 1==!this.end_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)');if(!this.errors.length){var p=this.$moment(this.start_date).format("DD.MM.YYYY"),d=this.$moment(this.end_date).format("DD.MM.YYYY"),u=this.$moment("".concat(p," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),m=this.$moment("".concat(d," ").concat(this.end_time),"DD.MM.YYYY HH:mm"),_=[];if(1!==this.cup_points_multiplier){var h=1;this.placement_points_array.forEach((function(e){_.push({placement:h,points:(e.points-t.cup_participation_points)*t.cup_points_multiplier+t.cup_participation_points}),h++}))}else _=Object(r["a"])(this.placement_points_array);this.basic_info={name:this.name,locality:this.locality,cup_name:this.cup.name,cup_placement_points:Number(this.cup_placement_points),cup_participation_points:Number(this.cup_participation_points),cup_placement_points_array:_,cup_points_multiplier:Number(this.cup_points_multiplier),team_competition:"Ei"!==this.team_competition,start_date:u,end_date:m,start_time:this.start_time,end_time:this.end_time},this.disableInputs(!0),this.tab="fishes"}},checkFishSpecies:function(){if(this.errors=[],this.fish_species_validated=!1,this.validated=!1,this.selected.length){var t=[];this.selected.forEach((function(e){if(e.length>40){var a=e.slice(0,40);t.push(a)}else t.push(e)})),this.selected=t.sort(),this.disableInputs(!0),this.tab="points"}else this.fish_species_validated=!1,this.showError("Yhtään kalalajia ei ole valittu!")},generateRandomColor:function(){var t="#"+Math.floor(16777215*Math.random()).toString(16);return t},checkFishSpecs:function(){this.completed_fish_specs=[],this.errors=[];for(var t=1;t<this.selected.length+1;t++){var e={name:document.getElementById("fish_".concat(t,"_name")).innerHTML.replace("".concat(t,". "),""),multiplier:Number(document.getElementById("fish_".concat(t,"_multiplier")).value),minsize:document.getElementById("fish_".concat(t,"_minsize")).value,weights:0,color:this.generateRandomColor()};!e.multiplier||!e.minsize||parseInt(e.multiplier)<1||parseInt(e.minsize)<0?this.showError("Syötä kalan '".concat(e.name,"' kaikki tiedot oikein! (Pistekerroin > 0, Alamitta >= 0 )")):this.completed_fish_specs.push(e)}!this.errors.length&&this.completed_fish_specs.length==this.selected.length&&this.completed_fish_specs.length>0?(this.fish_specs_validated=!0,this.basic_info_validated&&this.fish_species_validated&&this.fish_specs_validated?(this.disableInputs(!0),this.tab="summary"):(this.validated=!1,0==this.basic_info_validated?this.showError("Tarkista kilpailun perustiedot!"):console.log("Perustiedot kunnossa!"),0==this.fish_species_validated?this.showError("Tarkista kalojen tiedot!"):console.log("Kalojen tiedot kunnossa!"),0==this.fish_specs_validated?this.showError("Tarkista kalojen pistekertoimet ja alamitat!"):console.log("Kalojen pistekertoimet ja alamitat kunnossa!"))):this.showError("Joitain tietoja puuttuu vielä!")},disableInputs:function(t){"basic-info"===this.tab&&(t?this.basic_info_validated=!0:(this.basic_info_validated=!1,this.validated=!1)),"fishes"===this.tab&&(t?this.fish_species_validated=!0:(this.fish_species_validated=!1,this.validated=!1)),"points"===this.tab&&(t?(this.fish_specs_validated=!0,this.validated=!0):(this.fish_specs_validated=!1,this.validated=!1))},submitCompetition:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.validated){e.next=18;break}return t.loading=!0,a=JSON.parse(localStorage.getItem("user")),i=a["id"],s=t.cup.id,r={cup_id:s,user_id:i,name:t.basic_info.name,locality:t.basic_info.locality,cup_name:t.basic_info.cup_name,cup_placement_points:t.basic_info.cup_placement_points,cup_placement_points_array:t.basic_info.cup_placement_points_array,cup_participation_points:t.basic_info.cup_participation_points,cup_points_multiplier:t.basic_info.cup_points_multiplier,team_competition:t.basic_info.team_competition,start_date:t.basic_info.start_date,end_date:t.basic_info.end_date,duration:t.basic_info.duration,start_time:t.basic_info.start_time,end_time:t.basic_info.end_time,fishes:t.completed_fish_specs,state:"Rekisteröity",total_weights:0,signees:[],results:[],teams:[],biggest_fishes:{},biggest_amounts:{}},e.prev=6,e.next=9,p["a"].insertCompetition(r);case 9:n.a.toast({html:"Kilpailu lisätty tietokantaan!"}),t.$router.push({path:"/continue"}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](6),t.errors.push(e.t0.message);case 16:e.next=19;break;case 18:t.errors.push("Not validated somehow?");case 19:case"end":return e.stop()}}),e,null,[[6,13]])})))()}}},v=h,f=a("2877"),g=a("6544"),b=a.n(g),k=a("0798"),w=a("8212"),x=a("8336"),y=a("cc20"),C=a("62ad"),S=a("2b5d"),$=a("a523"),T=a("2e4b"),j=a("67b6"),E=a("43a6"),Y=a("0fd9"),V=a("b974"),K=a("71a3"),D=a("c671"),I=a("fe57"),M=a("aac8"),P=a("9a96"),N=a("8654"),O=a("c964"),R=Object(f["a"])(v,i,s,!1,null,null,null);e["default"]=R.exports;b()(R,{VAlert:k["a"],VAvatar:w["a"],VBtn:x["a"],VChip:y["a"],VCol:C["a"],VCombobox:S["a"],VContainer:$["a"],VDatePicker:T["a"],VRadio:j["a"],VRadioGroup:E["a"],VRow:Y["a"],VSelect:V["a"],VTab:K["a"],VTabItem:D["a"],VTabs:I["a"],VTabsItems:M["a"],VTabsSlider:P["a"],VTextField:N["a"],VTimePicker:O["a"]})}}]);
//# sourceMappingURL=about~01425cc1.b82300cc.js.map