(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about~33d48c78"],{"02b6":function(t,e,a){},"09e0":function(t,e,a){},"2b56":function(t,e,a){"use strict";a("09e0")},3530:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#overview"}},[t._v("Yleisnäkymä")]),a("v-tab",{attrs:{href:"#users"}},[t._v("Käyttäjät")]),a("v-tab",{attrs:{href:"#competitions"}},[t._v("Kilpailut")]),a("v-tab",{attrs:{href:"#feedback"}},[t._v("Saatu palaute")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(0, 0, 0, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"overview"}},[a("v-row",[a("v-col",[a("v-row",[t.prevRoute?a("v-col",[t.prevRoute.name?a("v-btn",{attrs:{large:"",rounded:"",color:"yellow"},on:{click:function(e){return t.$router.push({path:t.prevRoute.path})}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Palaa takaisin")],1):t._e()],1):t._e()],1),a("v-row",[a("v-col",[a("h1",[t._v("Yleistietoja")])])],1),t.loading?a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ladataan palautteita... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-card",{attrs:{elevation:"20",dark:t.$store.getters.getTheme}},[t.feedback.length?a("p",{staticClass:"flow-text"},[a("v-icon",[t._v("mdi-message-alert")]),t._v(" Palautetta annettu: "+t._s(t.feedback.length)+" kpl ")],1):a("p",{staticClass:"flow-text"},[a("v-icon",[t._v("mdi-message-alert")]),t._v(" Ei palautetta! ")],1)])],1)],1),t.loading_users?a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ladataan käyttäjiä... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-card",{attrs:{elevation:"20",dark:t.$store.getters.getTheme}},[t.users.length?a("p",{staticClass:"flow-text"},[a("v-icon",[t._v("mdi-account-circle")]),t._v(" Käyttäjiä yhteensä: "+t._s(t.users.length)+" kpl ")],1):a("p",{staticClass:"flow-text"},[a("v-icon",[t._v("mdi-account-circle")]),t._v(" Ei käyttäjiä! ")],1)])],1)],1),t.loading_competitions?a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ladataan kilpailuja... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-card",{attrs:{elevation:"20",dark:t.$store.getters.getTheme}},[t.all_competitions.length?a("p",{staticClass:"flow-text"},[a("v-icon",[t._v("mdi-ferry")]),t._v(" Kilpailuja yhteensä: "+t._s(t.all_competitions.length)+" kpl"),a("br"),t._v("---\x3e Itse luotuja "+t._s(t.competitions.length)+"/"+t._s(t.all_competitions.length)+" kpl ")],1):a("p",{staticClass:"flow-text"},[a("v-icon",[t._v("mdi-ferry")]),t._v(" Ei kilpailuja! ")],1)])],1)],1),t.loading_cups?a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ladataan Cuppeja... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-card",{attrs:{elevation:"20",dark:t.$store.getters.getTheme}},[t.all_cups.length?a("p",{staticClass:"flow-text"},[a("v-icon",{attrs:{color:"yellow darken-1"}},[t._v("mdi-medal")]),t._v(" Cuppeja yhteensä: "+t._s(t.all_cups.length)+" kpl"),a("br"),t._v("---\x3e Itse luotuja "+t._s(t.cups.length)+"/"+t._s(t.all_cups.length)+" kpl ")],1):a("p",{staticClass:"flow-text"},[a("v-icon",[t._v("mdi-ferry")]),t._v(" Ei cuppeja! ")],1)])],1)],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"users"}},[a("v-row",[a("v-col",[a("v-row",[t.prevRoute?a("v-col",[t.prevRoute.name?a("v-btn",{attrs:{large:"",rounded:"",color:"yellow"},on:{click:function(e){return t.$router.push({path:t.prevRoute.path})}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Palaa takaisin")],1):t._e()],1):t._e()],1),a("v-row",[a("v-col",[a("h1",[t._v("Käyttäjät")]),a("br"),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" *Klikkaa nimeä saadaksesi lisätietoa ")])])],1),t.users.length?a("v-row",[a("v-col",{class:{"grey darken-4":t.$store.getters.getTheme},attrs:{md:"6","offset-md":"3"}},[a("v-data-iterator",{staticClass:"scroll_table",attrs:{items:t.users,search:t.search,"hide-default-footer":""},scopedSlots:t._u([{key:"header",fn:function(){return[a("v-toolbar",{staticClass:"mb-1",attrs:{dark:t.$store.getters.getTheme}},[a("v-text-field",{attrs:{clearable:"",flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"search",label:"Etsi"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"default",fn:function(e){return t._l(e.items,(function(e,i){return a("v-col",{key:i,staticStyle:{"margin-top":"20px"}},[a("v-menu",{attrs:{bottom:"",right:"",transition:"scale-transition",origin:"top left","close-on-click":!1},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("v-chip",t._g({attrs:{dark:t.$store.getters.getTheme,outlined:t.$store.getters.getTheme,large:"",color:e.is_admin?"yellow darken-2":"green"}},n),[a("v-avatar",{attrs:{left:""}},[e.is_admin?a("v-icon",[t._v("mdi-shield-crown")]):a("v-icon",[t._v("mdi-account")])],1),t._v(" "+t._s(e.name)+" ")],1)]}}],null,!0),model:{value:e.menu,callback:function(a){t.$set(e,"menu",a)},expression:"user.menu"}},[a("v-card",{attrs:{width:"300"}},[a("v-list",{attrs:{dark:""}},[a("v-list-item",[a("v-list-item-avatar",[e.is_admin?a("v-icon",[t._v("mdi-shield-crown")]):a("v-icon",[t._v("mdi-account")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-list-item-subtitle",[t._v(t._s(e.email))])],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.menu=!1}}},[a("v-icon",[t._v("mdi-close-circle")])],1)],1)],1)],1),a("v-list",[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,s=i.attrs;return[a("v-list-item",t._g(t._b({on:{click:function(a){return t.copyToClipboard(e._id,e)}}},"v-list-item",s,!1),n),[a("v-list-item-action",[a("v-icon",[t._v("mdi-badge-account-horizontal")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e._id))]),a("v-list-item-subtitle",[t._v("Id")])],1)],1)]}}],null,!0)},[a("span",[t._v("Kopioi")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,s=i.attrs;return[a("v-list-item",t._g(t._b({on:{click:function(a){return t.copyToClipboard(e.createdAt,e)}}},"v-list-item",s,!1),n),[a("v-list-item-action",[a("v-icon",[t._v("mdi-calendar-check")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.createdAt))]),a("v-list-item-subtitle",[t._v("Tili luotu")])],1)],1)]}}],null,!0)},[a("span",[t._v("Kopioi")])]),e.is_admin?a("v-list-item",{on:{click:function(){}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-briefcase")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Admin")]),a("v-list-item-subtitle",[t._v("Rooli")])],1)],1):a("v-list-item",{on:{click:function(){}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-briefcase")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Käyttäjä")]),a("v-list-item-subtitle",[t._v("Rooli")])],1)],1),a("v-list-item",{on:{click:function(){}}},[a("v-list-item-content",[a("v-btn",{attrs:{color:"blue"},on:{click:function(a){t.copyToClipboard(JSON.stringify(e),e)}}},[a("v-icon",[t._v("mdi-copy-content")]),t._v(" Kopio koko objekti ")],1)],1)],1)],1)],1)],1),a("v-divider",{staticStyle:{"margin-top":"10px"}})],1)}))}}],null,!1,1082671211)})],1)],1):t.loading_users?a("v-row",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-sheet",{staticClass:"px-3 pt-3 pb-3",attrs:{color:"grey "+(t.$store.getters.getTheme?"darken-2":"lighten-4")}},[a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card"}})],1)],1)],1):a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei käyttäjiä! ")])])],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"competitions"}},[a("v-row",[a("v-col",[a("v-row",[t.prevRoute?a("v-col",[t.prevRoute.name?a("v-btn",{attrs:{large:"",rounded:"",color:"yellow"},on:{click:function(e){return t.$router.push({path:t.prevRoute.path})}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Palaa takaisin")],1):t._e()],1):t._e()],1),a("v-row",[a("v-col",[a("h1",[t._v("Kilpailut")])])],1),t.all_competitions.length?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Kilpailut")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailua","single-line":"","hide-details":""},model:{value:t.search_comp,callback:function(e){t.search_comp=e},expression:"search_comp"}})],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.headers,items:t.all_competitions,search:t.search_comp,loading:t.loading_competitions},scopedSlots:t._u([{key:"item.start_date",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:"primary darken-2"}},[t._v(t._s(i.start_date.format("DD.MM.YYYY")))])]}},{key:"item.cup_points_multiplier",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:t.getColor(i.cup_points_multiplier),outlined:t.$store.getters.getTheme}},[t._v(t._s(i.cup_points_multiplier)+"x")])]}},{key:"item.choose",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary"},on:{click:function(e){return t.pickCompetition(i)}}},"v-btn",s,!1),n),[a("v-icon",{attrs:{color:"black"}},[t._v("mdi-arrow-right-bold-box-outline")])],1)]}}],null,!0)},[a("span",[t._v("Siirry kilpailuun")])])]}},{key:"item.delete",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"red",loading:t.loading_competitions},on:{click:function(e){return t.deleteCompetition(i._id,!1)}}},"v-btn",s,!1),n),[a("v-icon",[t._v("mdi-delete-outline")])],1)]}}],null,!0)},[a("span",[t._v("Poista kilpailu")])])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading_competitions?a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-sheet",{staticClass:"px-3 pt-3 pb-3",attrs:{color:"grey "+(t.$store.getters.getTheme?"darken-2":"lighten-4")}},[a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card"}})],1)],1):a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei Kilpailuja! ")])])],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"feedback"}},[a("v-row",[a("v-col",[a("v-row",[t.prevRoute?a("v-col",[t.prevRoute.name?a("v-btn",{attrs:{large:"",rounded:"",color:"yellow"},on:{click:function(e){return t.$router.push({path:t.prevRoute.path})}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Palaa takaisin")],1):t._e()],1):t._e()],1),a("v-row",[a("v-col",[a("h1",[t._v("Saatu Palaute")])])],1),t.feedback.length?a("v-row",[a("v-col",[a("ul",{attrs:{id:"fish_weights"}},t._l(t.feedback,(function(e,i){return a("li",{key:i},[a("v-card",{staticClass:"mx-auto",staticStyle:{"margin-bottom":"30px","margin-top":"30px"},attrs:{dark:t.$store.getters.getTheme,"min-width":"200px","max-width":"850px"}},[a("v-card-title",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("span",{staticClass:"title font-weight-light"},[t._v("#"+t._s(i+1)+" "+t._s(e.type))])])],1),a("v-card-text",{staticClass:"headline font-weight-bold",staticStyle:{"word-break":"break-all"}},[t._v(" "+t._s(e.message)+" ")]),a("v-card-actions",[a("v-col",[a("v-btn",{staticClass:"black--text",attrs:{large:"",rounded:"",color:"yellow",loading:t.loading},on:{click:function(a){return t.deleteFeedback(e._id)}}},[a("v-icon",[t._v("mdi-check-outline")]),t._v("Ratkaise")],1)],1)],1)],1)],1)})),0)])],1):a("v-row",[t.loading?a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-sheet",{staticClass:"px-3 pt-3 pb-3",attrs:{color:"grey "+(t.$store.getters.getTheme?"darken-2":"lighten-4")}},[a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"card"}})],1)],1):a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Palautetta ei vielä annettu! ")])])],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},n=[],s=a("1da1"),r=(a("96cf"),a("d3b7"),a("159b"),a("b0c0"),a("7db0"),a("99af"),a("4de4"),a("4e827"),a("e9c4"),a("c740"),a("a434"),a("8ef5")),o=a("7149"),l=a("3faa"),c=a("51dd"),u=a("a822"),p={data:function(){return{tab:null,feedback:[],users:[],all_competitions:[],competitions:[],user_id:null,loading:!1,loading_users:!1,loading_competitions:!1,loading_cups:!1,all_cups:[],cups:[],cup:{},signees_amount:30,team_competition:"Ei",number_rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],headers:[{text:"Kilpailun Päivämäärä",value:"start_date"},{text:"Nimi",value:"name"},{text:"Käyttäjä",value:"username"},{text:"Cup",value:"cup_name"},{text:"Pistekerroin",value:"cup_points_multiplier"},{text:"Valitse",value:"choose",sortable:!1},{text:"Poista",value:"delete",sortable:!1}],search_comp:"",search:"",prevRoute:null,snackbar:!1,text:"",timeout:5e3}},beforeRouteEnter:function(t,e,a){a((function(t){t.prevRoute=e}))},components:{ProgressBarQuery:u["default"]},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return location.href="#",location.href="#app",t.loading=t.loading_users=t.loading_competitions=t.loading_cups=!0,a=JSON.parse(localStorage.getItem("user")),a&&(t.user_id=a["_id"]),e.prev=5,e.next=8,l["a"].getUsers().then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].getFeedback();case 2:return t.feedback=e.sent,t.loading=!1,t.users=a,t.users.forEach((function(t){t.menu=!1})),t.loading_users=!1,e.next=9,o["a"].getCompetitions();case 9:t.all_competitions=e.sent,t.all_competitions.forEach((function(e){e.username=t.users.find((function(t){return t._id===e.user_id})).name,e.start_date=t.$moment(e.start_date),e.end_date=t.$moment(e.end_date),e.cup_name="".concat(e.cup_name," (").concat(e.start_date.format("YYYY"),")")})),t.competitions=t.all_competitions.filter((function(e){return e.user_id===t.user_id})),t.all_competitions.sort((function(t,e){return e.start_date.isAfter(t.start_date)})),t.getCups(),t.loading_competitions=!1;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(401!==a.response.status){e.next=7;break}return t.text="Token expired! Kirjaudu sisään uudelleen",t.snackbar=!0,e.next=5,l["a"].logoutUser().then((function(){t.$router.push({path:"/login"})})).catch((function(t){console.log(t)}));case 5:e.next=8;break;case 7:console.log(a.response.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](5),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})))()},methods:{getColor:function(t){return t>1?"red":1===t?"green":"grey"},fallbackCopyToClipboard:function(t){var e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{var a=document.execCommand("copy"),i=a?"successful":"unsuccessful";console.log("Fallback: text to copy: "+i)}catch(n){console.error("Fallback: unable to copy:",n)}document.body.removeChild(e)},copyToClipboard:function(t,e){var a=this;navigator.clipboard?(navigator.clipboard.writeText(t).then((function(){a.text='"'.concat(t,'" kopioitu leikepöydälle'),a.snackbar=!0}),(function(t){console.log(t),a.text="Kopiointi ei onnistunut jostain syystä...",a.snackbar=!0})),e.menu=!1):this.fallbackCopyToClipboard(t)},getCups:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.user_id){e.next=14;break}return t.loading_cups=!0,e.prev=2,e.next=5,c["a"].getCups();case 5:t.all_cups=e.sent,t.all_cups.length&&(t.all_cups.sort((function(t,e){return t.name-e.name})),t.all_cups.forEach((function(t){t.select="".concat(t.name," (").concat(t.year,")")})),t.cups=t.all_cups.filter((function(e){return e.user_id===t.user_id})),t.cup=t.cups[t.cups.length-1]),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),t.error=e.t0.message;case 12:e.next=15;break;case 14:console.error("No user found in localstorage!");case 15:t.loading_cups=!1;case 16:case"end":return e.stop()}}),e,null,[[2,9]])})))()},deleteFeedback:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,r["a"].deleteFeedback(t);case 4:return e.text="Palaute ratkaistu!",e.snackbar=!0,a.next=8,r["a"].getFeedback();case 8:e.feedback=a.sent,e.loading=!1,a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](1),console.error(a.t0.message);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))()},pickCompetition:function(t){this.$store.state.competition=t,localStorage.setItem("competition",JSON.stringify({id:t._id,start_date:t.start_date,end_date:t.end_date})),this.$router.push({path:"/overview"})},deleteCompetition:function(t,e){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=17;break}return a.text="Poistetaan tietokannasta!",a.snackbar=!0,a.loading_competitions=!0,i.prev=4,i.next=7,o["a"].deleteCompetition(t);case 7:n=a.all_competitions.findIndex((function(e){return e._id===t})),n>-1&&a.all_competitions.splice(n,1),a.loading_competitions=!1,i.next=15;break;case 12:i.prev=12,i.t0=i["catch"](4),console.error(i.t0.message);case 15:i.next=18;break;case 17:a.$confirm("Oletko varma?","Poista kilpailu","question").then((function(e){e&&a.deleteCompetition(t,e)})).catch((function(t){t&&console.error(t)}));case 18:case"end":return i.stop()}}),i,null,[[4,12]])})))()}}},m=p,d=(a("e5a0"),a("2877")),v=a("6544"),_=a.n(v),h=a("8212"),g=a("8336"),f=a("b0af"),b=a("99d9"),k=a("cc20"),w=a("62ad"),x=a("a523"),y=a("c377"),C=a("8fea"),$=a("ce7e"),T=a("132d"),S=a("8860"),V=a("da13"),P=a("1800"),j=a("8270"),K=a("5d23"),R=a("e449"),I=a("0fd9"),E=a("8dd9"),O=a("3129"),Y=a("2db4"),D=a("2fa4"),L=a("71a3"),F=a("c671"),N=a("fe57"),M=a("aac8"),A=a("9a96"),B=a("8654"),J=a("71d9"),z=a("3a2f"),H=Object(d["a"])(m,i,n,!1,null,"4f7df90e",null);e["default"]=H.exports;_()(H,{VAvatar:h["a"],VBtn:g["a"],VCard:f["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VChip:k["a"],VCol:w["a"],VContainer:x["a"],VDataIterator:y["a"],VDataTable:C["a"],VDivider:$["a"],VIcon:T["a"],VList:S["a"],VListItem:V["a"],VListItemAction:P["a"],VListItemAvatar:j["a"],VListItemContent:K["a"],VListItemSubtitle:K["b"],VListItemTitle:K["c"],VMenu:R["a"],VRow:I["a"],VSheet:E["a"],VSkeletonLoader:O["a"],VSnackbar:Y["a"],VSpacer:D["a"],VTab:L["a"],VTabItem:F["a"],VTabs:N["a"],VTabsItems:M["a"],VTabsSlider:A["a"],VTextField:B["a"],VToolbar:J["a"],VTooltip:z["a"]})},"3bb8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[a("v-card",{staticStyle:{background:"transparent",padding:"20px"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[t.errors.length?a("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),a("v-list",t._l(t.errors,(function(e,i){return a("v-list-item",{key:i},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#competitions"}},[t._v("Kilpailut")]),a("v-tab",{attrs:{href:"#cups"}},[t._v("Cupit")])],1),a("v-tabs-items",{staticStyle:{background:"transparent"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{attrs:{value:"competitions"}},[a("v-row",[a("v-col",[a("h1",[t._v("Kilpailut")])])],1),a("v-row",[a("v-col",[t.competitions.length?a("div",{staticClass:"scroll_table"},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Kilpailut")]),a("v-spacer"),a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,"append-icon":"mdi-magnify",label:"Hae kilpailua","single-line":"","hide-details":""},model:{value:t.search_comp,callback:function(e){t.search_comp=e},expression:"search_comp"}})],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.headers,items:t.competitions,search:t.search_comp},scopedSlots:t._u([{key:"item.start_date",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:"primary darken-2"}},[t._v(t._s(i.start_date.format("DD.MM.YYYY")))])]}},{key:"item.cup_name",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.cup_name)+" ("+t._s(i.start_date.format("YYYY"))+")")])]}},{key:"item.cup_points_multiplier",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:t.getColor(i.cup_points_multiplier),outlined:t.$store.getters.getTheme}},[t._v(t._s(i.cup_points_multiplier)+"x")])]}},{key:"item.choose",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary"},on:{click:function(e){return t.pickCompetition(i)}}},"v-btn",s,!1),n),[a("v-icon",{attrs:{color:"black"}},[t._v("mdi-arrow-right-bold-box-outline")])],1)]}}],null,!0)},[a("span",[t._v("Siirry kilpailuun")])])]}}],null,!0)})],1)],1):a("div",[t.loading?t.error?a("v-col",[a("h2",{staticClass:"error"},[t._v(t._s(t.error))])]):a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ladataan kilpailuja... ")]),a("ProgressBarQuery")],1):a("v-col",[a("v-row",[t.cups.length?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei kilpailuja! ")]),a("router-link",{attrs:{to:"/register-comp"}},[a("v-btn",{attrs:{tile:"",color:"blue lighten-1"}},[a("v-icon",[t._v("mdi-plus-cicle")]),t._v("Luo kilpailu!")],1)],1)],1):a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei kilpailuja! ")]),a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Luo Cup ensin ")]),a("v-btn",{attrs:{tile:"",color:"blue lighten-1"},on:{click:function(e){t.tab="create"}}},[a("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo Cup!")],1)],1)],1)],1)],1),t.competitions.length?a("v-col",{staticStyle:{"margin-top":"20px"}},[a("router-link",{attrs:{to:"/register-comp"}},[a("v-btn",{attrs:{tile:"",color:"white",outlined:"",large:""}},[a("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo uusi kilpailu!")],1)],1)],1):t._e()],1)],1)],1),a("v-tab-item",{attrs:{value:"cups"}},[a("v-row",[a("v-col",[a("h1",[t._v("Cupit")])])],1),a("v-row",[a("v-col",[t.cups.length?a("div",{staticClass:"scroll_table"},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Cupit")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae cuppia","single-line":"","hide-details":""},model:{value:t.search_cup,callback:function(e){t.search_cup=e},expression:"search_cup"}})],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.headers_cup,items:t.cups,search:t.search_cup,loading:t.publishing},scopedSlots:t._u([{key:"item.name",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:"primary darken-3"}},[t._v(t._s(i.name))])]}},{key:"item.year",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:"grey",outlined:t.$store.getters.getTheme}},[t._v(t._s(i.year))])]}},{key:"item.isPublic",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-chip",t._g(t._b({attrs:{outlined:t.$store.getters.getTheme,color:i.isPublic?"green darken-2":"red darken-2",disabled:t.publishing},on:{click:function(e){return t.publishCup(i)}}},"v-chip",s,!1),n),[t._v(t._s(i.isPublic?"Julkinen":"Salainen"))])]}}],null,!0)},[a("span",[t._v("Muuta tila painamalla")])])]}},{key:"item.choose",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary"},on:{click:function(e){return t.pickCup(i)}}},"v-btn",s,!1),n),[a("v-icon",{attrs:{color:"black"}},[t._v("mdi-arrow-right-bold-box-outline")])],1)]}}],null,!0)},[a("span",[t._v("Siirry Cuppiin")])])]}}],null,!0)})],1)],1):a("v-row",[t.error?a("v-col",{staticClass:"error"},[a("h2",[t._v(t._s(t.error))])]):a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ladataan Cuppeja... ")]),a("ProgressBarQuery")],1)],1)],1)],1),a("v-row",{staticStyle:{"margin-bottom":"20px"}},[a("v-col",[a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{width:"700"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{tile:"",color:"white",outlined:"",large:"",disabled:t.loading}},"v-btn",n,!1),i),[a("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo uusi cup! ")],1)]}}]),model:{value:t.createCupDialog,callback:function(e){t.createCupDialog=e},expression:"createCupDialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v(" Luo Cup ")]),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Cupin nimi",maxlength:40,loading:t.loading,counter:40},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"6","offset-md":"3"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{dark:t.$store.getters.getTheme,label:"Vuosi","prepend-icon":"event",readonly:""},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}},"v-text-field",n,!1),i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{ref:"picker",attrs:{min:"2000-01-01",reactive:"","no-title":""},on:{input:t.saveYear},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1)],1)],1),a("v-row",[a("v-col",[a("v-btn",{attrs:{tile:"",color:"primary",loading:t.loading},on:{click:t.saveCup}},[a("v-icon",[t._v("mdi-check")]),t._v("Luo Cup")],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.createCupDialog=!1}}},[t._v(" Peruuta ")])],1)],1)],1)],1)])],1)],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)],1)},n=[],s=a("1da1"),r=(a("96cf"),a("d3b7"),a("159b"),a("4e827"),a("e9c4"),a("ac1f"),a("1276"),a("b0c0"),a("a822")),o=a("7149"),l=a("51dd"),c={name:"ContinueComp",data:function(){return{tab:null,competitions:[],headers:[{text:"Kilpailun Päivämäärä",value:"start_date"},{text:"Nimi",value:"name"},{text:"Cup",value:"cup_name"},{text:"Pistekerroin",value:"cup_points_multiplier"},{text:"Valitse",value:"choose",sortable:!1}],headers_cup:[{text:"Nimi",value:"name"},{text:"Vuosi",value:"year"},{text:"Julkisuus",value:"isPublic"},{text:"Valitse",value:"choose",sortable:!1}],error:"",competition_input:null,loading:!1,publishing:!1,cups:[],name:null,year:null,menu:!1,errors:[],search_comp:"",search_cup:"",snackbar:!1,text:"",timeout:5e3,createCupDialog:!1}},watch:{menu:function(t){var e=this;t&&this.$nextTick((function(){return e.$refs.picker.activePicker="YEAR"}))}},components:{ProgressBarQuery:r["default"]},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=JSON.parse(localStorage.getItem("user")),i=a["_id"],n={user_id:i},e.next=6,o["a"].getCompetitions(n).then((function(e){t.competitions=e,t.competitions.forEach((function(e){e.start_date=t.$moment(e.start_date),e.end_date=t.$moment(e.end_date)})),t.competitions.sort((function(t,e){return e.start_date.isAfter(t.start_date)}))})).catch((function(e){return e.response?(e.response.status,t.loading=!1,console.log(e)):console.log(e)}));case 6:return e.next=8,l["a"].getCups({user_id:i}).then((function(e){t.cups=e,t.cups.sort((function(e,a){return t.$moment(a.year).isAfter(t.$moment(e.year))}))})).catch((function(e){return e.response?400===e.response.status?(console.log(e),t.showError("Bad request!")):408===e.response.status?t.showError("Yhteyttä tietokantaan ei saatu... Yritä uudelleen päivittämällä sivu (Connection timed out)"):console.log(e):console.log(e)}));case 8:t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()},mounted:function(){this.$route.query.tab&&(this.tab=this.$route.query.tab),location.href="#",location.href="#app"},methods:{getColor:function(t){return t>1?"red":1===t?"green":"grey"},publishCup:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isPublic=!t.isPublic,a.prev=1,e.publishing=!0,i={$set:{isPublic:t.isPublic}},a.next=6,l["a"].updateValues(t.id,i);case 6:a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error(a.t0.message);case 11:e.publishing=!1;case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},showError:function(t){this.errors.push(t),location.href="#",location.href="#app"},pickCompetition:function(t){this.$store.state.competition=t,localStorage.setItem("competition",JSON.stringify({id:t._id,start_date:t.start_date,end_date:t.end_date})),this.$router.push({path:"/overview"})},pickCup:function(t){localStorage.setItem("cup",t.id),this.$router.push({path:"/cup-overview"})},saveYear:function(t){t=t.split("-")[0],this.year=t,this.$refs.picker.activePicker="YEAR",this.menu=!1},saveCup:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.errors=[],t.loading=!0,t.name||t.showError("Syötä Cupille nimi!"),t.year||t.showError("Valitse Cupille vuosi!"),t.errors.length){e.next=25;break}return a=JSON.parse(localStorage.getItem("user")),i=a["_id"],n={user_id:i,name:t.name,year:t.year},e.prev=8,e.next=11,l["a"].insertCup(n);case 11:return t.text="Cup lisätty tietokantaan!",t.snackbar=!0,e.next=15,l["a"].getCups({user_id:i});case 15:t.cups=e.sent,t.loading=!1,t.year=null,t.name=null,t.tab="cups",e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),t.errors.push(e.t0.message);case 25:t.loading=!1,t.createCupDialog=!1;case 27:case"end":return e.stop()}}),e,null,[[8,22]])})))()}}},u=c,p=a("2877"),m=a("6544"),d=a.n(m),v=a("0798"),_=a("8336"),h=a("b0af"),g=a("99d9"),f=a("cc20"),b=a("62ad"),k=a("a523"),w=a("8fea"),x=a("2e4b"),y=a("169a"),C=a("132d"),$=a("8860"),T=a("da13"),S=a("5d23"),V=a("34c3"),P=a("e449"),j=a("0fd9"),K=a("2db4"),R=a("2fa4"),I=a("71a3"),E=a("c671"),O=a("fe57"),Y=a("aac8"),D=a("9a96"),L=a("8654"),F=a("3a2f"),N=Object(p["a"])(u,i,n,!1,null,null,null);e["default"]=N.exports;d()(N,{VAlert:v["a"],VBtn:_["a"],VCard:h["a"],VCardActions:g["a"],VCardTitle:g["c"],VChip:f["a"],VCol:b["a"],VContainer:k["a"],VDataTable:w["a"],VDatePicker:x["a"],VDialog:y["a"],VIcon:C["a"],VList:$["a"],VListItem:T["a"],VListItemContent:S["a"],VListItemIcon:V["a"],VListItemTitle:S["c"],VMenu:P["a"],VRow:j["a"],VSnackbar:K["a"],VSpacer:R["a"],VTab:I["a"],VTabItem:E["a"],VTabs:O["a"],VTabsItems:Y["a"],VTabsSlider:D["a"],VTextField:L["a"],VTooltip:F["a"]})},"6e7a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[a("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",[t.error?a("v-row",[t._v(" "+t._s(t.error)+" ")]):t._e(),a("v-row",{staticStyle:{margin:"20px"},attrs:{id:"send-feedback"}},[t.prevRoute?a("v-col",[t.prevRoute.name?a("v-btn",{attrs:{large:"",rounded:"",outlined:"",color:"yellow"},on:{click:function(e){return t.$router.push({path:t.prevRoute.path})}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Palaa takaisin")],1):t._e()],1):t._e()],1),a("h1",[t._v("Lähetä palautetta")]),a("p",{staticClass:"flow-text title black-text"},[t._v(" Ilmoita bugeista, kehitysehdotuksista jne jne. ")]),a("v-row",[a("v-col",{staticClass:"d-flex",attrs:{md:"4","offset-md":"4"}},[a("v-select",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,"item-color":"blue",items:t.type_options,label:"Palautteen tyyppi",outlined:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)],1),a("v-row",[a("v-col",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{md:"8","offset-md":"2"}},[a("v-textarea",{attrs:{dark:t.$store.getters.getTheme,name:"input-7-1",filled:"",label:"Palaute tähän","auto-grow":"",value:t.message,maxlength:"800"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)],1),a("v-row",{staticStyle:{margin:"20px"}},[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-btn",{attrs:{block:"",large:"",outlined:"",color:"white",loading:t.loading},on:{click:t.sendFeedback}},[a("v-icon",[t._v("mdi-send")]),t._v("Lähetä palaute")],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)],1)},n=[],s=a("1da1"),r=(a("96cf"),a("8ef5")),o={name:"Feedback",components:{},data:function(){return{prevRoute:null,message:null,type:"Bugi",type_options:["Bugi","Ehdotus","Muu"],loading:!1,error:null,snackbar:!1,text:"",timeout:5e3}},beforeRouteEnter:function(t,e,a){a((function(t){t.prevRoute=e}))},mounted:function(){location.href="#",location.href="#app"},methods:{sendFeedback:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.type||(t.type="-"),!t.message){e.next=23;break}if(!(t.message.length>=5)){e.next=19;break}return a={type:t.type,message:t.message},t.loading=!0,e.prev=5,e.next=8,r["a"].insertFeedback(a);case 8:t.text="Palaute vastaanotettu!",t.snackbar=!0,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](5),console.error(e.t0.message);case 15:t.loading=!1,t.message=null,e.next=21;break;case 19:t.text="Kirjoita vähintään 5 merkkiä pitkä palaute!",t.snackbar=!0;case 21:e.next=25;break;case 23:t.text="Kirjoita vähintään 5 merkkiä pitkä palaute!",t.snackbar=!0;case 25:case"end":return e.stop()}}),e,null,[[5,12]])})))()}}},l=o,c=a("2877"),u=a("6544"),p=a.n(u),m=a("8336"),d=a("b0af"),v=a("62ad"),_=a("a523"),h=a("132d"),g=a("0fd9"),f=a("b974"),b=a("2db4"),k=a("a844"),w=Object(c["a"])(l,i,n,!1,null,null,null);e["default"]=w.exports;p()(w,{VBtn:m["a"],VCard:d["a"],VCol:v["a"],VContainer:_["a"],VIcon:h["a"],VRow:g["a"],VSelect:f["a"],VSnackbar:b["a"],VTextarea:k["a"]})},7277:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[a("v-card",{staticStyle:{background:"transparent",padding:"20px"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",[a("v-row",[a("v-col",[a("h1",[t._v("Dashboard")])])],1),a("v-row",[a("v-col",[t.user?a("div",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v(t._s(t.user.name))])]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v(t._s(t.user.email))])]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Tili luotu: "+t._s(t.created))])])]):t._e(),a("v-divider"),a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("router-link",{attrs:{to:"/register-comp"}},[a("v-btn",{attrs:{large:"",tile:"",outlined:"",color:"blue lighten-1"}},[a("v-icon",[t._v("mdi-plus-circle")]),t._v("Uusi kilpailu")],1)],1)],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"6"}},[a("router-link",{attrs:{to:"/continue"}},[a("v-btn",{attrs:{large:"",tile:"",outlined:"",color:"green lighten-1"}},[a("v-icon",[t._v("mdi-play-circle")]),t._v("Jatka kilpailua")],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},n=[],s=(a("99af"),{name:"Home",components:{},data:function(){return{user:null,created:null}},mounted:function(){if(this.$store.commit("refreshCompetition",null),localStorage.removeItem("competition"),this.$store.commit("refreshCup",null),localStorage.removeItem("cup"),null!=localStorage.getItem("user")){this.user=JSON.parse(localStorage.getItem("user"));var t=this.$moment(this.user.createdAt);this.created="".concat(t.date(),".").concat(t.month()+1,".").concat(t.year())}location.href="#",location.href="#app"},methods:{}}),r=s,o=(a("2b56"),a("2877")),l=a("6544"),c=a.n(l),u=a("8336"),p=a("b0af"),m=a("62ad"),d=a("a523"),v=a("ce7e"),_=a("132d"),h=a("0fd9"),g=Object(o["a"])(r,i,n,!1,null,null,null);e["default"]=g.exports;c()(g,{VBtn:u["a"],VCard:p["a"],VCol:m["a"],VContainer:d["a"],VDivider:v["a"],VIcon:_["a"],VRow:h["a"]})},9984:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",[a("CompetitionNavigation")],1),a("v-col",[a("Timedate")],1)],1),a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[a("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[a("v-row",{attrs:{align:"center"}},[a("v-col",[a("h1",{staticStyle:{margin:"30px"}},[t._v("Kilpailun määritykset")])])],1)],1),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#show-settings"}},[t._v("Määritykset")]),a("v-tab",{attrs:{href:"#change-settings",disabled:t.loading}},[t._v("Muuta määrityksiä")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(0, 0, 0, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{attrs:{value:"show-settings"}},[!t.loading&&t.competition?a("v-row",{attrs:{id:"settings-info"}},[a("v-col",[a("v-row",{staticStyle:{"margin-top":"20px"}},[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v("Perustiedot")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-ferry")])],1),a("v-list-item-title",[t._v("Kilpailu")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.competition.name)+" ("+t._s(t.competition.locality)+")")])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"yellow darken-4"}},[t._v("mdi-trophy")])],1),a("v-list-item-title",[t._v("Cup")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.competition.cup_name))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-calendar-arrow-right")])],1),a("v-list-item-title",[t._v("Aloituspäivä")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.formatted_start_date))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-calendar-multiple-check")])],1),a("v-list-item-title",[t._v("Lopetuspäivä")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.formatted_end_date))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-calendar-clock")])],1),a("v-list-item-title",[t._v("Kilpailuaika")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(" "+t._s(t.competition.start_time)+" - "+t._s(t.competition.end_time))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"green"}},[t._v("mdi-clipboard-check")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Kilpailun sijoittumispisteet")]),a("v-list",{staticStyle:{"max-height":"400px","overflow-y":"auto"},attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},t._l(t.placement_points_array,(function(e,i){return a("div",{key:i,staticStyle:{"margin-top":"20px"}},[a("v-list-item",[a("v-row",{attrs:{align:"center"}},[a("v-col",[a("h3",[t._v("#"+t._s(e.placement))])]),a("v-col",[a("p",[t._v(t._s(e.points)+"p")])])],1)],1),a("v-divider")],1)})),0)],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"green darken-2"}},[t._v("mdi-clipboard-check")])],1),a("v-list-item-title",[t._v("Kilpailijoiden Cup osallistumispisteet")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.competition.cup_participation_points))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"green darken-1"}},[t._v("mdi-calculator-variant-outline")])],1),a("v-list-item-title",[t._v("Kilpailun pistekerroin")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v("x "+t._s(t.competition.cup_points_multiplier))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-incognito")])],1),a("v-list-item-title",[t._v("Onko kilpailu julkinen")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[t.competition.isPublic?a("v-icon",{attrs:{color:"green darken-2"}},[t._v("mdi-check-bold")]):a("v-icon",{attrs:{color:"red"}},[t._v("mdi-close")])],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"yellow darken-4"}},[t._v("mdi-trophy-award")])],1),a("v-list-item-title",[t._v("Onko kilpailu päättynyt")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[t.competition.isFinished?a("v-icon",{attrs:{color:"green darken-2"}},[t._v("mdi-check-bold")]):a("v-icon",{attrs:{color:"red"}},[t._v("mdi-close")])],1)],1)],1)],1)],1)],1),a("v-row",{staticClass:"fishes_summary"},[a("v-col",{staticClass:"scroll_table",attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" Kalojen määritykset ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},t._l(t.fish_specs,(function(e,i){return a("div",{key:i},[a("v-list-item",[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(" x "+t._s(e.multiplier))])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(e.minsize)+" cm")])])],1),a("v-divider")],1)})),0)],1)],1)],1),t.loading?t._e():a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{staticClass:"white--text",attrs:{large:"",rounded:"",color:t.competition.isPublic?"grey darken-4":"green darken-4",loading:t.updating},on:{click:function(e){return t.publishCompetition(t.competition.isPublic)}}},[t.competition.isPublic?a("div",[a("v-icon",[t._v("mdi-incognito")]),t._v(" Aseta kilpailu salaiseksi ")],1):a("div",[a("v-icon",{attrs:{color:"green"}},[t._v("mdi-publish")]),t._v(" Aseta kilpailu julkiseksi ")],1)])],1),a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{attrs:{large:"",rounded:"",color:t.competition.isFinished?"yellow":"green darken-3",loading:t.updating},on:{click:function(e){return t.endCompetition(t.competition.isFinished)}}},[t.competition.isFinished?a("div",[a("v-icon",{attrs:{color:"red darken-2"}},[t._v("mdi-cancel")]),t._v(" Aseta kilpailu keskeneräiseksi ")],1):a("div",[a("v-icon",{attrs:{color:"yellow"}},[t._v("mdi-trophy")]),t._v(" Aseta kilpailu päättyneeksi ")],1)])],1)],1),a("v-row",{staticStyle:{"margin-bottom":"20px"}},[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"3","offset-md":"4"}},[a("v-btn",{staticClass:"white--text",attrs:{block:"",color:"red darken-4",loading:t.updating},on:{click:function(e){return t.deleteCompetition(t.competition._id,!1)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("mdi-delete-forever")]),t._v(" Poista Kilpailu")],1)],1)],1)],1)],1):a("v-row",[a("v-col",[a("h2",{staticClass:"white--text"},[t._v("Haetaan määrityksiä...")]),a("ProgressBarQuery")],1)],1)],1),a("v-tab-item",{attrs:{value:"change-settings"}},[t.errors.length?a("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),a("v-list",t._l(t.errors,(function(e,i){return a("v-list-item",{key:i},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),a("v-row",[a("v-col",[a("h1",[t._v("Muuta määrityksiä")])])],1),a("v-row",[a("v-col",[a("p",{staticClass:"white--text"},[t._v("Kilpailun perustiedot")]),t.basic_info_validated?a("p",{staticClass:"flow-text yellow lighten-1 center-align"},[t._v(' Tiedot lukittuna, paina "Muuta tietoja" jos haluat varmasti muokata tietoja ')]):t._e()])],1),t.loading?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tietoja... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",{attrs:{cols:"12"}},[t.competition?a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun nimi",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1):t._e(),t.competition?a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Paikkakunta",maxlength:t.max_input,disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:t.locality,callback:function(e){t.locality=e},expression:"locality"}})],1)],1):t._e(),t.loading_cups?a("v-row",[a("v-col",[a("h2",{staticClass:"white--text"},[t._v("Haetaan cuppeja...")]),a("ProgressBarQuery")],1)],1):t._e(),t.cups?t._e():a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Cuppeja ei löytynyt... ")])])],1),t.competition.cup_name?a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[a("v-subheader",{staticClass:"white--text"},[t._v(" Valitse Cup ")]),a("v-select",{attrs:{label:"Valitse Cup",dark:t.$store.getters.getTheme,items:t.cups,"item-text":"select","item-value":"_id",hint:t.cup.name+" ("+t.cup.year+")",disabled:t.basic_info_validated,outlined:"","return-object":"","single-line":""},model:{value:t.cup,callback:function(e){t.cup=e},expression:"cup"}})],1)],1):a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kilpailusta ei löytynyt cuppia... ")])])],1),t.competition?a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"6"}},[a("h2",{staticClass:"white--text"},[t._v("Kilpailun sijoittumispisteet")]),a("v-list",{staticStyle:{"max-height":"400px","overflow-y":"auto"},attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},t._l(t.placement_points_array,(function(e,i){return a("div",{key:i,staticStyle:{"margin-top":"20px"}},[a("v-list-item",[a("v-row",{attrs:{align:"center"}},[a("v-col",[a("h3",[t._v("#"+t._s(e.placement))])]),a("v-col",[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Pisteet",rules:t.number_rules,disabled:t.basic_info_validated||!t.editPoints},on:{blur:t.sortPlacements},model:{value:e.points,callback:function(a){t.$set(e,"points",a)},expression:"p.points"}})],1),t.editPoints?a("v-col",[a("v-btn",{attrs:{color:"red"},on:{click:function(e){return t.removePlacement(i)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1):t._e()],1)],1),a("v-divider")],1)})),0),t.editPoints?a("v-row",[a("v-col",[a("v-btn",{attrs:{color:"green"},on:{click:t.addPlacement}},[a("v-icon",[t._v("mdi-plus")]),t._v("Lisää pistesija")],1)],1)],1):t._e(),a("v-row",[t.editPoints?a("v-col",[a("v-btn",{attrs:{block:"",color:"yellow"},on:{click:t.cancelPoints}},[a("v-icon",[t._v("mdi-cancel")]),t._v("Peruuta")],1)],1):t._e(),a("v-col",[a("v-btn",{attrs:{block:"",color:t.editPoints?"green darken-2":"grey",disabled:t.basic_info_validated},on:{click:t.confirmPoints}},[a("v-icon",[t._v("mdi-check")]),t._v(t._s(t.editPoints?"Valmis":"Muokkaa"))],1)],1)],1)],1),t.editPoints?a("v-col",{attrs:{cols:"2"}},[a("div",{staticStyle:{"margin-top":"200px"}},[a("p",{staticClass:"center-align flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Palauta alkuperäiset pisteet:"),a("br"),t._v("#1 = 30, #2 = 28, #3 = 26... ")]),a("v-btn",{attrs:{color:"red"},on:{click:t.resetPoints}},[t._v("Palauta")])],1)]):t._e()],1):t._e(),t.competition?a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kilpailun cup osallistumispisteet","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_participation_points>=0?t.cup_participation_points++:t.cup_participation_points=1},"click:prepend":function(e){t.cup_participation_points>=1?t.cup_participation_points--:t.cup_participation_points=0},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_participation_points,callback:function(e){t.cup_participation_points=e},expression:"cup_participation_points"}})],1)],1):t._e(),t.competition?a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Cup pistekerroin","append-outer-icon":"add",maxlength:"3","prepend-icon":"remove",counter:3,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(e){t.cup_points_multiplier>=1?t.cup_points_multiplier+=.5:t.cup_points_multiplier=1},"click:prepend":function(e){t.cup_points_multiplier>=1.5?t.cup_points_multiplier-=.5:t.cup_points_multiplier=1},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.cup_points_multiplier,callback:function(e){t.cup_points_multiplier=e},expression:"cup_points_multiplier"}})],1)],1):t._e(),t.competition?a("v-row",{attrs:{justify:"center",align:"center"}},[a("v-col",{staticClass:"input-fields",attrs:{cols:"6"}},[a("span",{staticClass:"white--text"},[t._v("Onko Tiimikilpailua?")]),a("v-row",{attrs:{justify:"center",align:"center"}},[a("v-spacer"),a("v-col",[a("v-radio-group",{attrs:{dark:t.$store.getters.getTheme,row:"",disabled:t.basic_info_validated},model:{value:t.team_competition,callback:function(e){t.team_competition=e},expression:"team_competition"}},[a("v-radio",{attrs:{label:"Kyllä",value:"Kyllä"}}),a("v-radio",{attrs:{label:"Ei",value:"Ei"}})],1)],1),a("v-spacer")],1)],1)],1):t._e(),t.competition?a("v-row",{staticStyle:{padding:"20px","margin-bottom":"50px"},attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"12",xl:"6",l:"6",md:"6",s:"10",xs:"12"}},[a("span",{staticClass:"white--text"},[t._v("Kilpailun Aloituspäivä")]),a("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi","first-day-of-week":"1",disabled:t.basic_info_validated},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1),a("v-col",{attrs:{cols:"12",xl:"6",l:"6",md:"6",s:"10",xs:"12"}},[a("span",{staticClass:"white--text"},[t._v("Kilpailun Lopetuspäivä")]),a("v-date-picker",{staticClass:"mt-4",staticStyle:{height:"480px"},attrs:{dark:t.$store.getters.getTheme,"full-width":"",elevation:"15",locale:"fi","first-day-of-week":"1",disabled:t.basic_info_validated},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1):t._e(),t.competition?a("v-row",{staticStyle:{padding:"20px","margin-bottom":"50px"},attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"12",xl:"6",l:"6",md:"6",s:"10",xs:"12"}},[a("span",{staticClass:"white--text"},[t._v("Kilpailun alkamismisaika")]),a("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1),a("v-col",{attrs:{cols:"12",xl:"6",l:"6",md:"6",s:"10",xs:"12"}},[a("span",{staticClass:"white--text"},[t._v("Kilpailun loppumisaika")]),a("v-time-picker",{attrs:{dark:t.$store.getters.getTheme,format:"24hr","full-width":"",scrollable:"",elevation:"15",disabled:t.basic_info_validated},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}})],1)],1):t._e(),a("v-row",{staticClass:"fishes_summary",attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"12",xl:"8",l:"8",md:"10",s:"10",xs:"12"}},[a("table",{staticClass:"highlight centered responsive-table table_header"},[a("thead",[a("tr",[a("th",[t._v("Kalalaji")]),a("th",[t._v("Pistekerroin")]),a("th",[t._v("Alamitta")]),t.basic_info_validated?t._e():a("th",[t._v("Poista?")])])]),a("draggable",{attrs:{tag:"tbody"},model:{value:t.inputs,callback:function(e){t.inputs=e},expression:"inputs"}},t._l(t.inputs,(function(e,i){return a("tr",{key:i},[a("th",{staticStyle:{border:"1px solid black"},attrs:{scope:"row"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Nimi",disabled:t.basic_info_validated,rules:t.rules,counter:t.max_input},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"input.name"}})],1),a("td",{staticStyle:{border:"1px solid black"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kerroin",maxlength:"4","append-outer-icon":"add","prepend-icon":"remove",counter:3,rules:t.number_rules,disabled:t.basic_info_validated},on:{"click:append-outer":function(t){parseInt(e.multiplier)>=1?e.multiplier+=.5:e.multiplier=1},"click:prepend":function(t){e.multiplier>=1.5?e.multiplier-=.5:e.multiplier=1},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:e.multiplier,callback:function(a){t.$set(e,"multiplier",a)},expression:"input.multiplier"}})],1),a("td",{staticStyle:{border:"1px solid black"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Alamitta (cm)",maxlength:40,disabled:t.basic_info_validated,rules:t.rules,counter:40},model:{value:e.minsize,callback:function(a){t.$set(e,"minsize",a)},expression:"input.minsize"}})],1),t.basic_info_validated?t._e():a("td",{staticStyle:{border:"1px solid black"}},[a("v-btn",{staticClass:"white--text",attrs:{icon:"",color:"red darken-4",disabled:t.basic_info_validated},on:{click:function(a){return t.deleteFish(i,e.original_name,!1)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)])})),0)],1)])],1),t.basic_info_validated?t._e():a("v-row",[a("v-col",[a("b",[a("p",[t._v(" Siirrä taulukon riviä hiirellä muuttaaksesi paikkaa taulukossa ")])])])],1),t.basic_info_validated?t._e():a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{large:"",color:"green darken-4"},on:{click:t.addInput}},[a("v-icon",{attrs:{color:"green lighten-2"}},[t._v("mdi-plus-circle")]),t._v(" Lisää kala")],1)],1)],1),t.basic_info_validated?t._e():a("v-row",{staticStyle:{"margin-bottom":"20px"}},[t.competition?a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",color:"yellow"},on:{click:t.setOriginalValues}},[a("v-icon",{attrs:{color:"red darken-2"}},[t._v("mdi-cancel")]),t._v(" Peruuta muutokset")],1)],1):t._e(),t.competition?a("v-col",{attrs:{md:"6"}},[a("v-btn",{attrs:{large:"",color:"green"},on:{click:t.checkBasicInformation}},[a("v-icon",{attrs:{color:"green darken-4"}},[t._v("mdi-check-outline")]),t._v(" Tallenna muutokset")],1)],1):t._e()],1)],1),t.basic_info_validated?a("v-row",{staticStyle:{"margin-bottom":"20px"}},[a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{attrs:{large:"",tile:"",color:"grey"},on:{click:function(e){t.basic_info_validated=!1}}},[a("v-icon",[t._v("mdi-cog-transfer")]),t._v("Muuta tietoja")],1)],1)],1):t._e()],1)],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)],1)},n=[],s=a("ade3"),r=a("2909"),o=a("1da1"),l=(a("96cf"),a("e9c4"),a("a434"),a("4e827"),a("d3b7"),a("159b"),a("b0c0"),a("99af"),a("7db0"),a("c740"),a("25f0"),a("a9e3"),a("6062"),a("3ca3"),a("ddb0"),a("4de4"),a("7149")),c=a("51dd"),u=a("a822"),p=a("b3a7"),m=a("7ba5"),d=a("5fb0"),v=a("b76a"),_=a.n(v),h={name:"CompSettings",components:{ProgressBarQuery:u["default"],Timedate:p["a"],CompetitionNavigation:m["a"],draggable:_.a},data:function(){var t=this;return{dialog:!1,errors:[],cups:[],cup:{},competition:null,name:null,locality:null,cup_participation_points:null,cup_points_multiplier:null,team_competition:null,fish_specs:null,start_date:null,end_date:null,formatted_start_date:null,formatted_end_date:null,start_time:null,end_time:null,loading:!1,loading_cups:!1,updating:!1,tab:null,basic_info_validated:!0,inputs:[],rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(e){return(e||"").length<=t.max_input||"Enintään 40 merkkiä"}],number_rules:[function(t){return!!t||"Kenttä ei voi jäädä tyhjäksi!"},function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],max_input:40,placement_points_array:[],temp_placement_points_array:[],selectedItem:1,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}],snackbar:!1,text:"",timeout:5e3,editPoints:!1}},created:function(){if(null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition")),e=t["id"];this.refreshCompetition(e)}else console.log("No competition in localstorage!");location.href="#",location.href="#app",this.placement_points_array=JSON.parse(JSON.stringify(d["a"].placement_points))},mounted:function(){},methods:{addPlacement:function(){var t=this.placement_points_array[this.placement_points_array.length-1];this.placement_points_array.push({points:t.points>1?t.points-1:1,placement:t.placement+1})},removePlacement:function(t){this.placement_points_array.splice(t,1)},sortPlacements:function(){this.placement_points_array.sort((function(t,e){return e.points-t.points})),this.savePlacements()},savePlacements:function(){this.placement_points_array.forEach((function(t,e){t.placement=e+1}))},cancelPoints:function(){this.editPoints=!this.editPoints,this.placement_points_array=JSON.parse(JSON.stringify(this.temp_placement_points_array))},confirmPoints:function(){this.savePlacements(),this.editPoints=!this.editPoints,this.temp_placement_points_array=JSON.parse(JSON.stringify(this.placement_points_array))},resetPoints:function(){this.placement_points_array=JSON.parse(JSON.stringify(d["a"].placement_points)),this.editPoints=!this.editPoints},changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):(this.text="Olet jo tällä sivulla!",this.snackbar=!0)},publishCompetition:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.competition.isPublic=!t,i={$set:{isPublic:e.competition.isPublic}},e.updateToDatabase(e.competition,i);case 3:case"end":return a.stop()}}),a)})))()},endCompetition:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.competition.isFinished=!t,e.competition.isFinished?e.competition.state="Päättynyt":e.competition.state="Kesken",i={$set:{isFinished:e.competition.isFinished}},e.updateToDatabase(e.competition,i);case 4:case"end":return a.stop()}}),a)})))()},updateToDatabase:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,a.$store.commit("refreshCompetition",t),a.updating=!0,i.next=5,l["a"].updateValues(a.competition._id,e);case 5:i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](0),console.error(i.t0.message);case 10:a.updating=!1;case 11:case"end":return i.stop()}}),i,null,[[0,7]])})))()},getCups:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading_cups=!0,a=JSON.parse(localStorage.getItem("user")),i=a["_id"],e.prev=3,e.next=6,c["a"].getCups({user_id:i});case 6:t.cups=e.sent,t.cups.length&&(t.cups.sort((function(t,e){return t.name-e.name})),t.cups.forEach((function(t){t.select="".concat(t.name," (").concat(t.year,")")})),n=t.cups.find((function(e){return t.competition.cup_id===e.id})),n?t.cup=n:console.log("No cup found on competition!")),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.error=e.t0.message;case 13:t.loading_cups=!1;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))()},refreshCompetition:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.inputs=[],a.prev=2,a.next=5,l["a"].getCompetitions({_id:t});case 5:i=a.sent,i?(e.competition=i,e.placement_points_array=Object(r["a"])(e.competition.cup_placement_points_array),e.$store.commit("refreshCompetition",i),e.fish_specs=e.$store.getters.getCompetitionFishes,n=e.$moment(e.competition.start_date),s=e.$moment(e.competition.end_date),e.formatted_start_date="".concat(n.date(),".").concat(n.month()+1,".").concat(n.year()),e.formatted_end_date="".concat(s.date(),".").concat(s.month()+1,".").concat(s.year()),e.setOriginalValues(),e.cups.length||e.getCups()):console.log("No competition found on database..."),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),console.error(a.t0.message);case 12:e.loading=!1;case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))()},isNumber:function(t,e){var a=46,i=".";e||(a=58,i=":"),t=t||window.event;var n=t.which?t.which:t.keyCode;if(n>31&&(n<48||n>57)&&n!==a)t.preventDefault();else{if(n!=a)return!0;if(!(t.target.value.indexOf(i)>=0))return!0;t.preventDefault()}},addInput:function(){this.inputs.push({index:this.inputs.length,name:null,multiplier:1,minsize:0,weights:0,color:this.generateRandomColor()})},deleteFish:function(t,e,a){var i=this;if(a)try{this.inputs.splice(t,1),this.competition.signees.forEach((function(t){if(t.weights.length){var a=t.weights.findIndex((function(t){return t.name===e}));a>-1&&t.weights.splice(a,1)}}))}catch(n){console.error=n.message}else this.$confirm("Oletko varma?","Poista kala","question").then((function(a){a&&i.deleteFish(t,e,a)})).catch((function(t){t&&console.error(t)}))},setOriginalValues:function(){var t=this;this.inputs=[],this.fish_specs.forEach((function(e,a){t.inputs.push({index:a,name:e.name,multiplier:parseInt(e.multiplier),minsize:e.minsize,weights:parseInt(e.weights),color:e.color,original_name:e.name,original_multiplier:parseInt(e.multiplier),original_minsize:e.minsize})})),this.name=this.competition.name,this.locality=this.competition.locality,this.cup_participation_points=this.competition.cup_participation_points,this.cup_points_multiplier=this.competition.cup_points_multiplier,this.team_competition=this.competition.team_competition?"Kyllä":"Ei",this.start_date=new Date(this.competition.start_date).toISOString().substr(0,10),this.end_date=new Date(this.competition.end_date).toISOString().substr(0,10),this.start_time=this.competition.start_time,this.end_time=this.competition.end_time,this.basic_info_validated=!0},generateRandomColor:function(){var t="#"+Math.floor(16777215*Math.random()).toString(16);return t},showError:function(t){this.errors.push(t),location.href="#",location.href="#app"},checkBasicInformation:function(){var t=this;this.errors=[],this.basic_info_validated=!1,this.validated=!1;var e=this.$moment(this.start_date,"YYYY-M-D",!0).isValid(),a=this.$moment(this.end_date,"YYYY-M-D",!0).isValid(),i=this.$moment(this.start_time,"H:mm",!0).isValid(),n=this.$moment(this.end_time,"H:mm",!0).isValid();if(this.name||this.showError("Kilpailun nimi puuttuu!"),this.locality||this.showError("Kilpailun paikkakunta puuttuu!"),this.cup.id||this.showError("Cuppia ei valittuna!"),this.placement_points_array.length||this.showError("Lisää osallistumispisteet kiljailijoille"),this.cup_participation_points||this.showError("Määritä kilpailun Cup osallistumispisteet!"),this.cup_points_multiplier||this.showError("Kilpailun pistekerroin puuttuu!"),this.cup_points_multiplier<.1&&this.showError("Kilpailun pistekerroin pitää olla vähintään 0.1!"),this.start_time&&i||(1==!this.start_time?this.showError("Kilpailun alkamisnaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.start_time)),this.end_time&&n||(1==!this.end_time?this.showError("Kilpailun loppumisaika puuttuu!"):this.showError('Syötä aika muodossa "hh:mm" (esim: 13:00). Syötetty aika oli: '+this.end_time)),this.start_date&&e||(1==!this.start_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)')),this.end_date&&a){var o=this.$moment(this.start_date).format("DD.MM.YYYY"),l=this.$moment(this.end_date).format("DD.MM.YYYY"),c=this.$moment("".concat(o," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),u=this.$moment("".concat(l," ").concat(this.end_time),"DD.MM.YYYY HH:mm");u.isBefore(c,"minutes")&&this.showError("Kilpailun päättymispäivämäärä ja kellonaika ei voi olla ennen alkamispäivämäärää!")}else 1==!this.end_date?this.showError("Päivämäärää ei ole valittu!"):this.showError('Syötä päivämäärä muodossa "PP.KK.VVVV (esim: 06.02.2020)');if(this.inputs.forEach((function(e){e.name||t.showError("Kalan nimi on jäänyt tyhjäksi!"),e.multiplier||t.showError("".concat(e.name?e.name:"Kalan"," kerroin on jäänyt tyhjäksi!")),e.minsize||t.showError("".concat(e.name?e.name:"Kalan"," alamitta on jäänyt tyhjäksi!"))})),!this.errors.length){var p=this.$moment(this.start_date).format("DD.MM.YYYY"),m=this.$moment(this.end_date).format("DD.MM.YYYY"),d=this.$moment("".concat(p," ").concat(this.start_time),"DD.MM.YYYY HH:mm"),v=this.$moment("".concat(m," ").concat(this.end_time),"DD.MM.YYYY HH:mm");this.competition.cup_id=this.cup.id,this.competition.cup_name=this.cup.name,this.competition.name=this.name,this.competition.locality=this.locality,this.competition.cup_participation_points=Number(this.cup_participation_points);var _=[];if(this.competition.cup_points_multiplier!==this.cup_points_multiplier&&1!==this.cup_points_multiplier){var h=1;this.placement_points_array.forEach((function(e){_.push({placement:h,points:e.points*t.cup_points_multiplier}),h++}))}else _=Object(r["a"])(this.placement_points_array);this.competition.cup_points_multiplier=this.cup_points_multiplier,this.competition.cup_placement_points_array=_,this.competition.team_competition="Ei"!==this.team_competition,this.competition.start_date=d,this.competition.end_date=v,this.competition.start_time=this.start_time,this.competition.end_time=this.end_time,this.competition.signees.forEach((function(e){e.weights.length&&t.inputs.forEach((function(a){if(a.name!==a.original_name||a.multiplier!==a.original_multiplier||a.minsize!==a.original_minsize){var i=e.weights.findIndex((function(t){return t.name===a.original_name}));if(i>-1){if(e.weights[i].name=a.name,e.total_points-=e.weights[i].points,e.weights[i].points=e.weights[i].weights*a.multiplier,e.total_points+=e.weights[i].points,t.competition.normal_weights.length){var n=t.competition.normal_weights.findIndex((function(t){return parseInt(t.boat_number)===parseInt(e.boat_number)}));if(n>-1){var r=t.competition.normal_weights[n];r.total_points=e.total_points,a.name!==a.original_name&&delete Object.assign(r,Object(s["a"])({},a.name,r[a.original_name]))[a.original_name]}var o=t.competition.normal_points.findIndex((function(t){return parseInt(t.boat_number)===parseInt(e.boat_number)}));if(o>-1){var l=t.competition.normal_points[o];l.total_points=e.total_points}}}else e.weights.push({name:a.name,weights:0,points:0})}}))})),this.inputs.forEach((function(e){e.name!==e.original_name&&(t.competition.biggest_fishes[e.original_name]&&delete Object.assign(t.competition.biggest_fishes,Object(s["a"])({},e.name,t.competition.biggest_fishes[e.original_name]))[e.original_name],t.competition.biggest_amounts[e.original_name]&&delete Object.assign(t.competition.biggest_amounts,Object(s["a"])({},e.name,t.competition.biggest_amounts[e.original_name]))[e.original_name],e.original_name=e.name,e.original_multiplier=e.multiplier,e.original_minsize=e.minsize)})),this.competition.fishes=this.fish_specs=this.inputs;var g=this.calculateNormalResults(this.competition);this.competition.normal_points=g.normal_points,this.competition.normal_weights=g.normal_weights,this.competition.team_competition&&(this.competition.team_results=this.calculateTeamResults()),this.updateCompetition(this.competition),this.basic_info_validated=!0}},updateCompetition:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.$store.commit("refreshCompetition",t),e.loading=!0,a.next=5,l["a"].updateCompetition(t._id,t);case 5:e.tab="show-settings",a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.error(a.t0.message);case 11:e.loading=!1,e.text="Tiedot päivitetty tietokantaan, sekä tulokset laskettu uusilla arvoilla!",e.snackbar=!0;case 14:case"end":return a.stop()}}),a,null,[[0,8]])})))()},deleteCompetition:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=16;break}return a.text="Poistetaan tietokannasta!",a.snackbar=!0,i.prev=3,i.next=6,l["a"].deleteCompetition(t);case 6:a.$store.state.competition=null,localStorage.removeItem("competition"),a.$router.push({path:"/dashboard"}),i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](3),a.error=i.t0.message;case 14:i.next=17;break;case 16:a.$confirm("Oletko varma?","Poista kilpailu","question").then((function(e){e&&a.deleteCompetition(t,e)})).catch((function(t){t&&console.error(t)}));case 17:case"end":return i.stop()}}),i,null,[[3,11]])})))()},calculateNormalResults:function(t){var e,a=t.cup_placement_points_array,i=a[0],n=t.cup_participation_points,s=0,r=0,o=1,l=[],c=[],u=this.$store.getters.getFinishedSignees;u=u.sort((function(t,e){return parseInt(e.total_points)-parseInt(t.total_points)})),u.forEach((function(u){e=0,s?(u.total_points==s?(o-=1,r+=1):o+=r,0==u.total_points&&u.total_points===s&&(r+=1)):s=u.total_points;var p=a.find((function(t){return t.placement===o}));i=p&&0!==u.total_points?p.points*t.cup_points_multiplier:0,e=i+n,l.push({placement:o,boat_number:u.boat_number,captain_name:u.captain_name,temp_captain_name:u.temp_captain_name,locality:u.locality,total_points:u.total_points.toLocaleString(),cup_placement_points:i,cup_participation_points:n,cup_points_total:e});var m={};m.placement=o,m.boat_number=u.boat_number,m.captain_name=u.captain_name,u.weights.forEach((function(t){var e=t.name,a=t.weights;m[e]=a})),m.total_points=u.total_points,c.push(m),s=u.total_points,r>0?o+=r:o++}));var p={normal_points:l,normal_weights:c};return p},calculateTeamResults:function(){var t=this.competition.signees,e=[],a=[];return t.forEach((function(t){"-"!==t.team&&null!==t.team&&e.push(t.team)})),e=Object(r["a"])(new Set(e)),e.forEach((function(e){var i=t.filter((function(t){return t.team==e})),n=0,s=[];i.forEach((function(t){s.push(t.captain_name),n+=t.total_points})),1===s.length&&(s.push("-"),s.push("-")),2===s.length&&s.push("-"),a.push({name:e,captain_name_1:s[0],captain_name_2:s[1],captain_name_3:s[2],points:n.toLocaleString()})})),a}}},g=h,f=a("2877"),b=a("6544"),k=a.n(b),w=a("0798"),x=a("8336"),y=a("b0af"),C=a("99d9"),$=a("62ad"),T=a("a523"),S=a("2e4b"),V=a("ce7e"),P=a("132d"),j=a("8860"),K=a("da13"),R=a("5d23"),I=a("34c3"),E=a("67b6"),O=a("43a6"),Y=a("0fd9"),D=a("b974"),L=a("2db4"),F=a("2fa4"),N=a("e0c7"),M=a("71a3"),A=a("c671"),B=a("fe57"),J=a("aac8"),z=a("9a96"),H=a("8654"),Q=a("c964"),q=Object(f["a"])(g,i,n,!1,null,null,null);e["default"]=q.exports;k()(q,{VAlert:w["a"],VBtn:x["a"],VCard:y["a"],VCardTitle:C["c"],VCol:$["a"],VContainer:T["a"],VDatePicker:S["a"],VDivider:V["a"],VIcon:P["a"],VList:j["a"],VListItem:K["a"],VListItemContent:R["a"],VListItemIcon:I["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VRadio:E["a"],VRadioGroup:O["a"],VRow:Y["a"],VSelect:D["a"],VSnackbar:L["a"],VSpacer:F["a"],VSubheader:N["a"],VTab:M["a"],VTabItem:A["a"],VTabs:B["a"],VTabsItems:J["a"],VTabsSlider:z["a"],VTextField:H["a"],VTimePicker:Q["a"]})},c8f6:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",{staticStyle:{margin:"20px"}},[a("v-col",[t.competition?a("v-btn",{attrs:{rounded:"",color:"yellow"},on:{click:function(e){return t.$router.push({path:"/overview"})}}},[a("v-icon",[t._v("mdi-keyboard-return")]),t._v("Takaisin kilpailuun ")],1):t._e()],1)],1),a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[a("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[a("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v(" Pdf Asetukset ")]),a("v-card-text",[a("v-checkbox",{attrs:{label:"Pfd Vaakatasossa"},model:{value:t.isLandscape,callback:function(e){t.isLandscape=e},expression:"isLandscape"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"yellow",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Peruuta ")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.saveAsPDF("Ilmoittautuneet")}}},[t._v(" Lataa ")])],1)],1)],1),a("v-row",{attrs:{justify:"center",align:"center"}},[t.cup?a("v-col",[a("h1",[t._v(t._s(t.cup.name)+", "+t._s(t.cup.year))])]):a("v-col",[a("h1",[t._v("Ladataan...")])])],1),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#overview"}},[t._v("Yleisnäkymä")]),a("v-tab",{attrs:{href:"#points",disabled:!t.competitions.length}},[t._v("Pistetilanne")]),a("v-tab",{attrs:{href:"#stats",disabled:!t.competitions.length}},[t._v("Tilastoja")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(0, 0, 0, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{attrs:{value:"overview"}},[t.loading?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Valmistellaan Cuppia... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[t.cup?t._e():a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei kuppia valittuna ")])])],1),t.competitions.length?a("v-row",{staticStyle:{"margin-top":"50px"}},[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tiedot",outlined:"",items:t.select_table},on:{input:t.selectTableData},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1):t._e(),t.competitions.length?a("v-row",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" "+t._s(t.selected)+" ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae taulukosta","single-line":"","hide-details":""},model:{value:t.search_comp,callback:function(e){t.search_comp=e},expression:"search_comp"}})],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.selected_headers,items:t.selected_items,search:t.search_comp,loading:t.loading||t.updating},scopedSlots:t._u([{key:"item.start_date",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:"primary darken-2"}},[t._v(t._s(i.start_date.format("DD.MM.YYYY")))])]}},{key:"item.isFinished",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-chip",t._g(t._b({attrs:{color:i.isFinished?"green lighten-2":"red lighten-2",outlined:t.$store.getters.getTheme,disabled:t.updating},on:{click:function(e){return t.endCompetition(i)}}},"v-chip",s,!1),n),[t._v(t._s(i.isFinished?"Kyllä":"Ei"))])]}}],null,!0)},[a("span",[t._v("Muuta tila painamalla")])])]}},{key:"item.isPublic",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-chip",t._g(t._b({attrs:{outlined:t.$store.getters.getTheme,color:i.isPublic?"green darken-2":"red darken-2",disabled:t.updating},on:{click:function(e){return t.publishCompetition(i)}}},"v-chip",s,!1),n),[t._v(t._s(i.isPublic?"Julkinen":"Salainen"))])]}}],null,!0)},[a("span",[t._v("Muuta tila painamalla")])])]}},{key:"item.cup_points_multiplier",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:t.getMultiplierColor(i.cup_points_multiplier),outlined:t.$store.getters.getTheme}},[t._v(t._s(i.cup_points_multiplier)+"x")])]}},{key:"item.choose",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",disabled:t.updating},on:{click:function(e){return t.pickCompetition(i)}}},"v-btn",s,!1),n),[a("v-icon",{attrs:{color:"black"}},[t._v("mdi-arrow-right-bold-box-outline")])],1)]}}],null,!0)},[a("span",[t._v("Siirry kilpailuun")])])]}},{key:"item.modify",fn:function(e){var i=e.item;return[a("v-btn",{attrs:{color:"yellow darken-2",dark:t.$store.getters.getTheme},on:{click:function(e){e.stopPropagation(),t.new_captain_name=i.captain_name,t.new_temp_captain_name=i.temp_captain_name,t.new_locality=i.locality,t.$set(t.dialog_signee,i.boat_number,!0)}}},[a("v-icon",{attrs:{color:"black"}},[t._v("mdi-account-edit")])],1),a("v-dialog",{key:i.boat_number,attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog_signee[i.boat_number],callback:function(e){t.$set(t.dialog_signee,i.boat_number,e)},expression:"dialog_signee[item.boat_number]"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Muokkaa käyttäjän (Nro "+t._s(i.boat_number)+") Cup tietoja")])]),a("v-card-text",[a("v-container",{staticStyle:{width:"70%"}},[t.errors.length?a("div",[a("ul",{staticClass:"collection with-header",staticStyle:{border:"1px solid red"}},[a("li",{staticClass:"collection-header",staticStyle:{background:"rgba(0, 0, 0, 0)"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")])],1),t._l(t.errors,(function(e,i){return a("li",{key:i,staticClass:"collection-item",attrs:{id:"error"}},[a("p",{staticClass:"flow-text black--text"},[t._v(" "+t._s(i+1)+". "+t._s(e)+" ")])])}))],2)]):t._e(),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"10"}},[a("v-text-field",{attrs:{loading:t.publishing,label:"Kippari*",maxlength:"40",counter:"40",required:""},model:{value:t.new_captain_name,callback:function(e){t.new_captain_name=e},expression:"new_captain_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"10"}},[a("v-text-field",{attrs:{loading:t.publishing,label:"Varakippari",maxlength:"40",counter:"40",required:""},model:{value:t.new_temp_captain_name,callback:function(e){t.new_temp_captain_name=e},expression:"new_temp_captain_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"10"}},[a("v-text-field",{attrs:{loading:t.publishing,label:"Paikkakunta*",maxlength:"40",counter:"40",required:""},model:{value:t.new_locality,callback:function(e){t.new_locality=e},expression:"new_locality"}})],1)],1),a("small",[t._v("*Pakolliset kentät")])],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"yellow darken-2",outlined:"",loading:t.publishing},on:{click:function(e){return e.stopPropagation(),t.modifySignee(i,t.new_captain_name,t.new_temp_captain_name,t.new_locality,!1)}}},[t._v("Peruuta")]),a("v-spacer"),a("v-btn",{attrs:{color:"green darken-2",outlined:"",loading:t.publishing},on:{click:function(e){return e.stopPropagation(),t.modifySignee(i,t.new_captain_name,t.new_temp_captain_name,t.new_locality,!0)}}},[t._v("Tallenna")])],1)],1)],1)]}}],null,!0)})],1)],1)],1):t._e(),t.competitions.length?a("v-row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("v-col",[a("v-btn",{attrs:{tile:"",color:"blue lighten-1",loading:t.publishing},on:{click:function(e){return t.changePage("/register-comp")}}},[a("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo uusi kilpailu!")],1)],1),a("v-col",[a("v-btn",{attrs:{large:"",outlined:"",dark:t.$store.getters.getTheme,loading:t.publishing},on:{click:function(e){t.dialog=!0}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa lista kilpailijoista")],1)],1),a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{large:"",tile:"",color:t.cup.isPublic?"grey darken-4":"green darken-4",loading:t.publishing},on:{click:function(e){return t.publishCup(t.cup.isPublic)}}},[t.cup.isPublic?a("div",[a("v-icon",[t._v("mdi-incognito")]),t._v(" Aseta cup salaiseksi ")],1):a("div",[a("v-icon",{attrs:{color:"green"}},[t._v("mdi-publish")]),t._v(" Aseta cup julkiseksi ")],1)])],1)],1):a("v-row",[t.loading||t.competitions.length?t._e():a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei kilpailuja! ")]),a("router-link",{attrs:{to:"/register-comp"}},[a("v-btn",{attrs:{tile:"",color:"blue lighten-1"}},[a("v-icon",[t._v("mdi-plus-circle")]),t._v("Luo kilpailu!")],1)],1)],1),t.error?a("v-col",[a("h2",{staticClass:"error",class:{"white--text":t.$store.getters.getTheme}},[t._v(" "+t._s(t.error)+" ")])]):t._e(),t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ladataan kilpailuja... ")]),a("ProgressBarQuery")],1):t._e()],1)],1),a("v-tab-item",{attrs:{value:"points"}},[a("cup-points",{attrs:{competitions:t.competitions,results:t.results,isResults:t.isResults,loading:t.loading,selectNumbers:t.selectNumbers,headers:t.headers,cup:t.cup},on:{change:function(e){return t.changeHeaders(e)},refresh:function(e){return t.refreshCup(e._id)},calculate:function(e){return t.calculateAll(t.competitions,e)},save:function(e){t.selectedCompetitions=e.selectedCompetitions,t.isLandscape=e.isLandscape,t.showInfoInPdf=e.showInfoInPdf,t.saveAsPDF("Tulokset")}}})],1),a("v-tab-item",{attrs:{value:"stats"}},[a("v-row",[a("v-col",[a("h1",[t._v("Tilastoja")])])],1),a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",{attrs:{offset:"3"}},[a("v-checkbox",{attrs:{label:"Näytä chartit",disabled:!t.competitions.length,color:"indigo darken-3"},model:{value:t.showCharts,callback:function(e){t.showCharts=e},expression:"showCharts"}})],1),a("v-col",[a("v-checkbox",{attrs:{label:"Näytä taulukot",disabled:!t.competitions.length,color:"indigo darken-3"},model:{value:t.showTables,callback:function(e){t.showTables=e},expression:"showTables"}})],1)],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-tabs",{attrs:{"background-color":"blue lighten-3",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.stats_tab,callback:function(e){t.stats_tab=e},expression:"stats_tab"}},[a("v-tabs-slider",{attrs:{color:"green darken-4"}}),a("v-tab",{attrs:{href:"#cupfishes"}},[t._v("Kalasaaliit")]),a("v-tab",{attrs:{href:"#cupbiggestfishes"}},[t._v("Suurimmat kalat")]),a("v-tab",{attrs:{href:"#cupsignees"}},[t._v("Kilpailijat")])],1)],1)],1),a("v-tabs-items",{staticStyle:{background:"rgba(0, 0, 0, 0.4)"},model:{value:t.stats_tab,callback:function(e){t.stats_tab=e},expression:"stats_tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"cupfishes"}},[t.total_fishes_chart_data&&t.showCharts?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v(" Cupin kalasaaliit (Total) ")]),a("bar-chart",{attrs:{"chart-data":t.total_fishes_chart_data,"chart-id":"total_fishes_signee_chart",title:"Cupin kalasaaliit (Total)"}})],1)],1)],1):t._e(),t.competition_fishes_chart_data&&t.showCharts?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v(" Cupin kalasaaliit (Kilpailuittain) ")]),a("bar-chart",{attrs:{"chart-data":t.competition_fishes_chart_data,"chart-id":"competition_fishes_signee_chart",title:"Cupin kalasaaliit (Kilpailuittain)"}})],1)],1)],1):t._e(),t.cup_fishes_competition.length&&t.showTables?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v(" Cupin kalasaaliit (Kilpailuittain) ")]),a("v-spacer")],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.headers_cup_fishes_competition,items:t.cup_fishes_competition,loading:t.loading},scopedSlots:t._u([{key:"item.weights",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s((i.weights/100).toLocaleString())+" kg")])]}}],null,!0)})],1)],1)],1):t._e(),t.cup_fishes_total.length&&t.showTables?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Cupin kalasaaliit (Total)")]),a("v-spacer")],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.headers_cup_fishes_total,items:t.cup_fishes_total,loading:t.loading},scopedSlots:t._u([{key:"item.weights",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s((i.weights/100).toLocaleString())+" kg")])]}}],null,!0)})],1)],1)],1):t._e()],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"cupbiggestfishes"}},[t.competition_fishes_chart_data&&t.showCharts?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v(" Cupin suurimmat kalat ")]),a("bar-chart",{attrs:{"chart-data":t.cup_biggest_fishes_chart_data,"chart-id":"cup_biggest_fishes_chart",title:"Cupin suurimmat kalat"}})],1)],1)],1):t._e(),t.competition_fishes_chart_data&&t.showCharts?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v(" Cupin suurimmat kalasaaliit ")]),a("bar-chart",{attrs:{"chart-data":t.cup_biggest_amounts_chart_data,"chart-id":"cup_biggest_amounts_chart",title:"Cupin suurimmat kalasaaliit"}})],1)],1)],1):t._e(),t.cup_biggest_fishes.length&&t.showTables?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Cupin suurimmat kalat")]),a("v-spacer")],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.headers_cup_biggest_fishes,items:t.cup_biggest_fishes,loading:t.loading},scopedSlots:t._u([{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):t._e(),t.cup_biggest_amounts.length&&t.showTables?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Cupin suurimmat kalasaaliit")]),a("v-spacer")],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.headers_cup_biggest_amounts,items:t.cup_biggest_amounts,loading:t.loading},scopedSlots:t._u([{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):t._e()],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"cupsignees"}},[t.cup?a("v-row",[a("v-col",{attrs:{"offset-md":"4",md:"5"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[t.cup.signees?a("v-card-title",[a("v-icon",{attrs:{color:"blue darken-2"}},[t._v("mdi-account-group")]),t._v(" Yhteensä ilmoittautuneita "+t._s(t.cup.signees.length)+" kpl ")],1):t._e()],1)],1)],1):t._e(),t.cup_signees_chart_data&&t.showCharts?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v(" Kilpailujen osallistujamäärät ")]),a("bar-chart",{attrs:{"chart-data":t.cup_signees_chart_data,"chart-id":"cup_signees_chart",title:"Kilpailujen osallistujamäärät"}})],1)],1)],1):t._e(),t.cup_signees.length&&t.showTables?a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Kilpailujen osallistujamäärät")]),a("v-spacer")],1),a("v-data-table",{attrs:{id:"normal-table",headers:t.headers_cup_signees,items:t.cup_signees,loading:t.loading},scopedSlots:t._u([{key:"item.signees",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.signees.toLocaleString())+" kpl")])]}}],null,!0)})],1)],1)],1):t._e()],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)],1)],1)},n=[],s=a("b85c"),r=a("2909"),o=a("1da1"),l=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("b0c0"),a("c740"),a("4e827"),a("99af"),a("e9c4"),a("a434"),a("7db0"),a("4de4"),a("fb6a"),a("a9e3"),a("ac1f"),a("5319"),a("5b81"),a("4fadc"),a("07ac"),a("51dd")),c=a("7149"),u=(a("0da4"),a("3fdc")),p=a("e0b1"),m=a("e650"),d=a("8baf"),v={name:"CupOverview",components:{ProgressBarQuery:function(){return Promise.resolve().then(a.bind(null,"a822"))},BarChart:u["a"],CupPoints:m["a"]},data:function(){return{dialog:!1,isLandscape:!1,dialog_clock:!1,dialog_signee:{},cup:null,competitions:[],signees:[],headers:[],select_table:["Kilpailut","Ilmoittautuneet"],selected:"Kilpailut",selected_headers:[],selected_items:[],cup_fishes_competition:[],cup_fishes_total:[],cup_signees:[],cup_biggest_fishes:[],cup_biggest_amounts:[],total_fishes_chart_data:null,competition_fishes_chart_data:null,cup_signees_chart_data:null,cup_biggest_fishes_chart_data:null,cup_biggest_amounts_chart_data:null,headers_comp:[{text:"Kilpailun Päivämäärä",value:"start_date"},{text:"Nimi",value:"name"},{text:"Päättynyt",value:"isFinished"},{text:"Julkisuus",value:"isPublic"},{text:"Pistekerroin",value:"cup_points_multiplier"},{text:"Valitse",value:"choose",sortable:!1}],headers_signees:[{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Seura/Paikkakunta",value:"locality"},{text:"Muokkaa",value:"modify",sortable:!1}],headers_cup_fishes_total:[{text:"Kalan nimi",value:"name"},{text:"Määrä",value:"weights"}],headers_cup_fishes_competition:[{text:"Kalan nimi",value:"name"},{text:"Kilpailu",value:"comp_name"},{text:"Määrä",value:"weights"}],headers_cup_signees:[{text:"Kilpailu",value:"comp_name"},{text:"Määrä",value:"signees"}],headers_cup_biggest_fishes:[{text:"Kilp.nro",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Kilpailu",value:"comp_name"},{text:"Kala",value:"fish_name"},{text:"Paino",value:"weight"}],headers_cup_biggest_amounts:[{text:"Kilp.nro",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Kilpailu",value:"comp_name"},{text:"Kala",value:"fish_name"},{text:"Paino",value:"weight"}],results:[],loading:!1,publishing:!1,updating:!1,selectNumbers:[],tab:null,stats_tab:null,search_comp:"",competition:null,error:null,errors:[],new_locality:null,new_captain_name:null,new_temp_captain_name:null,isSimpleMode:!0,showTables:!1,showCharts:!0,snackbar:!1,text:"",timeout:5e3,isResults:!1,showInfoInPdf:!0}},created:function(){},mounted:function(){this.competition=localStorage.getItem("competition"),null!=localStorage.getItem("cup")?(this.refreshCup(localStorage.getItem("cup")),this.$store.state.cup=this.cup):console.log("No cup in localstorage!"),location.href="#",location.href="#app"},methods:{publishCup:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.cup.isPublic=!t,a.prev=1,e.$store.state.cup=e.cup,e.publishing=!0,i={$set:{isPublic:e.cup.isPublic}},a.next=7,l["a"].updateValues(e.cup._id,i);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),console.error(a.t0.message);case 12:e.publishing=!1;case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},publishCompetition:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.isPublic=!t.isPublic,i={$set:{isPublic:t.isPublic}},e.updateToDatabase(t,i);case 3:case"end":return a.stop()}}),a)})))()},endCompetition:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.isFinished=!t.isFinished,t.isFinished?t.state="Päättynyt":t.state="Kesken",i={$set:{isFinished:t.isFinished}},e.updateToDatabase(t,i);case 4:case"end":return a.stop()}}),a)})))()},updateToDatabase:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,a.updating=!0,i.next=4,c["a"].updateValues(t._id,e);case 4:i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.error(i.t0.message);case 9:a.updating=!1;case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()},changePage:function(t){this.$router.push({path:t,query:{cup:localStorage.getItem("cup")}})},selectTableData:function(){"Kilpailut"===this.selected?(this.selected_items=this.competitions,this.selected_headers=this.headers_comp):(this.selected_items=this.signees,this.selected_headers=this.headers_signees)},calculateCupStatistics:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i,n,s,r,o,l,c,u,m,d,v,_,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=[],i=[],n=[],s=[],r=[],o=[],l=[],c=[],u=[],m=[],d=[],v=[],_=[],h=[],t.competitions.forEach((function(e){for(var n in e.fishes.forEach((function(i){if(i.weights>0){t.cup_fishes_competition.push({name:i.name,comp_name:e.name,weights:i.weights});var n=a.findIndex((function(t){return t.name===i.name}));n>-1?a[n].weights+=i.weights:a.push({name:i.name,weights:i.weights})}})),i.push({comp_name:e.name,signees:e.signees.length}),e.biggest_fishes){var o=e.biggest_fishes[n].sort(p["default"].sortBy("weight",!1));o.length&&o[0].weight>0&&s.push({boat_number:o[0].boat_number,captain_name:o[0].captain_name,comp_name:e.name,fish_name:n,weight:o[0].weight})}for(var l in e.biggest_amounts){var c=e.biggest_amounts[l].sort(p["default"].sortBy("weight",!1));c.length&&c[0].weight>0&&r.push({boat_number:c[0].boat_number,captain_name:c[0].captain_name,comp_name:e.name,fish_name:l,weight:c[0].weight})}})),t.cup_fishes_total=a.sort(p["default"].sortBy("weights",!1)),t.cup_fishes_total.forEach((function(t){d.push(t.name),v.push(t.weights)})),t.total_fishes_chart_data={labels:d,datasets:[{label:"Määrä",backgroundColor:p["default"].getRandomColors(v.length),data:v}]},t.cup_fishes_competition=t.cup_fishes_competition.sort(p["default"].sortBy("weights",!1)),t.cup_fishes_competition.forEach((function(t){_.push("".concat(t.name," (").concat(t.comp_name,")")),h.push(t.weights)})),t.competition_fishes_chart_data={labels:_,datasets:[{label:"Määrä",backgroundColor:p["default"].getRandomColors(h.length),data:h}]},t.cup_biggest_fishes=s.sort(p["default"].sortBy("weight",!1)),t.cup_biggest_fishes.forEach((function(t){o.push("".concat(t.fish_name,", Vene (").concat(t.boat_number,")")),c.push(t.weight)})),t.cup_biggest_fishes_chart_data={labels:o,datasets:[{label:"Paino",backgroundColor:p["default"].getRandomColors(c.length),data:c}]},t.cup_biggest_amounts=r.sort(p["default"].sortBy("weight",!1)),t.cup_biggest_amounts.forEach((function(t){l.push("".concat(t.fish_name," | Venekunta nro. (").concat(t.boat_number,")")),u.push(t.weight)})),t.cup_biggest_amounts_chart_data={labels:l,datasets:[{label:"Paino",backgroundColor:p["default"].getRandomColors(u.length),data:u}]},t.cup_signees=i.sort(p["default"].sortBy("signees",!1)),t.cup_signees.forEach((function(t){n.push(t.comp_name),m.push(t.signees)})),t.cup_signees_chart_data={labels:n,datasets:[{label:"Kilpailijamäärä",backgroundColor:p["default"].getRandomColors(m.length),data:m}]};case 30:case"end":return e.stop()}}),e)})))()},modifySignee:function(t,e,a,i,n){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function o(){var c,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(s.errors=[],!n){o.next=25;break}if(e?t.captain_name=p["default"].capitalize_words(t.captain_name):s.errors.push("Kipparin nimi puuttuu!"),a?t.temp_captain_name=p["default"].capitalize_words(t.temp_captain_name):a=t.temp_captain_name="-",i?t.locality=p["default"].capitalize_words(t.locality):s.errors.push("Seura/Paikkakunta puuttuu!"),s.errors.length){o.next=23;break}if(t.captain_name===e&&t.temp_captain_name===a&&t.locality===i){o.next=20;break}return t.captain_name=e,t.temp_captain_name=a,t.locality=i,s.$store.state.cup=s.cup,s.publishing=!0,c=Object(r["a"])(s.signees),c.forEach((function(t){delete t.dialog})),u={$set:{signees:s.signees}},o.next=17,l["a"].updateValues(s.cup._id,u).then((function(){s.calculateAll(s.competitions,s.selectedCompetitions),s.$set(s.dialog_signee,t.boat_number,!1),s.text="Kilpailijan tiedot päivitetty!",s.snackbar=!0})).catch((function(t){s.text="Virhe kilpailijan tietojen päivityksessä... Yritä uudelleen!",s.snackbar=!0,console.log(t)}));case 17:s.publishing=!1,o.next=23;break;case 20:s.text="Kaikki tiedot ovat samoja kuin aikaisemmin, poistutaan...",s.snackbar=!0,s.$set(s.dialog_signee,t.boat_number,!1);case 23:o.next=26;break;case 25:s.$set(s.dialog_signee,t.boat_number,!1);case 26:case"end":return o.stop()}}),o)})))()},refreshCup:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,l["a"].getCups({_id:t});case 4:if(i=a.sent,!i){a.next=28;break}return e.cup=i,e.$store.commit("refreshCup",e.cup),a.prev=8,a.next=11,c["a"].getCompetitions({cup_id:t});case 11:e.competitions=a.sent,n=1,e.competitions.forEach((function(t){e.selectNumbers.push(n),t.start_date=e.$moment(t.start_date),t.end_date=e.$moment(t.end_date),t.key_name=n,n++})),e.competitions.sort((function(t,e){return e.start_date.isBefore(t.start_date)})),e.signees=e.cup.signees.sort(p["default"].sortBy("boat_number",!0)),e.signees.forEach((function(t){t.dialog=!1})),e.selectedCompetitions=e.competitions.length,e.calculateAll(e.competitions,e.selectedCompetitions),e.selectTableData(),e.calculateCupStatistics(),e.text="Tiedot ajantasalla!",e.snackbar=!0,a.next=28;break;case 25:a.prev=25,a.t0=a["catch"](8),console.error(a.t0);case 28:a.next=33;break;case 30:a.prev=30,a.t1=a["catch"](1),console.log(a.t1.message);case 33:e.loading=!1;case 34:case"end":return a.stop()}}),a,null,[[1,30],[8,25]])})))()},pickCompetition:function(t){this.$store.state.competition=t,localStorage.setItem("competition",JSON.stringify({id:t._id,start_date:t.start_date,end_date:t.end_date})),this.$router.push({path:"/overview"})},calculateAll:function(t,e){var a=this,i=[];if(this.isResults=!1,t.forEach((function(t){t.normal_points.length&&t.normal_points.forEach((function(e){var n=i.findIndex((function(t){return parseInt(e.boat_number)===parseInt(t.boat_number)}));if(n>-1){var s=i[n];s.points_compare.push(e.cup_points_total),s.cup_results[t.key_name]={points:e.cup_points_total,placement:e.placement},i.splice(n,1,s)}else{var r=a.signees.find((function(t){return t.boat_number===e.boat_number}));e.captain_name=r.captain_name,e.temp_captain_name=r.temp_captain_name,e.locality=r.locality,e.cup_results=[],e.points_compare=[],e.points_compare.push(e.cup_points_total),e.cup_results[t.key_name]={points:e.cup_points_total,placement:e.placement},i.push(e)}}))})),i.length){this.isResults=!0,i=this.limitCompetitions(i,e),this.results=i.sort((function(t,e){return parseInt(e.cup_results["total"])-parseInt(t.cup_results["total"])})),this.changeHeaders("Paikkakunta");var n=1,s=-1,r=-1;this.results.forEach((function(t){s===t.cup_results["total"]?t.final_placement=r:(t.final_placement=n,s=t.cup_results["total"],r=t.final_placement),t.final_cup_points=t.cup_results["total"],n++}))}},changeHeaders:function(t){var e=this;this.headers=[],this.headers.push({text:"Sijoitus",highlight:!1,align:"center",value:"final_placement"}),this.headers.push({text:"Kilp. Nro",align:"center",highlight:!1,value:"boat_number"}),this.headers.push({text:"Kippari",align:"center",highlight:!1,value:"captain_name"}),this.headers.push({text:"Paikkakunta",align:"center",highlight:!1,value:"locality"}),this.notFinishedCount=0,this.competitions.forEach((function(a){if(a.isFinished||e.notFinishedCount++,"Paikkakunta"===t){var i=e.headers.filter((function(t){return a.locality===t.text}));if(i.length){var n=" ".concat(a.locality," #").concat(i.length+1);e.headers.push({text:n,align:"center",highlight:!0,isFinished:!a.isFinished,value:"cup_results[".concat(a.key_name,"].points")})}else e.headers.push({text:a.locality,align:"center",highlight:!0,isFinished:!a.isFinished,value:"cup_results[".concat(a.key_name,"].points")})}else e.headers.push({text:a.name,align:"center",highlight:!0,isFinished:!a.isFinished,value:"cup_results[".concat(a.key_name,"].points")})})),this.headers.push({text:"Yhteensä",align:"center",highlight:!1,value:"final_cup_points"})},limitCompetitions:function(t,e){var a=this;return e=e<0?0:e,t.forEach((function(t){if(a.competitions.length>=e){t.points_compare.sort((function(t,e){return parseInt(e)-parseInt(t)})),t.cup_results["total"]=0;var i=0;a.competitions.forEach((function(a){t.cup_results[a.key_name]&&(t.cup_results[a.key_name].placement=a.normal_points.find((function(e){return e.boat_number===t.boat_number})).placement,t.cup_results[a.key_name].points<t.points_compare[e]&&(t.cup_results[a.key_name].points=a.cup_participation_points),t.cup_results[a.key_name].points===t.points_compare[e]&&(1!==i&&(t.cup_results[a.key_name].points=a.cup_participation_points),i++))}))}t.cup_results.forEach((function(e){t.cup_results["total"]+=e.points}))})),t},saveAsPDF:function(t){var e,a,i,n=new d["default"]({orientation:this.isLandscape?"landscape":"portrait"}),o="".concat(this.cup.name," (").concat(this.cup.year,")"),l=[],c=Object(r["a"])(this.competitions),u=c.slice().reverse().findIndex((function(t){return!0===t.isFinished})),m=c.length-1,v=u>=0?m-u:u,_=c[v]?c[v]:null,h="",g=this.$moment();_&&(h="".concat(_.name," (").concat(_.locality,")"),g=this.$moment(_.start_date));var f="".concat(g.date(),".").concat(g.month()+1,".").concat(g.year());n.setFontSize(24),n.text(13,15,o,{align:"left"}),n.line(0,20,400,20),n.setFontSize(14);var b=0;if(this.competitions.forEach((function(t){t.isFinished?0:b++})),"Tulokset"===t)e=0===b?"Tulokset ".concat(f):"Tilanne ".concat(f,", ").concat(h,"  (").concat(b," kpl kilpailuja kesken)"),n.text(13,30,e,{align:"left"}),this.showInfoInPdf&&n.text(13,40,t+" (".concat(this.selectedCompetitions,"/").concat(this.competitions.length," parasta kilpailua otettu huomioon)"),{align:"left"}),this.headers.forEach((function(t){l.push(t.text)})),a=this.dictToArray(this.results,1),i=45;else{if(e=0===b?"Cuppiin ilmoittautuneet ".concat(this.cup.year):"Cupin kilpailijat ".concat(f," ").concat(h),n.text(13,30,e,{align:"left"}),n.setFontSize(8),l=["Kilp. numero","Kippari","Varakippari","Paikkakunta"],this.signees=this.cup.signees.sort(p["default"].sortBy("boat_number",!0)),a=this.dictToArray(this.signees,2),a.length){var k,w=Number(a[a.length-1][0])+1,x=Object(s["a"])(p["default"].range(w,w+6));try{for(x.s();!(k=x.n()).done;){var y=k.value;a.push([y,"","",""])}}catch(V){x.e(V)}finally{x.f()}}else{var C,$=Object(s["a"])(p["default"].range(1,20));try{for($.s();!(C=$.n()).done;){var T=C.value;a.push([T,"","",""]),n.text(13,35,"Cupissa ei vielä ilmoittautuneita",{align:"left"})}}catch(V){$.e(V)}finally{$.f()}}i=37}n.autoTable({head:[l],body:a,styles:{overflow:"linebreak",halign:"justify",fontSize:"8",lineColor:100,lineWidth:.25},columnStyles:{text:{cellwidth:"auto"}},headStyles:{text:{cellwidth:"wrap"}},theme:"striped",pageBreak:"auto",tableWidth:"auto",startY:i,margin:{top:20}});var S="".concat(this.cup.year,"_").concat(p["default"].replaceAll("Cup"," ",""),"_").concat(p["default"].replaceAll(p["default"].capitalize_words(t)," ",""),".pdf");this.dialog=!1,p["default"].openPdfOnNewTab(n,S)},dictToArray:function(t,e){var a=this,i=Object.entries(t),n=[],r=1,o=!1;return i.forEach((function(t){var i=Object.values(t[1]);if(1===e){i[0]=String(i[11])+".";var l=i[9];i[1]="("+String(i[1])+")",i[3]=i[4];var c=4;a.competitions.forEach((function(t){l[t.key_name]?i[c]="".concat(l[t.key_name].points,"p (").concat(l[t.key_name].placement,".)"):i[c]="-",c++})),i[c]="".concat(l["total"],"p")}if(2===e)if(i[0]>r){o=!0;var u,m=Object(s["a"])(p["default"].range(r,i[0]));try{for(m.s();!(u=m.n()).done;){var d=u.value;d===i[0]?(i[0]=String(i[0]),o=!1):(r++,n.push([String(d)+"*","","",""]))}}catch(v){m.e(v)}finally{m.f()}}else i[0]=String(i[0]);o||(r++,n.push(i))})),n},getMultiplierColor:p["default"].getMultiplierColor}},_=v,h=a("2877"),g=a("6544"),f=a.n(g),b=a("0798"),k=a("8336"),w=a("b0af"),x=a("99d9"),y=a("ac7c"),C=a("cc20"),$=a("62ad"),T=a("a523"),S=a("8fea"),V=a("169a"),P=a("ce7e"),j=a("132d"),K=a("0fd9"),R=a("b974"),I=a("2db4"),E=a("2fa4"),O=a("71a3"),Y=a("c671"),D=a("fe57"),L=a("aac8"),F=a("9a96"),N=a("8654"),M=a("3a2f"),A=Object(h["a"])(_,i,n,!1,null,null,null);e["default"]=A.exports;f()(A,{VAlert:b["a"],VBtn:k["a"],VCard:w["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VCheckbox:y["a"],VChip:C["a"],VCol:$["a"],VContainer:T["a"],VDataTable:S["a"],VDialog:V["a"],VDivider:P["a"],VIcon:j["a"],VRow:K["a"],VSelect:R["a"],VSnackbar:I["a"],VSpacer:E["a"],VTab:O["a"],VTabItem:Y["a"],VTabs:D["a"],VTabsItems:L["a"],VTabsSlider:F["a"],VTextField:N["a"],VTooltip:M["a"]})},e5a0:function(t,e,a){"use strict";a("02b6")}}]);
//# sourceMappingURL=about~33d48c78.04c17578.js.map