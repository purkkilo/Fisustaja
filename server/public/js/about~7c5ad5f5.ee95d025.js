(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about~7c5ad5f5"],{"06e3":function(t,e,a){"use strict";var i=a("215d"),s=a.n(i);s.a},"215d":function(t,e,a){},"4b37":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header",{staticStyle:{"margin-bottom":"60px"}}),a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",tile:"",dark:t.$store.getters.getTheme}},[a("v-list",{attrs:{dense:""}},[a("p",[t._v("Navigointi")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[a("v-divider"),t._l(t.items,(function(e,i){return a("div",{key:i},[a("v-list-item",{attrs:{disabled:t.$router.currentRoute.path===e.path},on:{click:function(a){return t.changePage(e.path)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1),a("v-divider")],1)}))],2)],1)],1)],1),a("v-container",[a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme}},[a("v-card",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.0)"},attrs:{dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"12"}},[a("v-row",[a("v-col",{attrs:{md:"7"}},[a("h1",[t._v("Punnitus")])]),a("v-col",{attrs:{md:"5"}},[a("div",{staticClass:"text-center"},[a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("p",{class:{"black-text":!t.$store.getters.getTheme,"white-text":t.$store.getters.getTheme}},[t._v(" Kello/Kilpailuaika ")]),a("v-btn",t._g(t._b({attrs:{text:"",outlined:"",color:"red darken-4",dark:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-timer")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",{staticClass:"headline"}),a("Timedate"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Sulje ")])],1)],1)],1)],1)])],1)],1)],1)],1),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#weighting"}},[t._v("Punnitus")]),a("v-tab",{attrs:{href:"#situation"}},[t._v("Tilannekatsaus")]),a("v-tab",{attrs:{href:"#onwater"}},[t._v("Vielä vesillä")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(0,0,0,0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"weighting"}},[t.loading_site?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan veneitä... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",[t.signees.length?a("v-row",[a("v-col",[a("v-row",[a("v-col",[a("p",{staticClass:"flow-text center",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Punnitus ")])])],1),t.notification?a("v-row",[a("v-col",[a("v-alert",{attrs:{type:"success"}},[t._v(" "+t._s(t.notification)+" ")])],1)],1):t._e(),t.loading?t._e():a("v-row",[a("v-col",{class:{"grey darken-4":t.$store.getters.getTheme,"input-fields":!t.$store.getters.getTheme},staticStyle:{padding:"20px"},attrs:{md:"6","offset-md":"3"}},[a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Venekunta ")])]),a("v-col",{staticClass:"d-flex"},[a("v-autocomplete",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.sortedArray,"item-text":"select",label:"Valitse tai hae venekunta",hint:void 0!==t.boat_number_input["boat_number"]?"("+t.boat_number_input.boat_number+")\n                        "+t.boat_number_input.captain_name+",\n                        "+t.boat_number_input.temp_captain_name:"Valitse tai hae venekunta",disabled:t.loading_site,outlined:"","return-object":"","single-line":""},on:{input:function(e){return t.fetchFromDatabase(t.boat_number_input?t.boat_number_input.boat_number:-1)}},scopedSlots:t._u([{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-item-icon",[e.item.returned?a("v-icon",{attrs:{color:"green"}},[t._v("mdi-checkbox-marked-circle")]):a("v-icon",{attrs:{color:"yellow"}},[t._v("mdi-progress-question")])],1),a("v-list-item-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-item-icon",[e.item.returned?a("v-icon",{attrs:{color:"green"}},[t._v("mdi-checkbox-marked-circle")]):a("v-icon",{attrs:{color:"yellow darken-2"}},[t._v("mdi-account-question")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.item.boat_number)}}),a("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.item.captain_name)}})],1)]]}}],null,!1,554738487),model:{value:t.boat_number_input,callback:function(e){t.boat_number_input=e},expression:"boat_number_input"}})],1)],1)],1),t.competition_boat?t._e():a("v-row",[a("v-col",[t.loading?a("v-alert",{attrs:{type:"info"}}):t._e(),t.searched?a("v-alert",{attrs:{type:"error"}},[t._v(" Numerolla ei löytynyt venekuntaa tietokannasta! ")]):a("v-alert",{attrs:{type:"warning"}},[t._v(" Venekuntaa ei valittuna ")])],1)],1),t.competition_boat?a("v-row",[a("v-col",{attrs:{md:"8","offset-md":"2"}},[t.loading?t._e():a("v-row",[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-btn",{attrs:{large:"",block:"",color:"yellow"},on:{click:t.clearInputs}},[a("i",{staticClass:"material-icons left"},[t._v("backspace")]),t._v("Peruuta valinta")])],1)],1)],1),a("v-col",{staticStyle:{"margin-bottom":"30px"},attrs:{md:"12"}},[a("v-divider",{staticClass:"black"})],1),a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-col",[t.$store.getters.getCompetitionFishes.length?a("ul",{attrs:{id:"fish_weights"}},[a("li",{staticStyle:{padding:"10px","margin-bottom":"10px"}},[t.loading_fish?a("v-row",[a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Lisätään kala tietokantaan... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",{attrs:{md:"3"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Suurin kala? ")])]),a("v-col",{attrs:{md:"4"}},[a("v-select",{staticClass:"flow-text",attrs:{outlined:"",label:"Valitse kalalaji painamalla","item-text":"name",items:t.competition_fishes,dark:t.$store.getters.getTheme},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{attrs:{color:"primary",close:""},on:{"click:close":function(e){t.selected_fish=null}}},[t._v(" "+t._s(e.item.name)+" ")])]}}],null,!1,4227073677),model:{value:t.selected_fish,callback:function(e){t.selected_fish=e},expression:"selected_fish"}})],1),a("v-col",{staticClass:"input-fields",attrs:{md:"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Paino grammoina",type:"number",value:"0",step:"50",min:"0",rules:t.number_rules,loading:t.loading_fish},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e)}},model:{value:t.biggest_fish,callback:function(e){t.biggest_fish=e},expression:"biggest_fish"}})],1),a("v-col",{attrs:{md:"2"}},[t.selected_fish&&t.biggest_fish?a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:t.saveBiggestFish}},[a("i",{staticClass:"material-icons left"},[t._v("add_box")]),t._v("Tallenna")]):t._e()],1)],1)],1),t._l(t.inputs,(function(e,i){return a("li",{key:i},[a("v-row",[a("v-col",{attrs:{md:"12"}},[a("v-divider",{staticClass:"black"})],1)],1),a("v-row",[a("v-col",{attrs:{md:"6"}},[a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" "+t._s(i+1)+". ")]),a("span",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" "+t._s(e.name)+" ")])]),a("v-col",{staticClass:"input-fields",attrs:{md:"4"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Paino grammoina",type:"number",value:"0",step:"50",min:"0",rules:t.number_rules,loading:t.loading_fish},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"input.value"}})],1),a("v-col",{attrs:{md:"2"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",dark:""}},"v-btn",s,!1),i),[a("i",{staticClass:"material-icons left"},[t._v("add")]),t._v("Plussaa")])]}}],null,!0),model:{value:e.dialog,callback:function(a){t.$set(e,"dialog",a)},expression:"input.dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Yhteenlaske summat")])]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{staticClass:"title",attrs:{label:"Alkuperäinen arvo",value:e.value,disabled:""}})],1)],1),a("v-row",[a("v-col",{attrs:{md:"6 ","offset-md":"3"}},[a("v-text-field",{attrs:{label:"Lisättävä arvo",type:"number",step:"50",min:"0","single-line":"",outlined:""},on:{paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e)}},model:{value:e.addition,callback:function(a){t.$set(e,"addition",a)},expression:"input.addition"}})],1)],1),a("v-row",[a("v-col",{staticClass:"title red--text",attrs:{md:"6","offset-md":"3"}},[a("v-text-field",{attrs:{value:parseInt(e.value)+parseInt(e.addition?e.addition:0),label:"Summa",disabled:""}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{outlined:"",color:"red darken-1"},on:{click:function(t){e.addition=null,e.dialog=!1}}},[t._v("Peruuta")]),a("v-btn",{attrs:{outlined:"",color:"green darken-1"},on:{click:function(t){e.value=parseInt(e.value)+parseInt(e.addition?e.addition:0),e.dialog=!1,e.addition=0}}},[t._v("Tallenna")])],1)],1)],1)],1)],1)],1)}))],2):t._e(),a("v-row",[a("v-col",{attrs:{md:"12"}},[a("v-divider",{staticClass:"black"})],1)],1),t.loading?t._e():a("v-row",[a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"red",loading:t.refreshing},on:{click:function(e){return t.saveToDatabase(!0)}}},[a("i",{staticClass:"material-icons left"},[t._v("delete_forever")]),t._v("Nollaa")])],1),a("v-col",[t.refreshing?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Synkronoidaan tietokannan kanssa... ")]):t._e()]),a("v-col",[a("v-btn",{attrs:{large:"",tile:"",color:"green",loading:t.refreshing},on:{click:function(e){return t.saveToDatabase(!1)}}},[a("i",{staticClass:"material-icons left"},[t._v("check")]),t._v("Tallenna")])],1)],1),t.loading?a("v-row",[a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tiedot tietokantaan... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",tile:"",color:"blue darken-4"},on:{click:function(e){return t.refreshCompetition(t.competition_id)}}},[a("i",{staticClass:"material-icons left"},[t._v("update")]),t._v("Päivitä kilpailun tiedot ")])],1)],1)],1)],1)],1):t._e()],1)],1):a("v-row",[a("v-col",{staticStyle:{padding:"30px"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kilpailussa ei vielä ilmoittautuneita! ")])])],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"situation"}},[a("v-row",[a("v-col",[t.result_signees.length?a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"8","offset-md":"2"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v(" Tilannekatsaus ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.sortedCompetition,search:t.search},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.total_points",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:t.getColorPoints(i.total_points)}},[t._v(t._s(i.total_points.toLocaleString())+" p")])]}}],null,!0)})],1)],1)],1):t._e(),t.selected_id&&t.result_signees.length?a("v-row",[a("v-col",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{md:"8","offset-md":"2"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue"},on:{click:t.searchSelected}},[a("i",{staticClass:"material-icons left"},[t._v("assignment_return")]),t._v("Siirry punnitukseen")])],1)],1):a("v-row",[a("v-col",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{md:"8","offset-md":"2"}},[t.result_signees.length?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Voit siirtyä punnitukseen myös klikkaamalla haluamaasi riviä taulukosta ja painamalla ilmestyvää nappulaa ")]):a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei vielä tuloksia! ")])])],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"onwater"}},[a("v-row",[a("v-col",[t.signees.length&&t.still_on_water.length?t._e():a("v-row",[a("v-col",{staticClass:"input-fields",staticStyle:{"margin-top":"100px"},attrs:{md:"8","offset-md":"2"}},[t.signees.length?t._e():a("p",{staticClass:"flow-text red--text"},[t._v(" Kilpailussa ei vielä ilmoittautuneita! ")]),!t.still_on_water.length&&t.signees.length?a("p",{staticClass:"flow-text green--text"},[t._v(" Kaikki venekunnat palanneet maaliin! ")]):t._e()])],1),t.still_on_water.length?a("v-row",{staticStyle:{"margin-top":"20px"}},[a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v(" Venekunnat, jotka ovat vielä vesillä ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_on_water,callback:function(e){t.search_on_water=e},expression:"search_on_water"}}),t._v(" >")],1),a("v-data-table",{attrs:{headers:t.headers_on_water,items:t.still_on_water,search:t.search_on_water,loading:t.loading},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"item.boat_number",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.boat_number)+".")])]}}],null,!0)})],1)],1)],1):t._e(),t.selected_id&&t.still_on_water.length?a("v-row",[a("v-col",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{md:"8","offset-md":"2"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue"},on:{click:t.searchSelected}},[a("i",{staticClass:"material-icons left"},[t._v("assignment_return")]),t._v("Siirry punnitukseen")])],1)],1):a("v-row",[a("v-col",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"},attrs:{md:"8","offset-md":"2"}},[t.still_on_water.length?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Voit siirtyä punnitukseen myös klikkaamalla haluamaasi riviä taulukosta ja painamalla ilmestyvää nappulaa ")]):t._e(),t.still_on_water.length?a("v-btn",{staticClass:"white--text",attrs:{large:"",tile:"",color:"grey darken-4",loading:t.loading},on:{click:t.allFinished}},[a("i",{staticClass:"material-icons left"},[t._v("check_circle_outline")]),t._v("Kaikki saapuneet maaliin")]):t._e()],1)],1)],1)],1)],1)],1)],1)])],1)},s=[],n=(a("99af"),a("4de4"),a("7db0"),a("c740"),a("4160"),a("a434"),a("b0c0"),a("d3b7"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),a("96cf"),a("1da1")),o=a("2909"),r=a("4d5c"),l=a.n(r),c=a("7149"),m=a("b3a7"),u=a("96c7"),g=a("a822"),d={name:"Weighting",components:{Timedate:m["a"],Header:u["default"],ProgressBarQuery:g["default"]},data:function(){return{dialog:!1,tab:null,competition_id:null,boat_number_input:{},competition_boat:null,calculated_total_weights:null,calculated_fish_weights:null,searched:!1,selected_id:null,selected_boat_number:null,loading:!1,refreshing:!1,loading_fish:!1,loading_site:!0,notification:null,biggest_fish:null,selected_fish:null,competition_fishes:[],biggest_fishes:{},biggest_amounts:{},signees:[],result_signees:[],headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. Numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Pisteet",value:"total_points"}],headers_on_water:[{text:"Kilp. Numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Lähtöpaikka",value:"starting_place"}],search_on_water:"",search:"",still_on_water:[],number_rules:[function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],timer_refresh:null,interval:6e4,inputs:[],selectedItem:3,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}]}},computed:{sortedArray:function(){return Object(o["a"])(this.signees).sort((function(t,e){return t.boat_number-e.boat_number}))},sortedCompetition:function(){var t=Object(o["a"])(this.signees).sort((function(t,e){return e.total_points-t.total_points})),e=1,a=-1,i=-1;return t.forEach((function(t){a===t.total_points?t.placement=i:(t.placement=e,a=t.total_points,i=t.placement),e++})),t}},created:function(){if(null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition"));this.competition_id=t["id"],this.loading_site=!0,this.refreshCompetition(this.competition_id)}},mounted:function(){if(this.checkLogin(),l.a.AutoInit(),!this.competition_id){var t=JSON.parse(localStorage.getItem("competition"));this.competition_id=t["id"],this.loading_site=!0,this.refreshCompetition(this.competition_id)}location.href="#",location.href="#app"},beforeDestroy:function(){},methods:{changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):l.a.toast({html:"Olet jo tällä sivulla!"})},refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n,o,r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.refreshing=!0,a.prev=1,a.next=4,c["a"].getCompetitions({_id:t});case 4:i=a.sent,i?(s=i,n=e.calculateNormalResults(s),s.normal_points=n.normal_points,s.normal_weights=n.normal_weights,e.$store.commit("refreshCompetition",s),e.competition_fishes=e.$store.getters.getCompetitionFishes,e.signees=e.$store.getters.getCompetitionSignees,o=1,r=-1,l=-1,e.signees.forEach((function(t){t.select="".concat(t.boat_number,", ").concat(t.captain_name),r===t.total_points?t.placement=l:(t.placement=o,r=t.total_points,l=t.placement),o++})),e.result_signees=e.$store.getters.getResultSignees,e.still_on_water=e.$store.getters.getStillOnWaterSignees,e.competition_fishes.forEach((function(t){e.inputs.push({name:t.name,value:null,dialog:!1,addition:null})}))):console.log("No competition found on database..."),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),console.log(a.t0);case 11:e.loading_site=!1,e.refreshing=!1;case 13:case"end":return a.stop()}}),a,null,[[1,8]])})))()},allFinished:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.signees.forEach((function(t){t.returned=!0})),a=t.$store.getters.getCompetition,i=t.calculateNormalResults(a),a.normal_points=i.normal_points,a.normal_weights=i.normal_weights,a.signees=t.signees,t.$store.commit("refreshCompetition",a),e.prev=7,t.loading=!0,s={$set:{normal_points:a.normal_points,normal_weights:a.normal_weights,signees:a.signees}},e.next=12,c["a"].updateValues(a._id,s);case 12:t.loading=!1,t.still_on_water=t.$store.getters.getStillOnWaterSignees,l.a.toast({html:"Kaikki kilpailijat merkattu maaliin saapuneeksi!"}),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),console.log(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[7,17]])})))()},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(e>31&&(e<48||e>57)&&46!==e)t.preventDefault();else{if(46!=e)return!0;t.preventDefault()}},searchBoatNumber:function(t){return this.$store.getters.getSigneeByBoatNumber(parseInt(t))},getColor:function(t){return t>30?"red":t>20?"orange":t>5?"yellow":"green"},getColorPoints:function(t){return t>0?"indigo":"grey"},rowClick:function(t,e){t.id==this.selected_id?(this.selected_id=null,this.selected_boat_number=null,e.select(!1)):(this.selected_row&&this.selected_row.select(!1),this.selected_id=t.id,this.selected_boat_number=t.boat_number,e.select(!0),this.selected_row=e)},setInputWeights:function(){var t=this;this.inputs.forEach((function(e){var a=e.name,i=t.competition_boat.weights.find((function(t){return t.name===a})).weights;e.value=i>0?i:null}))},searchSelected:function(){this.tab="weighting",this.fetchFromDatabase(this.selected_boat_number)},fetchFromDatabase:function(t){var e=this;this.selected_id=null,this.selected_boat_number=null,-1!==t?(this.searched=!0,this.notification=null,this.competition_boat=this.searchBoatNumber(t),this.competition_boat?(this.$nextTick((function(){return e.setInputWeights()})),this.boat_number_input=this.competition_boat):console.log("No such boat in list!")):this.clearInputs()},saveBiggestFish:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.selected_fish&&t.boat_number_input&&t.biggest_fish)){e.next=23;break}return a={name:t.selected_fish,boat_number:t.boat_number_input.boat_number,captain_name:t.boat_number_input.captain_name,weight:t.biggest_fish},t.$store.commit("addBiggestFish",a),t.biggest_fishes=t.$store.getters.getBiggestFishes,i=t.$store.getters.getCompetition,i.biggest_fishes=t.biggest_fishes,t.$store.commit("refreshCompetition",i),e.prev=7,t.loading_fish=!0,s={$set:{biggest_fishes:i.biggest_fishes}},e.next=12,c["a"].updateValues(i._id,s);case 12:t.notification="Tiedot päivitetty tietokantaan!",t.loading_fish=!1,t.selected_fish=null,t.biggest_fish=null,e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),console.log(e.t0.message);case 20:l.a.toast({html:"Isoin kala tallennettu listaan!"}),e.next=24;break;case 23:console.log("Jokin input tyhjänä:");case 24:case"end":return e.stop()}}),e,null,[[7,17]])})))()},saveToDatabase:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n,o,r,l,m,u,g,d,h,_;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.$store.getters.getCompetitionFishes,s=[],n=0,o=0,r=0,l=0,e.biggest_fishes=e.$store.getters.getBiggestFishes,e.selected_fish&&e.boat_number_input&&e.biggest_fish&&(u={name:e.selected_fish,boat_number:e.boat_number_input.boat_number,captain_name:e.boat_number_input.captain_name,weight:e.biggest_fish},e.$store.commit("addBiggestFish",u),e.biggest_fishes=e.$store.getters.getBiggestFishes,e.selected_fish=null,e.biggest_fish=null),t?(e.competition_boat.returned=!1,e.inputs.forEach((function(t){if(m=t.name,s.push({name:m,weights:r,points:l}),e.biggest_fishes&&e.biggest_fishes[m]){var a=e.biggest_fishes[m].findIndex((function(t){return parseInt(e.boat_number_input.boat_number)===parseInt(t.boat_number)}));a>-1&&e.biggest_fishes[m].splice(a,1)}if(e.biggest_amounts&&e.biggest_amounts[m]){var i=e.biggest_amounts[m].findIndex((function(t){return parseInt(e.boat_number_input.boat_number)===parseInt(t.boat_number)}));i>-1&&e.biggest_amounts[m].splice(i,1)}}))):(e.competition_boat.returned=!0,e.inputs.forEach((function(t){m=t.name,r=parseInt(t.value?t.value:0);var a=i.find((function(t){return t.name===m})).multiplier;l=r*a,s.push({name:m,weights:r,points:l});var c={name:m,boat_number:e.competition_boat.boat_number,captain_name:e.competition_boat.captain_name,weight:r};e.$store.commit("addBiggestAmount",c),e.biggest_amounts=e.$store.getters.getBiggestAmounts,n+=r,o+=l}))),e.competition_boat.weights=s,e.competition_boat.total_weights=n,e.competition_boat.total_points=o,e.$store.commit("replaceSignee",e.competition_boat),g=e.$store.getters.getCompetition,d=e.calculateNormalResults(g),h=e.calculateTotalWeights(),g.signees=e.$store.getters.getCompetitionSignees,g.normal_points=d.normal_points,g.normal_weights=d.normal_weights,g.team_competition&&(g.team_results=e.calculateTeamResults()),g.biggest_fishes=e.biggest_fishes,g.biggest_amounts=e.biggest_amounts,g.total_weights=h.total_weights,g.fishes=h.competition_fishes,e.still_on_water.length?g.state="Punnitus":g.state="Kaikki maalissa",e.$store.commit("refreshCompetition",g),a.prev=26,e.loading=!0,e.loading_fish=!0,_={$set:{signees:g.signees,normal_points:g.normal_points,normal_weights:g.normal_weights,team_results:g.team_results,biggest_fishes:g.biggest_fishes,biggest_amounts:g.biggest_amounts,fishes:g.fishes,total_weights:g.total_weights,state:g.state}},a.next=32,c["a"].updateValues(g._id,_);case 32:e.notification="Tiedot päivitetty tietokantaan!",e.boat_number_input={},e.competition_boat=null,e.signees=g.signees,e.competition_fishes=e.$store.getters.getCompetitionFishes,e.calculated_total_weights=e.$store.getters.getCompetitionTotalWeights,e.result_signees=e.$store.getters.getResultSignees,e.still_on_water=e.$store.getters.getStillOnWaterSignees,a.next=45;break;case 42:a.prev=42,a.t0=a["catch"](26),console.log(a.t0.message);case 45:e.loading=!1,e.loading_fish=!1,e.searched=!1;case 48:case"end":return a.stop()}}),a,null,[[26,42]])})))()},calculateNormalResults:function(t){var e,a=t.cup_points_multiplier,i=t.cup_placement_points,s=t.cup_participation_points,n=0,o=0,r=1,l=0,c=[],m=[];this.signees=t.signees.filter((function(t){return 1==t.returned})),this.signees=this.signees.sort((function(t,e){return parseInt(e.total_points)-parseInt(t.total_points)})),this.signees.forEach((function(t){e=0,c.length?(t.total_points==n?(r-=1,o+=1):r+=o,0==t.total_points&&(i=0,t.total_points===n&&(o+=1)),l<=5?t.total_points!==n&&t.total_points>0&&(i-=2*(o+1),o=0):i<=0?(i=0,o=0):t.total_points!==n&&(i-=1*(o+1),o=0)):(0==t.total_points&&(i=0),n=t.total_points,e=i*a+s),e=i>0?i*a+s:s,c.push({placement:r,boat_number:t.boat_number,captain_name:t.captain_name,temp_captain_name:t.temp_captain_name,locality:t.locality,total_points:t.total_points.toLocaleString(),cup_placement_points:i*a,cup_participation_points:s,cup_points_total:e}),l++;var u={};u.placement=r,u.boat_number=t.boat_number,u.captain_name=t.captain_name,t.weights.forEach((function(t){var e=t.name,a=t.weights;u[e]=a})),u.total_points=t.total_points,m.push(u),n=t.total_points,o>0?r+=o:r++}));var u={normal_points:c,normal_weights:m};return u},calculateTeamResults:function(){var t=this,e=[],a=[];return this.signees.forEach((function(t){"-"!==t.team&&null!==t.team&&e.push(t.team)})),e=Object(o["a"])(new Set(e)),e.forEach((function(e){var i=t.signees.filter((function(t){return t.team==e})),s=0,n=[];i.forEach((function(t){n.push(t.captain_name),s+=t.total_points})),1===n.length&&(n.push("-"),n.push("-")),2===n.length&&n.push("-"),a.push({name:e,captain_name_1:n[0],captain_name_2:n[1],captain_name_3:n[2],points:s.toLocaleString()})})),a},calculateTotalWeights:function(){for(var t=this.$store.getters.getFinishedSignees,e=this.$store.getters.getCompetitionFishes,a=0,i=0;i<e.length;i++)e[i].weights=0;return t.forEach((function(t){for(var i=function(i){var s=t.weights.find((function(t){return e[i].name==t.name})).weights;e[i].weights+=parseInt(s),a+=parseInt(s)},s=0;s<e.length;s++)i(s)})),{total_weights:a,competition_fishes:e}},clearInputs:function(){l.a.toast({html:"Pyyhitään inputit ja valinnat..."}),this.inputs.forEach((function(t){t.value=null})),this.competition_boat=null,this.boat_number_input={},this.selected_fish=null,this.biggest_fish=null,this.searched=!1},checkLogin:function(){var t=JSON.parse(localStorage.getItem("user")),e=localStorage.getItem("jwt");null!=t&&null!=e?(this.$store.state.logged_in=!0,1==t.is_admin?this.$store.state.is_admin=!0:this.$store.state.is_admin=!1):(t&&localStorage.removeItem("user"),e&&localStorage.removeItem("jwt"),this.$store.state.logged_in=!1,this.$store.state.is_admin=!1,l.a.toast({html:"Tapahtui virhe... Kirjaudu sisään uudestaan"}))}}},h=d,_=a("2877"),p=a("6544"),v=a.n(p),f=a("0798"),b=a("c6a6"),k=a("8336"),w=a("b0af"),x=a("99d9"),y=a("cc20"),C=a("62ad"),T=a("a523"),$=a("8fea"),S=a("169a"),I=a("ce7e"),V=a("132d"),P=a("8860"),j=a("da13"),N=a("5d23"),D=a("1baa"),L=a("34c3"),B=a("f774"),F=a("0fd9"),E=a("b974"),K=a("2fa4"),R=a("71a3"),A=a("c671"),O=a("fe57"),M=a("aac8"),H=a("9a96"),J=a("8654"),Q=Object(_["a"])(h,i,s,!1,null,null,null);e["default"]=Q.exports;v()(Q,{VAlert:f["a"],VAutocomplete:b["a"],VBtn:k["a"],VCard:w["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VChip:y["a"],VCol:C["a"],VContainer:T["a"],VDataTable:$["a"],VDialog:S["a"],VDivider:I["a"],VIcon:V["a"],VList:P["a"],VListItem:j["a"],VListItemContent:N["a"],VListItemGroup:D["a"],VListItemIcon:L["a"],VListItemSubtitle:N["b"],VListItemTitle:N["c"],VNavigationDrawer:B["a"],VRow:F["a"],VSelect:E["a"],VSpacer:K["a"],VTab:R["a"],VTabItem:A["a"],VTabs:O["a"],VTabsItems:M["a"],VTabsSlider:H["a"],VTextField:J["a"]})},"90ba":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header",{staticStyle:{"margin-bottom":"60px"}}),a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",tile:"",dark:t.$store.getters.getTheme}},[a("v-list",{attrs:{dense:""}},[a("p",[t._v("Navigointi")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[a("v-divider"),t._l(t.items,(function(e,i){return a("div",{key:i},[a("v-list-item",{attrs:{disabled:t.$router.currentRoute.path===e.path},on:{click:function(a){return t.changePage(e.path)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1),a("v-divider")],1)}))],2)],1)],1)],1),a("v-container",[t.errors.length?a("div",{attrs:{id:"errordiv"}},[a("ul",{staticClass:"collection with-header",staticStyle:{border:"1px solid red"}},[a("li",{staticClass:"collection-header",staticStyle:{background:"rgba(0,0,0,0)"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")])],1),t._l(t.errors,(function(e,i){return a("li",{key:i,staticClass:"collection-item",attrs:{id:"error"}},[a("p",{staticClass:"flow-text"},[t._v(t._s(i+1)+". "+t._s(e))])])}))],2)]):t._e(),a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme}},[a("v-card",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.0)"},attrs:{dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"12"}},[a("v-row",[a("v-col",{attrs:{md:"7"}},[a("h1",[t._v("Ilmoittautuminen")])]),a("v-col",{attrs:{md:"5"}},[a("div",{staticClass:"text-center"},[a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("p",{class:{"black-text":!t.$store.getters.getTheme,"white-text":t.$store.getters.getTheme}},[t._v(" Kello/Kilpailuaika ")]),a("v-btn",t._g(t._b({attrs:{text:"",outlined:"",color:"red darken-4",dark:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-timer")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",{staticClass:"headline"}),a("Timedate"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Sulje ")])],1)],1)],1)],1)])],1)],1)],1)],1),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#signing"}},[t._v("Ilmoittautuminen")]),a("v-tab",{attrs:{href:"#signees"}},[t._v("Ilmoittautuneet")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(0,0,0,0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"signing"}},[t.loading_site?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan veneitä... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",[a("v-row",{staticStyle:{"margin-top":"20px"}},[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ilmoittautuminen ")])])],1),t.notification?a("v-row",[a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("v-alert",{staticClass:"flow-text",attrs:{type:"info"}},[t._v(" "+t._s(t.notification)+" ")])],1)],1):t._e(),t.old_info?a("v-row",[a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Numeron ("+t._s(t.old_info.boat_number)+".) Vanhat tiedot ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Kippari:")]),t._v(" "+t._s(t.old_info.captain_name)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Varakippari:")]),t._v(" "+t._s(t.old_info.temp_captain_name)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Seura/Paikkakunta:")]),t._v(" "+t._s(t.old_info.locality)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Lähtöpaikka:")]),t._v(" "+t._s(t.old_info.starting_place)+" ")]),t.isTeamCompetition?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Joukkue:")]),t._v(" "+t._s(t.old_info.team)+" ")]):t._e()]),a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("v-divider",{staticClass:"black"})],1),a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("h3",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Numeron ("+t._s(t.boat_number)+".) Uudet tiedot ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Kippari:")]),t._v(" "+t._s(t.captain_name)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Varakippari:")]),t._v(" "+t._s(t.temp_captain_name)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Seura/Paikkakunta:")]),t._v(" "+t._s(t.locality)+" ")]),a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Lähtöpaikka:")]),t._v(" "+t._s(t.starting_place)+" ")]),t.isTeamCompetition?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[a("b",[t._v("Joukkue:")]),t._v(" "+t._s(t.team)+" ")]):t._e()]),a("v-col",{staticStyle:{"margin-bottom":"50px"},attrs:{md:"8","offset-md":"2"}},[a("v-divider",{staticClass:"black"})],1),a("v-row",[a("v-col",{attrs:{order:"first"}},[a("v-btn",{attrs:{large:"",tile:"",color:"yellow"},on:{click:function(e){return t.overwriteSignee(t.old_info,!1)}}},[a("i",{staticClass:"material-icons left"},[t._v("backspace")]),t._v("Peruuta")])],1),a("v-col",{attrs:{order:"last"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green"},on:{click:function(e){return t.overwriteSignee(t.old_info,!0)}}},[a("i",{staticClass:"material-icons left"},[t._v("check")]),t._v("Päällekirjoita")])],1)],1)],1):t._e(),t.old_info?t._e():a("v-row",{attrs:{id:"signing-inputs"}},[a("v-col",[a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"3","offset-md":"4"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Venekunnan numero","append-outer-icon":"add",maxlength:"6","prepend-icon":"remove",counter:6,rules:t.number_rules,loading:t.loading},on:{"click:append-outer":function(e){t.boat_number>0?t.boat_number++:t.boat_number=1},"click:prepend":function(e){t.boat_number>1?t.boat_number--:t.boat_number=1},paste:function(t){t.preventDefault()},keypress:function(e){return t.isNumber(e,!0)}},model:{value:t.boat_number,callback:function(e){t.boat_number=e},expression:"boat_number"}})],1)],1),a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"2","offset-md":"2"}},[a("v-btn",{attrs:{large:"",block:"",color:"blue"},on:{click:t.searchFromCup}},[a("i",{staticClass:"material-icons left"},[t._v("find_replace")]),t._v("Hae cupista")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"2","offset-md":"2"}},[a("v-btn",{attrs:{large:"",block:"",color:"indigo"},on:{click:t.searchSelected}},[a("i",{staticClass:"material-icons left"},[t._v("find_replace")]),t._v("Hae ilmoittautuneista")])],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Kippari",maxlength:t.maxlength,loading:t.loading,counter:t.maxlength},model:{value:t.captain_name,callback:function(e){t.captain_name=e},expression:"captain_name"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Varakippari",maxlength:t.maxlength,loading:t.loading,counter:t.maxlength},model:{value:t.temp_captain_name,callback:function(e){t.temp_captain_name=e},expression:"temp_captain_name"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Seura/Paikkakunta",id:"locality",maxlength:t.maxlength,loading:t.loading,counter:t.maxlength},model:{value:t.locality,callback:function(e){t.locality=e},expression:"locality"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Lähtöpaikka",id:"starting_place",maxlength:t.maxlength,loading:t.loading,counter:t.maxlength},model:{value:t.starting_place,callback:function(e){t.starting_place=e},expression:"starting_place"}})],1)],1),t.isTeamCompetition?a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"5","offset-md":"3"}},[a("v-combobox",{attrs:{items:t.teams,label:"Valitse, tai kirjoita tiimin nimi",chips:"",maxlength:"40"},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",t._b({key:JSON.stringify(e.item),attrs:{"input-value":e.selected,disabled:e.disabled},on:{"click:close":function(t){return e.parent.selectItem(e.item)}}},"v-chip",e.attrs,!1),[a("v-avatar",{staticClass:"accent white--text",attrs:{left:""},domProps:{textContent:t._s(e.item.slice(0,1).toUpperCase())}}),t._v(" "+t._s(e.item)+" ")],1)]}}],null,!1,3131936958),model:{value:t.team,callback:function(e){t.team=e},expression:"team"}})],1)],1):t._e(),t.old_info?t._e():a("v-row",[t.loading?a("v-row",[a("v-col",{attrs:{md:"12"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tiedot tietokantaan... ")]),a("ProgressBarQuery")],1)],1):a("v-row",{staticStyle:{margin:"40px"}},[a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"red",loading:t.refreshing},on:{click:function(e){return t.deleteSignee(!1,-1)}}},[a("i",{staticClass:"material-icons left"},[t._v("delete_forever")]),t._v("Poista Venekunta")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"yellow",loading:t.refreshing},on:{click:t.clearInputs}},[a("i",{staticClass:"material-icons left"},[t._v("backspace")]),t._v("Pyyhi Kentät")])],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{md:"4"}},[a("v-btn",{attrs:{large:"",tile:"",color:"green",loading:t.refreshing,id:"sbtn"},on:{click:t.validateInfo}},[a("i",{staticClass:"material-icons right"},[t._v("save_alt")]),t._v("Tallenna")])],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[t.refreshing?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Synkronoidaan tietokannan kanssa... ")]):t._e()])],1),a("v-row",[a("v-col",{attrs:{md:"4","offset-md":"4"}},[t.competition_id?a("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",block:"",color:"blue darken-4"},on:{click:function(e){return t.refreshCompetition(t.competition_id)}}},[a("i",{staticClass:"material-icons left"},[t._v("update")]),t._v("Päivitä kilpailun tiedot ")]):t._e()],1)],1)],1)],1)],1)],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"signees"}},[a("v-row",[a("v-col",[a("v-row",{staticStyle:{"margin-top":"20px"}},[a("v-col",{staticClass:"title",attrs:{"offset-md":"4",md:"4"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ilmoittautuneita yhteensä: "),a("b",[t._v(t._s(t.signees.length))])])])],1),a("v-row",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Ilmoittautuneet")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae ilmoittautunutta","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.signees,search:t.search},on:{"click:row":t.rowClick}})],1)],1)],1),t.selected_id?a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[a("v-btn",{attrs:{large:"",tile:"",color:"blue"},on:{click:t.searchSelected}},[a("i",{staticClass:"material-icons left"},[t._v("info")]),t._v("Näytä valitun ilmoittautumistiedot")])],1)],1):a("v-row",[a("v-col",{staticStyle:{margin:"20px 50px"}},[t.signees.length?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Voit katsella venekunnan tietoja myös klikkaamalla haluamaasi riviä taulukosta ja painamalla ilmestyvää nappulaa ")]):a("h3",{staticClass:"center-align",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei ilmoittautuneita! ")])])],1)],1)],1)],1)],1)],1)])],1)},s=[],n=(a("99af"),a("7db0"),a("c740"),a("4160"),a("c975"),a("d81d"),a("fb6a"),a("b0c0"),a("ac1f"),a("5319"),a("159b"),a("96cf"),a("1da1")),o=a("4d5c"),r=a.n(o),l=a("7149"),c=a("51dd"),m=a("b3a7"),u=a("96c7"),g=a("a822"),d={name:"Signing",components:{Timedate:m["a"],Header:u["default"],ProgressBarQuery:g["default"]},data:function(){return{dialog:!1,errors:[],tab:null,boat_number:null,starting_place:null,captain_name:null,temp_captain_name:null,locality:null,team:null,selected_id:null,selected_row:null,id:1,new_signee:null,notification:null,loading:!1,refreshing:!1,loading_site:!1,competition_id:null,old_info:null,signees:[],headers:[{text:"Kilp. Numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Seura/Paikkakunta",value:"locality"}],search:"",cup:[],teams:[],maxlength:40,isTeamCompetition:!1,number_rules:[function(t){return!isNaN(t||"")||"Ei ole numero!"},function(t){return(t||"")>=0||"Numeron pitää olla positiivinen!"}],timer_refresh:null,interval:6e4,selectedItem:2,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}]}},mounted:function(){if(r.a.AutoInit(),this.checkLogin(),null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition"));this.competition_id=t["id"],this.loading_site=!0,this.refreshCompetition(this.competition_id)}location.href="#",location.href="#app"},beforeDestroy:function(){},methods:{changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):r.a.toast({html:"Olet jo tällä sivulla!"})},refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.refreshing=!0,a.prev=1,a.next=4,l["a"].getCompetitions({_id:t});case 4:if(i=a.sent,!i){a.next=17;break}return e.$store.commit("refreshCompetition",i),e.isTeamCompetition=e.$store.getters.isTeamCompetition,e.signees=e.$store.getters.getSignees,e.teams=e.$store.getters.getTeams,e.signees.length?(e.boat_number=Math.max.apply(Math,e.signees.map((function(t){return t.boat_number})))+1,e.id=Math.max.apply(Math,e.signees.map((function(t){return t.id})))+1):(e.boat_number=1,e.id=1),a.next=13,c["a"].getCups({_id:i.cup_id});case 13:s=a.sent,s&&(e.cup=s),a.next=18;break;case 17:console.log("No competition found on database...");case 18:a.next=23;break;case 20:a.prev=20,a.t0=a["catch"](1),console.log(a.t0.message);case 23:e.loading_site=!1,e.refreshing=!1;case 25:case"end":return a.stop()}}),a,null,[[1,20]])})))()},checkLogin:function(){var t=JSON.parse(localStorage.getItem("user")),e=localStorage.getItem("jwt");null!=t&&null!=e?(this.$store.state.logged_in=!0,1==t.is_admin?this.$store.state.is_admin=!0:this.$store.state.is_admin=!1):(t&&localStorage.removeItem("user"),e&&localStorage.removeItem("jwt"),this.$store.state.logged_in=!1,this.$store.state.is_admin=!1,r.a.toast({html:"Tapahtui virhe... Kirjaudu sisään uudestaan"}))},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(e>31&&(e<48||e>57)&&46!==e)t.preventDefault();else{if(46!=e)return!0;t.preventDefault()}},capitalize_words:function(t){return t.replace(/(?:^|\s|['`‘’.-])[^\x60^\x7B-\xDF](?!(\s|$))/g,(function(t){return t.toUpperCase()}))},clearInputs:function(){this.boat_number=null,this.starting_place=null,this.captain_name=null,this.temp_captain_name=null,this.locality=null,this.team=null,this.errors=[],this.old_info=null,this.notification=""},overwriteSignee:function(t,e){if(!0===e?console.log("Overwrite!"):console.log("Don't overwrite!"),e)if(this.$store.commit("removeSignee",t),t.boat_number=parseInt(this.boat_number),t.starting_place=this.starting_place,t.captain_name=this.capitalize_words(this.captain_name),t.temp_captain_name=this.capitalize_words(this.temp_captain_name),t.locality=this.capitalize_words(this.locality),t.team=this.team,this.team.length>40){var a=this.team;a=a.slice(0,40),this.team=a,this.showError("Valitse tiimin nimeksi alle 40 merkkiä pitkä nimi (nimi lyhennetty 40 merkkiin)!")}else-1==this.teams.indexOf(this.team)&&(this.teams.push(this.team),this.$store.commit("setTeams",this.teams)),this.saveToDatabase(t,!0),this.clearInputs(),this.boat_number=Math.max.apply(Math,this.signees.map((function(t){return t.boat_number})))+1,this.notification="Tiedot korvattu uusilla!";else this.notification="Veneen numero asetettu ensimmäiseen vapaaseen paikkaan!",this.boat_number=Math.max.apply(Math,this.signees.map((function(t){return t.boat_number})))+1,this.old_info=null},searchSelected:function(){if(this.notification=null,this.errors=[],"signing"===this.tab)if(this.boat_number){var t=this.searchBoatNumber(this.boat_number);if(t)this.notification="Venekunta löydetty!\n(".concat(t.boat_number,") : ").concat(t.captain_name,", ").concat(t.temp_captain_name),this.selected_id=t.id,this.boat_number=t.boat_number,this.starting_place=t.starting_place,this.captain_name=t.captain_name,this.temp_captain_name=t.temp_captain_name,this.locality=t.locality,this.team=t.team;else{var e=this.boat_number;this.clearInputs(),this.boat_number=e,this.notification="Tällä numerolla ei ole vielä ilmoitettu venekuntaa!",this.selected_id=null}}else this.notification="Syötä venekunnan numero ennen hakemista!";else if(this.selected_id){var a=this.selected_id;if(a){var i=this.$store.getters.getSigneeById(a);if(i)this.notification="Venekunnan tiedot:\n(".concat(i.boat_number,") : ").concat(i.captain_name,", ").concat(i.temp_captain_name),this.boat_number=i.boat_number,this.starting_place=i.starting_place,this.captain_name=i.captain_name,this.temp_captain_name=i.temp_captain_name,this.locality=i.locality,this.team=i.team,this.tab="signing";else{var s=this.boat_number;this.clearInputs(),this.boat_number=s,this.notification="Tällä numerolla ei ole vielä ilmoitettu venekuntaa!",this.selected_id=null}}else this.showError("Tätä venekuntaa ei ole olemassa!?")}else this.showError("Valitse ilmoittautuneideiden listalta venekunta ennen hakemista!")},searchFromCup:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.selected_id=null,t.boat_number?(a=t.cup.signees.find((function(e){return parseInt(t.boat_number)===parseInt(e.boat_number)})),a?(t.notification="Cupista löydetty seuraavat tiedot:",t.captain_name=a.captain_name,t.temp_captain_name=a.temp_captain_name,t.locality=a.locality,t.team=a.team,t.starting_place=a.starting_place):(i=t.boat_number,t.clearInputs(),t.boat_number=i,t.notification="Tällä numerolla ei löydy cupista venekuntaa!")):t.notification="Syötä venekunnan numero ennen hakemista!";case 2:case"end":return e.stop()}}),e)})))()},rowClick:function(t,e){t.id==this.selected_id?(this.selected_id=null,e.select(!1)):(this.selected_row&&this.selected_row.select(!1),this.selected_id=t.id,e.select(!0),this.selected_row=e)},searchBoatNumber:function(t){return this.$store.getters.getSigneeByBoatNumber(parseInt(t))},searchId:function(t){var e=parseInt(t);return this.$store.getters.getSigneeById(e)},showError:function(t){this.errors.push(t),r.a.toast({html:t}),location.href="#",location.href="#app"},saveToDatabase:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return!0===e?a.$store.commit("replaceSignee",t):a.$store.commit("addSignee",t),s=a.cup.signees.findIndex((function(e){return parseInt(t.boat_number)===parseInt(e.boat_number)})),-1===s&&a.cup.signees.push({boat_number:t.boat_number,captain_name:t.captain_name,temp_captain_name:t.temp_captain_name,locality:t.locality,starting_place:t.starting_place}),n=a.$store.getters.getCompetition,a.signees=a.$store.getters.getSignees,n.signees=a.signees,n.state="Ilmoittautuminen",a.$store.commit("refreshCompetition",n),i.prev=8,a.loading=!0,o={$set:{signees:n.signees,state:n.state}},i.next=13,l["a"].updateValues(n._id,o);case 13:return a.loading=!1,o={$set:{signees:a.cup.signees}},i.next=17,c["a"].updateValues(n.cup_id,o);case 17:i.next=22;break;case 19:i.prev=19,i.t0=i["catch"](8),console.error(i.t0.message);case 22:case"end":return i.stop()}}),i,null,[[8,19]])})))()},deleteSignee:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,n,o,c,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.errors=[],t){i.next=6;break}a.boat_number||a.showError("Venekunnan kilpailunumero puuttuu!"),a.errors.length||(a.selected_id?(s=a.searchId(a.selected_id),s&&a.$confirm("Oletko varma että haluat poistaa kilpailijan: (".concat(s.boat_number,"), ").concat(s.captain_name,"?"),"Poista kilpailija","question").then((function(t){t&&a.deleteSignee(t,s.id)})).catch((function(t){t&&console.error(t)}))):(n=a.searchBoatNumber(a.boat_number),n&&a.$confirm("Oletko varma että haluat poistaa kilpailijan: (".concat(n.boat_number,"), ").concat(n.captain_name,"?"),"Poista kilpailija","question").then((function(t){t&&a.deleteSignee(t,n.id)})).catch((function(t){t&&console.error(t)})))),i.next=32;break;case 6:if(o=a.searchId(e),!o){i.next=31;break}return a.$store.commit("removeSignee",o),c=a.$store.getters.getCompetition,a.signees=a.$store.getters.getSignees,c.signees=a.signees,a.$store.commit("refreshCompetition",c),i.prev=13,a.loading=!0,m={$set:{signees:c.signees}},i.next=18,l["a"].updateValues(c._id,m);case 18:a.loading=!1,a.clearInputs(),a.boat_number=Math.max.apply(Math,a.signees.map((function(t){return t.boat_number})))+1,r.a.toast({html:"Poistettu (Nro: ".concat(o.boat_number,", Kippari: ").concat(o.captain_name,") Tiedot!")}),location.href="#",location.href="#signing",i.next=29;break;case 26:i.prev=26,i.t0=i["catch"](13),console.log(i.t0.message);case 29:i.next=32;break;case 31:console.log("Tällä id:llä ei löytynyt kilpailijaa...");case 32:case"end":return i.stop()}}),i,null,[[13,26]])})))()},validateInfo:function(){if(this.notification=null,this.errors=[],this.boat_number||this.showError("Venekunnan kilpailunumero puuttuu!"),this.captain_name?this.captain_name=this.capitalize_words(this.captain_name):this.showError("Kipparin nimi puuttuu!"),this.temp_captain_name?this.temp_captain_name=this.capitalize_words(this.temp_captain_name):this.temp_captain_name="-",this.starting_place||(this.starting_place="-"),this.team||(this.team="-"),this.team.length>40){var t=this.team;t=t.slice(0,40),this.team=t,this.showError("Valitse tiimin nimeksi alle 40 merkkiä pitkä nimi (nimi lyhennetty 40 merkkiin, valittavissa pudotusvalikosta)!")}if(this.locality?this.locality=this.capitalize_words(this.locality):this.showError("Seura/Paikkakunta puuttuu!"),!this.errors.length)if(this.selected_id){var e=this.searchId(this.selected_id);if(e){var a=this.searchBoatNumber(this.boat_number);a&&a.id!=e.id?(console.log("Boat number already exists..."),this.old_info=a):(e.boat_number=parseInt(this.boat_number),e.starting_place=this.starting_place,e.captain_name=this.captain_name,e.temp_captain_name=this.temp_captain_name,e.locality=this.locality,e.team=this.team,this.new_signee=e,this.saveToDatabase(this.new_signee,!0),-1==this.teams.indexOf(this.team)&&(this.teams.push(this.team),this.$store.commit("setTeams",this.teams)),r.a.toast({html:"Päivitetty venekunnan (Nro: ".concat(this.new_signee.boat_number,", Kippari: ").concat(this.new_signee.captain_name,") Tiedot!")}),this.clearInputs(),location.href="#",location.href="#signing",this.boat_number=Math.max.apply(Math,this.signees.map((function(t){return t.boat_number})))+1,this.id=Math.max.apply(Math,this.signees.map((function(t){return t.id})))+1,this.selected_id=null)}}else{var i=this.searchBoatNumber(this.boat_number);if(i&&i.id!=this.id)console.log("Boat number already exists..."),this.notification="Numerolla on jo olemassa venekunta, päällekirjoitetaanko?",this.old_info=i;else{var s=this.$store.getters.getCompetitionFishes,n=[];s.forEach((function(t){var e={name:t.name,weights:0,points:0};n.push(e)})),this.new_signee={id:this.id,boat_number:parseInt(this.boat_number),starting_place:this.starting_place,captain_name:this.captain_name,temp_captain_name:this.temp_captain_name,locality:this.locality,team:this.team,total_points:0,total_weights:0,returned:!1,weights:n},this.saveToDatabase(this.new_signee,!1),-1==this.teams.indexOf(this.team)&&(this.teams.push(this.team),this.$store.commit("setTeams",this.teams)),r.a.toast({html:"Venekunta ilmoitettu kisaan! (Nro: ".concat(this.new_signee.boat_number,", Kippari: ").concat(this.new_signee.captain_name,")")}),this.clearInputs(),location.href="#",location.href="#signing",this.boat_number=Math.max.apply(Math,this.signees.map((function(t){return t.boat_number})))+1,this.id=Math.max.apply(Math,this.signees.map((function(t){return t.id})))+1,this.selected_id=null}}}}},h=d,_=(a("06e3"),a("2877")),p=a("6544"),v=a.n(p),f=a("0798"),b=a("8212"),k=a("8336"),w=a("b0af"),x=a("99d9"),y=a("cc20"),C=a("62ad"),T=a("2b5d"),$=a("a523"),S=a("8fea"),I=a("169a"),V=a("ce7e"),P=a("132d"),j=a("8860"),N=a("da13"),D=a("5d23"),L=a("1baa"),B=a("34c3"),F=a("f774"),E=a("0fd9"),K=a("2fa4"),R=a("71a3"),A=a("c671"),O=a("fe57"),M=a("aac8"),H=a("9a96"),J=a("8654"),Q=Object(_["a"])(h,i,s,!1,null,null,null);e["default"]=Q.exports;v()(Q,{VAlert:f["a"],VAvatar:b["a"],VBtn:k["a"],VCard:w["a"],VCardActions:x["a"],VCardTitle:x["c"],VChip:y["a"],VCol:C["a"],VCombobox:T["a"],VContainer:$["a"],VDataTable:S["a"],VDialog:I["a"],VDivider:V["a"],VIcon:P["a"],VList:j["a"],VListItem:N["a"],VListItemContent:D["a"],VListItemGroup:L["a"],VListItemIcon:B["a"],VListItemTitle:D["c"],VNavigationDrawer:F["a"],VRow:E["a"],VSpacer:K["a"],VTab:R["a"],VTabItem:A["a"],VTabs:O["a"],VTabsItems:M["a"],VTabsSlider:H["a"],VTextField:J["a"]})},b3c3:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header",{staticStyle:{"margin-bottom":"60px"}}),a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400",tile:"",dark:t.$store.getters.getTheme}},[a("v-list",{attrs:{dense:""}},[a("p",[t._v("Navigointi")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[a("v-divider"),t._l(t.items,(function(e,i){return a("div",{key:i},[a("v-list-item",{attrs:{disabled:t.$router.currentRoute.path===e.path},on:{click:function(a){return t.changePage(e.path)}}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1),a("v-divider")],1)}))],2)],1)],1)],1),a("v-container",[a("div",{class:{"container-transparent":!t.$store.getters.getTheme,"container-transparent-dark":t.$store.getters.getTheme}},[a("v-card",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.0)"},attrs:{dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"12"}},[a("v-row",[a("v-col",{attrs:{md:"7"}},[a("h1",[t._v("Tulokset")])]),a("v-col",{attrs:{md:"5"}},[a("div",{staticClass:"text-center"},[a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("p",{class:{"black-text":!t.$store.getters.getTheme,"white-text":t.$store.getters.getTheme}},[t._v(" Kello/Kilpailuaika ")]),a("v-btn",t._g(t._b({attrs:{text:"",outlined:"",color:"red darken-4",dark:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-timer")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",{staticClass:"headline"}),a("Timedate"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Sulje ")])],1)],1)],1)],1)])],1)],1)],1)],1),a("v-row",[a("v-col",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{md:"4","offset-md":"4"}},[a("v-switch",{attrs:{dark:t.$store.getters.getTheme,loading:t.loading,color:"orange darken-3",label:"Tulosten automaattinen päivitys 60s välein"},model:{value:t.intervalSwitch,callback:function(e){t.intervalSwitch=e},expression:"intervalSwitch"}})],1)],1),a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{order:"first"}},[a("router-link",{attrs:{to:"/weighting"}},[a("v-btn",{staticClass:"white--text",attrs:{large:"",rounded:"",color:"blue darken-4"}},[a("i",{staticClass:"material-icons left"},[t._v("fitness_center")]),t._v("Punnitus")])],1)],1),a("v-col",{staticStyle:{"margin-top":"20px"}},[a("router-link",{attrs:{to:"/overview"}},[a("v-btn",{attrs:{large:"",rounded:"",color:"primary"}},[a("i",{staticClass:"material-icons left"},[t._v("info")]),t._v("Kilpailun yleisnäkymä")])],1)],1),t.normal_points.length||t.team_results.length||t.biggest_fishes_results.length||t.biggest_amounts_results.length?a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{order:"last"}},[a("v-dialog",{attrs:{scrollable:"","max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:t.$store.getters.getTheme,large:"",outlined:"",loading:t.loading,disabled:!t.biggest_amounts_results.length||!t.competition}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa kaikki tulokset ")],1)]}}],null,!1,2156986496),model:{value:t.dialog_print,callback:function(e){t.dialog_print=e},expression:"dialog_print"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v("Valitse mitä lataus sisältää")]),a("v-divider"),a("v-card-text",{staticStyle:{height:"300px",width:"100%"}},[a("v-checkbox",{attrs:{label:"Tilastoja",disabled:!t.biggest_amounts_results.length,color:"indigo darken-3",value:"stats"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Normaalikilpailun tulokset",color:"indigo darken-3",value:"normal"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),t.isTeamCompetition?a("v-checkbox",{attrs:{disabled:!t.team_results.length,label:"Tiimikilpailun tulokset",color:"indigo darken-3",value:"team"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}):t._e(),a("v-checkbox",{attrs:{disabled:!t.biggest_fishes_results.length,label:"Suurimmat yksittäiset kalat",color:"indigo darken-3",value:"biggest_fishes"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Suurimmat kalasaaliit",color:"indigo darken-3",value:"biggest_amounts"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length&&!t.biggest_amounts_results.length,label:"Suurimmat yksittäiset kalat / kalasaaliit (Voittajat)",color:"indigo darken-3",value:"biggest_winners"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}})],1),a("v-divider"),a("v-card-actions",[a("v-col",[a("v-btn",{attrs:{outlined:"",color:"red darken-4",text:""},on:{click:function(e){t.dialog_print=!1}}},[t._v("Sulje")])],1),a("v-col",[a("v-btn",{attrs:{outlined:"",color:"green darken-4",text:""},on:{click:t.choosePrints}},[t._v("Lataa")])],1)],1)],1)],1)],1):t._e()],1),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#stats"}},[t._v("Tilastoja")]),a("v-tab",{attrs:{href:"#normal-competition"}},[t._v("Normaalikilpailu")]),t.isTeamCompetition?a("v-tab",{attrs:{href:"#team-competition"}},[t._v("Tiimikilpailu")]):a("v-tab",{attrs:{href:"#team-competition",disabled:""}},[t._v("Ei Tiimikilpailua")]),a("v-tab",{attrs:{href:"#biggest-fishes"}},[t._v("Suurimmat Kalat")]),a("v-tab",{attrs:{href:"#biggest-fish-amounts"}},[t._v("Suurimmat Kalasaaliit")])],1),a("v-tabs-items",{staticStyle:{background:"rgba(0,0,0,0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"stats"}},[t.competition?a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"8"}},[a("v-btn",{staticClass:"white--text",staticStyle:{"margin-bottom":"20px"},attrs:{dark:t.$store.getters.getTheme,large:"",outlined:"",loading:t.loading,disabled:!t.biggest_amounts_results.length},on:{click:function(e){return t.saveStatsAsPDF("Tilastoja")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf")],1)],1)],1):t._e(),t.competition?a("v-row",[t.competition.normal_points.length?a("v-row",{staticStyle:{"min-height":"400px"}},[a("v-col",[t.competition.normal_points.length?a("v-row",{staticStyle:{"min-height":"400px"}},[a("v-col",{staticStyle:{"margin-bottom":"50px"},attrs:{sm:"12",md:"5","offset-md":"1"}},[t.fishes_chart_data?a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-card-title",[a("h4",{staticClass:"headline mb-1"},[t._v(" "+t._s(t.fishes_chart_title)+" ")])]),a("doughnut-chart",{attrs:{"chart-data":t.fishes_chart_data,"chart-id":"fishes_chart",title:t.fishes_chart_title}})],1)]}}],null,!1,1847150614)})],1):t._e()]),a("v-col",{attrs:{sm:"12",md:"5"}},[t.signee_chart_data?a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-card-title",[a("h4",{staticClass:"headline mb-1"},[t._v(" "+t._s(t.signee_chart_title)+" ")])]),a("pie-chart",{attrs:{"chart-data":t.signee_chart_data,"chart-id":"signee_chart",title:t.signee_chart_title}})],1)]}}],null,!1,4159745268)})],1):t._e()])],1):a("v-row",[a("v-col",{attrs:{md:"12"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1):a("v-row",[a("v-col",{attrs:{md:"12"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1):t._e(),t.competition?a("v-row",[a("v-col",{attrs:{md:"10","offset-md":"1"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" Kalalajien määritykset ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[t._l(t.calculated_fish_weights,(function(e,i){return a("div",{key:i},[a("v-list-item",[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(" x "+t._s(e.multiplier))])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on,n=i.attrs;return[a("span",t._g(t._b({},"span",n,!1),s),[a("b",[t._v(t._s(e.minsize)+" cm")])])]}}],null,!0)},[a("span",[t._v(t._s(e.minsize))])])],1),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[t._v(" "+t._s(e.weights?Math.round(100*(e.weights/1e3+Number.EPSILON))/100:0)+" kg ")])],1),a("v-divider")],1)})),a("v-list-item",[a("v-list-item-title",[t._v(" Saalista yhteensä ")]),a("v-list-item-subtitle",[a("h4",{staticClass:"green-text"},[a("b",[t._v(t._s(Math.round(100*(t.calculated_total_weights/1e3+Number.EPSILON))/100)+" kg")])])])],1)],2)],1)],1)],1),a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" Yleisiä tilastoja ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[a("v-list-item",[a("v-list-item-title",[t._v("Cup pistekerroin")]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v("x "+t._s(t.competition.cup_points_multiplier))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-title",[a("b",[t._v("Ilmoittautuneita yhteensä")])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(t.signees.length))]),t._v(" venettä ")])],1),a("v-divider"),a("v-list-item",[a("v-list-item-title",[a("b",[t._v("Saalista saaneita")])]),a("v-divider",{attrs:{vertical:""}}),t.$store.getters.getPointSignees.length?a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(Math.round(t.$store.getters.getPointSignees.length/t.competition.signees.length*100*100)/100)+"% ("+t._s(t.$store.getters.getPointSignees.length)+" / "+t._s(t.signees.length)+")")])]):a("v-list-item-subtitle",{staticClass:"red-text"},[a("b",[t._v("0% (0/0)")])])],1)],1)],1)],1)],1)],1)]}}],null,!1,3985178034)})],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("h2",{staticClass:"error"},[t._v(" Ei saatavilla kilpailun tietoja... (Connection timed out) ")])])],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"normal-competition"}},[a("v-row",[a("v-col",{staticStyle:{"padding-top":"50px","padding-bottom":"20px"},attrs:{md:"10","offset-md":"1"}},[a("v-row",[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.normal_options},on:{input:t.switchNormalResults},model:{value:t.selected_normal,callback:function(e){t.selected_normal=e},expression:"selected_normal"}})],1),t.normal_points.length||t.signees.length&&"Ilmoittautuneet"===t.selected_normal?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{dark:t.$store.getters.getTheme,large:"",outlined:"",loading:t.loading},on:{click:function(e){t.saveAsPDF("Normaalikilpailun tulokset ("+t.selected_normal+")","#normal-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.normal_points.length||t.signees.length&&"Ilmoittautuneet"===t.selected_normal?a("v-row",{staticClass:"row"},[a("v-col",{attrs:{md:"12"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v(" Normaalikilpailu ("+t._s(t.selected_normal)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.results,search:t.search,loading:t.loading},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},"Ilmoittautuneet"===t.selected_normal?{key:"item.boat_number",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.boat_number))])]}}:null,{key:"item.total_points",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.total_points.toLocaleString())+" p")])]}},{key:"item.cup_points_total",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{color:t.getColorPoints(i.cup_points_total)}},[t._v(t._s(i.cup_points_total))])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1)],1),t.isTeamCompetition?a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"team-competition"}},[t.team_results.length?a("v-row",[a("v-col",{staticStyle:{"padding-top":"50px"},attrs:{md:"3","offset-md":"8"}},[a("v-btn",{attrs:{dark:t.$store.getters.getTheme,large:"",outlined:"",loading:t.loading},on:{click:function(e){return t.saveAsPDF("Tiimikilpailun tulokset","#team-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf ")],1)],1)],1):t._e(),a("v-row",[t.team_results.length?a("v-col",{staticStyle:{"padding-bottom":"20px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v("Tiimikilpailu")]),a("v-spacer"),a("v-switch",{staticClass:"black--text",attrs:{color:"indigo darken-3","append-icon":"mdi-weather-night","prepend-icon":"mdi-weather-sunny"},model:{value:t.$store.getters.getTheme,callback:function(e){t.$set(t.$store.getters,"getTheme",e)},expression:"$store.getters.getTheme"}}),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_team,callback:function(e){t.search_team=e},expression:"search_team"}})],1),a("v-data-table",{attrs:{headers:t.team_headers,items:t.team_results,search:t.search_team,loading:t.loading},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.points",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.points.toLocaleString())+" p")])]}}],null,!0)})],1)],1):a("v-col",[t.loading?t._e():a("v-col"),t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])],1)],1)],1):t._e(),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fishes"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_names},on:{input:t.calculateBiggestFishes},model:{value:t.selected_biggest_fish,callback:function(e){t.selected_biggest_fish=e},expression:"selected_biggest_fish"}})],1),t.biggest_fishes_results.length?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{dark:t.$store.getters.getTheme,large:"",outlined:"",loading:t.loading},on:{click:function(e){t.saveAsPDF("Suurimmat kalat ("+t.selected_biggest_fish+")","#biggest-fishes-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.biggest_fishes_results.length?a("v-row",[a("v-col",{staticStyle:{"margin-bottom":"40px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t.results_found_fishes?a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalat ("+t._s(t.selected_biggest_fish)+" "+t._s(t.results_found_fishes)+") ")]):a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalat ("+t._s(t.selected_biggest_fish)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_fishes,callback:function(e){t.search_fishes=e},expression:"search_fishes"}})],1),a("v-data-table",{attrs:{headers:t.biggest_fishes_headers,items:t.biggest_fishes_results,search:t.search_fishes,loading:t.loading},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.name",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.name))])]}},{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fish-amounts"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_amount_names},on:{input:t.calculateBiggestAmounts},model:{value:t.selected_biggest_amount,callback:function(e){t.selected_biggest_amount=e},expression:"selected_biggest_amount"}})],1),t.biggest_amounts_results.length?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{dark:t.$store.getters.getTheme,large:"",outlined:"",loading:t.loading,disabled:!t.biggest_amounts_results.length},on:{click:function(e){t.saveAsPDF("Suurimmat kalat ("+t.selected_biggest_amount+")","#biggest-amounts-table")}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-outline")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.biggest_amounts_results.length?a("v-row",[a("v-col",{staticStyle:{"margin-bottom":"40px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t.results_found_amounts?a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+" "+t._s(t.results_found_amounts)+") ")]):a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+") ")]),a("v-spacer"),a("v-switch",{staticClass:"black--text",attrs:{color:"indigo darken-3","append-icon":"mdi-weather-night","prepend-icon":"mdi-weather-sunny"},model:{value:t.$store.getters.getTheme,callback:function(e){t.$set(t.$store.getters,"getTheme",e)},expression:"$store.getters.getTheme"}}),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_amounts,callback:function(e){t.search_amounts=e},expression:"search_amounts"}})],1),a("v-data-table",{attrs:{headers:t.biggest_amounts_headers,items:t.biggest_amounts_results,search:t.search_amounts,loading:t.loading},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.name",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.name))])]}},{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1),t.competition?a("div",[t.loading?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään... ")])]),a("ProgressBarQuery")],1):a("v-row",[a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{staticClass:"white--text",attrs:{large:"",tile:"",color:t.competition.isPublic?"grey darken-4":"green darken-4",loading:t.updating},on:{click:function(e){return t.publishCompetition(t.competition.isPublic)}}},[t.competition.isPublic?a("div",[a("v-icon",[t._v("mdi-incognito")]),t._v(" Aseta kilpailu salaiseksi ")],1):a("div",[a("v-icon",{attrs:{color:"green"}},[t._v("mdi-publish")]),t._v(" Aseta kilpailu julkiseksi ")],1)])],1),a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",tile:"",color:"blue darken-4",loading:t.updating},on:{click:function(e){return t.refreshCompetition(t.competition._id)}}},[a("i",{staticClass:"material-icons left"},[t._v("update")]),t._v("Päivitä tulokset ")])],1),a("v-col",{staticStyle:{"margin-top":"20px"}},[a("v-btn",{attrs:{large:"",tile:"",color:t.competition.isFinished?"yellow":"green darken-3",loading:t.updating},on:{click:function(e){return t.endCompetition(t.competition.isFinished)}}},[t.competition.isFinished?a("div",[a("v-icon",{attrs:{color:"red darken-2"}},[t._v("mdi-cancel")]),t._v(" Aseta kilpailu keskeneräiseksi ")],1):a("div",[a("v-icon",{attrs:{color:"yellow"}},[t._v("mdi-trophy")]),t._v(" Aseta kilpailu päättyneeksi ")],1)])],1)],1)],1):t._e()],1)])],1)},s=[],n=(a("4de4"),a("4160"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),o=a("4d5c"),r=a.n(o),l=a("7149"),c=a("b3a7"),m=a("96c7"),u=a("a822"),g=a("748a"),d=a("e5e9"),h=a("e0b1"),_={name:"Results",components:{Timedate:c["a"],Header:m["default"],ProgressBarQuery:u["default"],PieChart:g["a"],DoughnutChart:d["a"]},data:function(){return{dialog_clock:!1,dialog:!1,dialog_print:!1,loading:!1,updating:!1,tab:null,signees:[],fish_names:[],fish_amount_names:[],table_fish_names:[],results:[],normal_points:[],normal_weights:[],team_results:[],biggest_fishes:{},biggest_fishes_results:[],selected_biggest_fish:null,biggest_amounts:{},biggest_amounts_results:[],selected_biggest_amount:null,results_found_fishes:"",results_found_amounts:"",competition:null,isTeamCompetition:!0,calculated_total_weights:null,calculated_fish_weights:null,selected_normal:null,fishes_chart:null,signees_chart:null,timer_refresh:null,interval:6e4,normal_options:["Pisteet","Kalat","Ilmoittautuneet"],headers:[],biggest_fishes_headers:[],biggest_amounts_headers:[],normal_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Tulos",value:"total_points"},{text:"Cup sij. pisteet",value:"cup_placement_points"},{text:"Cup osal. pisteet",value:"cup_participation_points"},{text:"Yht.",value:"cup_points_total"}],signee_headers:[],team_headers:[{text:"Sijoitus",value:"placement"},{text:"Tiimi",value:"name"},{text:"Jäsen 1",value:"captain_name_1"},{text:"Jäsen 2",value:"captain_name_2"},{text:"Jäsen 3",value:"captain_name_3"},{text:"Pisteet",value:"points"}],winner_headers:[{text:"Kalalaji",value:"name"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],biggest_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],search:"",search_team:"",search_fishes:"",search_amounts:"",selected_print:[],intervalSwitch:!1,signee_chart_data:null,fishes_chart_data:null,fishes_chart_title:null,signee_chart_title:null,selectedItem:4,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}]}},watch:{intervalSwitch:function(t){var e=this;if(t){var a=JSON.parse(localStorage.getItem("competition")),i=a["id"];this.timer_refresh=setInterval((function(){return e.refreshCompetition(i)}),this.interval),r.a.toast({html:"Automaattinen päivitys käytössä!"})}else clearInterval(this.timer_refresh),r.a.toast({html:"Automaattinen päivitys pois käytöstä!"})}},created:function(){this.saveAllAsPDF=h["a"].saveAllAsPDF,this.saveStatsAsPDF=h["a"].saveStatsAsPDF,this.saveAsPDF=h["a"].saveAsPDF,this.dictToArray=h["a"].dictToArray,this.capitalize_words=h["a"].capitalize_words,this.replaceAll=h["a"].replaceAll,this.formatDate=h["a"].formatDate,this.range=h["a"].range,this.getColorPoints=h["a"].getColorPoints,this.getColor=h["a"].getColor,this.drawCharts=h["a"].drawCharts,this.sortDict=h["a"].sortDict,this.onafterprint=h["a"].onafterprint,this.onbeforeprint=h["a"].onbeforeprint},mounted:function(){if(r.a.AutoInit(),this.checkLogin(),null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition")),e=t["id"];this.refreshCompetition(e)}location.href="#",location.href="#app"},beforeDestroy:function(){clearInterval(this.timer_refresh)},methods:{changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):r.a.toast({html:"Olet jo tällä sivulla!"})},choosePrints:function(){this.dialog_print=!1,this.saveAllAsPDF(this.tab)},refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.fish_names=[],e.fish_amount_names=[],e.table_fish_names=[],e.signee_headers=[{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Lähtöpaikka",value:"starting_place"}],i=1,a.prev=6,a.next=9,l["a"].getCompetitions({_id:t});case 9:s=a.sent,s?(e.competition=s,e.$store.commit("refreshCompetition",e.competition),e.isTeamCompetition=e.$store.getters.isTeamCompetition,e.signees=e.$store.getters.getResultSignees,e.selected_normal="Pisteet",e.normal_points=e.competition.normal_points,e.normal_weights=e.competition.normal_weights,e.isTeamCompetition&&(e.signee_headers.push({text:"Tiimi",value:"team"}),e.team_results=e.competition.team_results,n=-1,o=-1,e.team_results.forEach((function(t){n===t.points?t.placement=o:(t.placement=o=i,n=t.points),i++}))),e.biggest_fishes=e.$store.getters.getBiggestFishes,e.biggest_amounts=e.$store.getters.getBiggestAmounts,e.calculated_total_weights=e.$store.getters.getCompetitionTotalWeights,e.calculated_fish_weights=e.competition.fishes,c=e.$store.getters.getCompetitionFishes,e.fish_names.push("Voittajat"),e.fish_amount_names.push("Voittajat"),c.forEach((function(t){e.fish_names.push(t.name),e.fish_amount_names.push(t.name),e.table_fish_names.push(t.name)})),e.calculateAll(),e.fishes_chart&&e.signees_chart&&(e.fishes_chart.destroy(),e.signees_chart.destroy()),e.$nextTick((function(){return e.drawCharts(e.tab)})),e.normal_points.length?(e.results=e.normal_points,e.headers=e.normal_headers):(e.results=e.$store.getters.getSignees,e.headers=e.signee_headers,e.selected_normal="Ilmoittautuneet"),r.a.toast({html:"Tiedot ajantasalla!"})):(e.signees=[],e.biggest_fishes=[],e.biggest_amounts=[],console.log("No competition found on database...")),a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](6),console.error(a.t0.message);case 16:e.loading=!1;case 17:case"end":return a.stop()}}),a,null,[[6,13]])})))()},publishCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.competition.isPublic=!t,i={$set:{isPublic:e.competition.isPublic}},e.updateToDatabase(e.competition,i);case 3:case"end":return a.stop()}}),a)})))()},endCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.competition.isFinished=!t,e.competition.isFinished?e.competition.state="Päättynyt":e.competition.state="Kesken",i={$set:{isFinished:e.competition.isFinished}},e.updateToDatabase(e.competition,i);case 4:case"end":return a.stop()}}),a)})))()},updateToDatabase:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a.$store.commit("refreshCompetition",a.competition),a.updating=!0,t.next=5,l["a"].updateValues(a.competition._id,e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0.message);case 10:a.updating=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},calculateAll:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.calculateBiggestFishes(),t.calculateBiggestAmounts();case 2:case"end":return e.stop()}}),e)})))()},switchNormalResults:function(){var t=this;this.selected_normal||(this.selected_normal="Pisteet"),"Pisteet"===this.selected_normal&&(this.headers=this.normal_headers,this.results=this.normal_points),"Kalat"===this.selected_normal&&(this.headers=[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"}],this.results=this.normal_weights,this.table_fish_names.forEach((function(e){t.headers.push({text:e,value:e})})),this.headers.push({text:"Tulos",value:"total_points"})),"Ilmoittautuneet"===this.selected_normal&&(this.headers=this.signee_headers,this.results=this.$store.getters.getSignees)},calculateBiggestFishes:function(){var t=this.biggest_fishes,e=1;if(this.results_found_fishes=null,this.selected_biggest_fish||(this.selected_biggest_fish="Voittajat"),"Voittajat"===this.selected_biggest_fish)this.biggest_fishes_headers=this.winner_headers,this.biggest_fishes,this.biggest_fishes_results=this.sortDict(t);else{this.biggest_fishes_headers=this.biggest_headers;var a=[];t[this.selected_biggest_fish]?(a=t[this.selected_biggest_fish].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),this.results_found_amounts=""):this.results_found_fishes="- Ei tuloksia";var i=-1,s=-1;this.biggest_fishes_results=a,this.biggest_fishes_results.forEach((function(t){i===t.weight?t.placement=s:(t.placement=s=e,i=t.weight),e++}))}},calculateBiggestAmounts:function(){var t=this.biggest_amounts,e=1;if(this.results_found_amount="",this.selected_biggest_amount||(this.selected_biggest_amount="Voittajat"),"Voittajat"===this.selected_biggest_amount)this.biggest_amounts_headers=this.winner_headers,this.biggest_amounts,this.biggest_amounts_results=this.sortDict(t);else{this.biggest_amounts_headers=this.biggest_headers;var a=[];t[this.selected_biggest_amount]?(a=t[this.selected_biggest_amount].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),a=a.filter((function(t){return parseInt(t.weight)>0})),this.results_found_amounts=""):this.results_found_amount="- Ei tuloksia";var i=-1,s=-1;this.biggest_amounts_results=a,this.biggest_amounts_results.forEach((function(t){i===t.weight?t.placement=s:(t.placement=s=e,i=t.weight),e++}))}},checkLogin:function(){var t=JSON.parse(localStorage.getItem("user")),e=localStorage.getItem("jwt");null!=t&&null!=e?(this.$store.state.logged_in=!0,1==t.is_admin?this.$store.state.is_admin=!0:this.$store.state.is_admin=!1):(t&&localStorage.removeItem("user"),e&&localStorage.removeItem("jwt"),this.$store.state.logged_in=!1,this.$store.state.is_admin=!1,r.a.toast({html:"Tapahtui virhe... Kirjaudu sisään uudestaan"}))}}},p=_,v=a("2877"),f=a("6544"),b=a.n(f),k=a("8336"),w=a("b0af"),x=a("99d9"),y=a("ac7c"),C=a("cc20"),T=a("62ad"),$=a("a523"),S=a("8fea"),I=a("169a"),V=a("ce7e"),P=a("ce87"),j=a("132d"),N=a("8860"),D=a("da13"),L=a("5d23"),B=a("1baa"),F=a("34c3"),E=a("f774"),K=a("0fd9"),R=a("b974"),A=a("2fa4"),O=a("b73d"),M=a("71a3"),H=a("c671"),J=a("fe57"),Q=a("aac8"),z=a("9a96"),W=a("8654"),Y=a("3a2f"),q=Object(v["a"])(p,i,s,!1,null,"4e2e7aac",null);e["default"]=q.exports;b()(q,{VBtn:k["a"],VCard:w["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VCheckbox:y["a"],VChip:C["a"],VCol:T["a"],VContainer:$["a"],VDataTable:S["a"],VDialog:I["a"],VDivider:V["a"],VHover:P["a"],VIcon:j["a"],VList:N["a"],VListItem:D["a"],VListItemContent:L["a"],VListItemGroup:B["a"],VListItemIcon:F["a"],VListItemSubtitle:L["b"],VListItemTitle:L["c"],VNavigationDrawer:E["a"],VRow:K["a"],VSelect:R["a"],VSpacer:A["a"],VSwitch:O["a"],VTab:M["a"],VTabItem:H["a"],VTabs:J["a"],VTabsItems:Q["a"],VTabsSlider:z["a"],VTextField:W["a"],VTooltip:Y["a"]})}}]);
//# sourceMappingURL=about~7c5ad5f5.ee95d025.js.map