{"version":3,"sources":["webpack:///./src/components/layout/Timedate.vue?0d0c","webpack:///./src/components/layout/Timedate.vue?09ed","webpack:///src/components/layout/Timedate.vue","webpack:///./src/components/layout/Timedate.vue?6f99","webpack:///./src/components/layout/Timedate.vue?7886"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","date","competition_state","_e","timer_string","clock","staticRenderFns","name","data","competition","competition_started","competition_ended","calculated_time","date_interval","clock_interval","remaining_interval","timer","timer_date","timer_clock","amount","computed","competitionChosen","localStorage","getItem","mounted","setTime","setDate","setInterval","id","comp","start_date","end_date","remainingTime","clearInterval","beforeDestroy","methods","document","getElementById","m","checkZeros","s","day","month","timeLeft","formatted","time","component","VCol","VRow"],"mappings":"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","file":"js/chunk-73afc087.ea4c45a9.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timedate.vue?vue&type=style&index=0&id=2ea74b42&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timedate.vue?vue&type=style&index=0&id=2ea74b42&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{staticClass:\"valign-wrapper time\"},[_c('v-col',{attrs:{\"md\":\"3\"}},[_c('h4',{attrs:{\"id\":\"date\"}},[_vm._v(_vm._s(_vm.date))])]),_c('v-col',{attrs:{\"md\":\"6\"}},[(_vm.competitionChosen)?_c('p',{staticClass:\"flow-text\",attrs:{\"id\":\"comp-state\"}},[_vm._v(\" \"+_vm._s(_vm.competition_state)+\" \")]):_vm._e(),(_vm.competitionChosen)?_c('h4',{attrs:{\"id\":\"comp-left\"}},[_vm._v(\" \"+_vm._s(_vm.timer_string)+\" \")]):_vm._e()]),_c('v-col',{attrs:{\"md\":\"3\"}},[_c('h4',{attrs:{\"id\":\"clock\"}},[_vm._v(_vm._s(_vm.clock))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-row class=\"valign-wrapper time\">\r\n    <v-col md=\"3\">\r\n      <h4 id=\"date\">{{ date }}</h4>\r\n    </v-col>\r\n    <v-col md=\"6\">\r\n      <p id=\"comp-state\" class=\"flow-text\" v-if=\"competitionChosen\">\r\n        {{ competition_state }}\r\n      </p>\r\n      <h4 id=\"comp-left\" v-if=\"competitionChosen\">\r\n        {{ timer_string }}\r\n      </h4>\r\n    </v-col>\r\n    <v-col md=\"3\">\r\n      <h4 id=\"clock\">{{ clock }}</h4>\r\n    </v-col>\r\n  </v-row>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  name: \"Timedate\",\r\n  data() {\r\n    return {\r\n      competition: null,\r\n      competition_started: false,\r\n      competition_ended: false,\r\n      calculated_time: null,\r\n      date_interval: 100,\r\n      clock_interval: 100,\r\n      remaining_interval: 100,\r\n      clock: null,\r\n      date: null,\r\n      timer: null,\r\n      timer_date: null,\r\n      timer_clock: null,\r\n      timer_string: \"\",\r\n      competition_state: \"\",\r\n      amount: 40,\r\n    };\r\n  },\r\n  computed: {\r\n    competitionChosen() {\r\n      return localStorage.getItem(\"competition\") != null;\r\n    },\r\n  },\r\n  mounted() {\r\n    //TODO Fix timers to that they are in sync\r\n    moment.locale(\"fi\");\r\n    this.setTime();\r\n    this.setDate();\r\n    this.timer_clock = setInterval(this.setTime, this.clock_interval);\r\n    this.timer_date = setInterval(this.setDate, this.date_interval);\r\n\r\n    if (localStorage.getItem(\"competition\") != null) {\r\n      let comp = JSON.parse(localStorage.getItem(\"competition\"));\r\n      this.competition = {\r\n        id: comp[\"id\"],\r\n        start_date: comp[\"start_date\"],\r\n        end_date: comp[\"end_date\"],\r\n      };\r\n      this.remainingTime();\r\n      this.timer = setInterval(this.remainingTime, this.remaining_interval);\r\n    } else {\r\n      this.timer_string = \"\";\r\n      clearInterval(this.timer);\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.timer);\r\n    clearInterval(this.timer_clock);\r\n    clearInterval(this.timer_date);\r\n  },\r\n  methods: {\r\n    setTime: function() {\r\n      if (document.getElementById(\"clock\")) {\r\n        // Get time, parse it and change the text of the clock\r\n        const today = new Date();\r\n        let h = today.getHours();\r\n        let m = today.getMinutes();\r\n        let s = today.getSeconds();\r\n        m = this.checkZeros(m);\r\n        s = this.checkZeros(s);\r\n        this.clock = `${h}:${m}:${s}`;\r\n        this.clock_interval = 300;\r\n        //document.getElementById('clock').innerText = h + \":\" + m + \":\" + s;\r\n      } else {\r\n        clearInterval(this.timer_clock);\r\n      }\r\n    },\r\n    setDate: function() {\r\n      if (document.getElementById(\"date\")) {\r\n        const today = new Date();\r\n        let day = today.getDate();\r\n        let month = today.getMonth() + 1; //month is zero indexed\r\n        let year = today.getFullYear();\r\n        day = this.checkZeros(day);\r\n        month = this.checkZeros(month);\r\n        this.date = `${day}.${month}.${year}`;\r\n        this.date_interval = 60000;\r\n      } else {\r\n        clearInterval(this.timer_date);\r\n      }\r\n    },\r\n    remainingTime: function() {\r\n      if (document.getElementById(\"comp-left\")) {\r\n        if (this.competition) {\r\n          let start_dateTime = moment(this.competition.start_date);\r\n          let end_dateTime = moment(this.competition.end_date);\r\n\r\n          let timeLeft = 0;\r\n          let formatted = \"\";\r\n          this.competition_started = moment(moment()).isAfter(start_dateTime);\r\n          this.competition_ended = moment(moment()).isAfter(end_dateTime);\r\n\r\n          if (!this.competition_started && !this.competition_ended) {\r\n            timeLeft = moment.duration(start_dateTime.diff(moment())); // get difference between now and timestamp\r\n            formatted =\r\n              this.checkZeros(timeLeft.hours()) +\r\n              \"h \" +\r\n              this.checkZeros(timeLeft.minutes()) +\r\n              \"m \" +\r\n              this.checkZeros(timeLeft.seconds()) +\r\n              \"s\";\r\n\r\n            if (timeLeft < 60000 * 60 * 24) {\r\n              // under an 24 hours\r\n              this.competition_state = \"Kilpailun alkuun\";\r\n              this.timer_string = formatted;\r\n            } else {\r\n              this.calculated_time = moment(moment()).to(start_dateTime); // Time to competition start\r\n              this.competition_state = \"Kilpailu alkaa\";\r\n              this.timer_string = this.calculated_time;\r\n            }\r\n          } else if (this.competition_started && !this.competition_ended) {\r\n            timeLeft = moment.duration(end_dateTime.diff(moment())); // get difference between now and timestamp\r\n            let days = timeLeft.days() ? `${timeLeft.days()}d ` : ` `;\r\n            formatted =\r\n              days +\r\n              this.checkZeros(timeLeft.hours()) +\r\n              \"h \" +\r\n              this.checkZeros(timeLeft.minutes()) +\r\n              \"m \" +\r\n              this.checkZeros(timeLeft.seconds()) +\r\n              \"s\";\r\n\r\n            this.remaining_interval = 300;\r\n            this.competition_state = \"Kilpailua jäljellä\";\r\n            this.timer_string = `${formatted}`;\r\n          } else {\r\n            this.timer_string = null;\r\n            this.competition_state = `Kilpailu päättynyt!`;\r\n          }\r\n        }\r\n      } else {\r\n        clearInterval(this.timer);\r\n      }\r\n    },\r\n    checkZeros: function(time) {\r\n      if (time < 10) {\r\n        time = \"0\" + time;\r\n      }\r\n      return time;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.valign-wrapper.time {\r\n  margin-top: 50px;\r\n  min-height: 100px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timedate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timedate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Timedate.vue?vue&type=template&id=2ea74b42&scoped=true&\"\nimport script from \"./Timedate.vue?vue&type=script&lang=js&\"\nexport * from \"./Timedate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Timedate.vue?vue&type=style&index=0&id=2ea74b42&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ea74b42\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VRow})\n"],"sourceRoot":""}