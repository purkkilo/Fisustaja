(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about~b1bc70ec"],{2226:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",[a("CompetitionNavigation")],1),a("v-col",[a("Timedate")],1)],1),a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[t.errors.length?a("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),a("v-list",t._l(t.errors,(function(e,i){return a("v-list-item",{key:i},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),t.loading?a("div",[a("v-row",[a("v-col",[a("v-card",{staticStyle:{background:"transparent","text-align":"center"},attrs:{elevation:"2",outlined:"",dark:t.$store.getters.getTheme}},[a("h1",{staticClass:"text-center"},[t._v("Valmistellaan kilpailua...")]),a("ProgressBarQuery")],1)],1)],1)],1):a("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[a("v-row",{attrs:{align:"center"}},[a("v-col",[a("h1",{staticStyle:{margin:"30px"}},[t._v("Yleisnäkymä")])])],1),a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" "+t._s(t.competition.name)+" ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-calendar-today")])],1),a("v-list-item-title",[t._v("Päivämäärä")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.formatted_start_date)+" - "+t._s(t.formatted_end_date))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-clock-time-four")])],1),a("v-list-item-title",[t._v("Kilpailuaika")]),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("b",[t._v(t._s(t.competition.start_time)+" - "+t._s(t.competition.end_time))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"green darken-4"}},[t._v("mdi-state-machine")])],1),a("v-list-item-title",[t._v("Tila")]),a("v-list-item-subtitle",{class:{"green-text":"Kaikki maalissa"===t.competition.state,"blue-text":"Kaikki maalissa"!==t.competition.state}},[a("b",[t._v(t._s(t.competition.state))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[t._v("mdi-card-account-details-outline")])],1),a("v-list-item-title",[t._v("Ilmoittautuneita")]),a("v-list-item-subtitle",{class:{"green-text":t.competition.signees.length,"red-text":!t.competition.signees.length}},[a("b",[t._v(t._s(t.competition.signees.length))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"blue darken-4"}},[t._v("mdi-water-alert")])],1),a("v-list-item-title",[t._v("Vielä vesillä")]),t.competition.signees.length?a("v-list-item-subtitle",{class:{"green-text":!t.competition.signees.length-t.$store.getters.getFinishedSignees.length,"red-text":t.competition.signees.length}},[a("b",[t._v(t._s(t.hasNotReturnedPercentage)+"%")]),t._v(" ("+t._s(t.competition.signees.length-t.$store.getters.getFinishedSignees.length)+" / "+t._s(t.competition.signees.length)+") ")]):a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v("Ketään ei vielä vesillä!")])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"blue"}},[t._v("mdi-fish")])],1),a("v-list-item-title",[t._v("Saalista saaneita")]),t.competition.signees.length?a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(t.hasGottenFishPercentage)+"%")]),t._v(" ("+t._s(t.$store.getters.getPointSignees.length)+" / "+t._s(t.competition.signees.length)+") ")]):a("v-list-item-subtitle",{staticClass:"red-text"},[a("b",[t._v("Ei vielä ilmoittautuneita!")])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-icon",[a("v-icon",{attrs:{color:"yellow darken-4"}},[t._v("mdi-seal")])],1),a("v-list-item-title",[t._v("Kalaa saatu yhteensä")]),t.competition.signees.length?a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(t.competition.total_weights/1e3)+" kg")])]):a("v-list-item-subtitle",{staticClass:"red-text"},[a("b",[t._v("Ei vielä ilmoittautuneita!")])])],1)],1)],1)],1)],1)],1)],1)],1)},s=[],n=a("1da1"),o=(a("96cf"),a("99af"),a("7149")),r=a("b3a7"),l=a("7ba5"),c=a("a822"),u={name:"Overview",components:{Timedate:r["a"],ProgressBarQuery:c["default"],CompetitionNavigation:l["a"]},data:function(){return{competition:null,loading:!1,errors:[],formatted_start_date:null,formatted_end_date:null,dialog:!1,hasNotReturnedPercentage:0,hasGottenFishPercentage:0,selectedItem:0,items:[{text:"Yleisnäkymä",icon:"mdi-desktop-mac-dashboard",path:"/overview"},{text:"Määritykset",icon:"mdi-tune",path:"/comp-settings"},{text:"Ilmoittautuminen",icon:"mdi-draw",path:"/signing"},{text:"Punnitus",icon:"mdi-dumbbell",path:"/weighting"},{text:"Tulokset",icon:"mdi-seal",path:"/results"}]}},created:function(){if(null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition")),e=t["id"];this.refreshCompetition(e)}else console.log("No competition in localstorage!")},mounted:function(){if(location.href="#",location.href="#app",null!=localStorage.getItem("competition")){var t=JSON.parse(localStorage.getItem("competition")),e=t["id"];this.refreshCompetition(e)}else console.log("No competition in localstorage!")},methods:{refreshCompetition:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.errors=[],a.prev=2,a.next=5,o["a"].getCompetitions({_id:t});case 5:i=a.sent,i?(e.competition=i,e.$store.commit("refreshCompetition",e.competition),localStorage.setItem("cup",e.competition.cup_id),s=e.$moment(e.competition.start_date),n=e.$moment(e.competition.end_date),e.formatted_start_date="".concat(s.date(),".").concat(s.month()+1,".").concat(s.year()),e.formatted_end_date="".concat(n.date(),".").concat(n.month()+1,".").concat(n.year()),e.hasGottenFishPercentage=Math.round(e.$store.getters.getPointSignees.length/e.competition.signees.length*100*100)/100,e.hasNotReturnedPercentage=Math.round((e.competition.signees.length-e.$store.getters.getFinishedSignees.length)/i.signees.length*100*100)/100):e.competition={name:"Kilpailua ei löytynyt tietokannasta..."},a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),console.log(a.t0.message);case 12:e.loading=!1;case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))()}}},d=u,m=a("2877"),p=a("6544"),h=a.n(p),g=a("0798"),_=a("b0af"),v=a("99d9"),f=a("62ad"),b=a("a523"),k=a("ce7e"),x=a("132d"),w=a("8860"),y=a("da13"),C=a("5d23"),$=a("34c3"),S=a("0fd9"),T=Object(m["a"])(d,i,s,!1,null,null,null);e["default"]=T.exports;h()(T,{VAlert:g["a"],VCard:_["a"],VCardTitle:v["c"],VCol:f["a"],VContainer:b["a"],VDivider:k["a"],VIcon:x["a"],VList:w["a"],VListItem:y["a"],VListItemContent:C["a"],VListItemIcon:$["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"],VRow:S["a"]})},"38eb":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PublicNavigation"),a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[a("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[a("v-row",[a("v-dialog",{attrs:{width:"500"},model:{value:t.pdfDialog,callback:function(e){t.pdfDialog=e},expression:"pdfDialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t._v(" Pdf Asetukset ")]),a("v-card-text",[a("v-checkbox",{attrs:{label:"Pfd Vaakatasossa"},model:{value:t.isLandscape,callback:function(e){t.isLandscape=e},expression:"isLandscape"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"yellow",text:""},on:{click:function(e){t.pdfDialog=!1}}},[t._v(" Peruuta ")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.pdfDialog=!1,t.pdfWrapper()}}},[t._v(" Lataa ")])],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("h1",[t._v("Kilpailujen tuloksia")])])],1),t.competitions.length?a("v-row",{staticClass:"scroll_table"},[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",items:t.competitions,"item-text":"select","item-value":"_id",label:"Valitse näytettävä kilpailu",loading:t.loading,outlined:"","return-object":"","single-line":""},on:{input:t.pickCompetition},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-list-item-icon",[e.item.isFinished?a("v-icon",{attrs:{color:"green"}},[t._v("mdi-trophy")]):a("v-icon",{attrs:{color:"yellow"}},[t._v("mdi-trophy")])],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.item.name+", "+e.item.locality)}}),a("v-list-item-subtitle",{staticClass:"green--text",domProps:{innerHTML:t._s(e.item.cup_name+" ("+t.$moment(e.item.start_date).format("YYYY")+")")}}),a("v-list-item-subtitle",{staticClass:"blue--text",domProps:{innerHTML:t._s(t.$moment(e.item.start_date).format("DD.MM.YYYY"))}}),e.item.isFinished?t._e():a("v-list-item-subtitle",[t._v("Kesken!")])],1)]}}],null,!1,1041930679),model:{value:t.selected_competition,callback:function(e){t.selected_competition=e},expression:"selected_competition"}})],1)],1):t._e(),a("v-row",{staticStyle:{"margin-bottom":"20px"},attrs:{align:"center",justify:"center"}},[a("v-col",[a("v-btn",{staticClass:"black--text",attrs:{large:"",outlined:"",color:"yellow",disabled:!t.competition},on:{click:t.cancelSelection}},[a("v-icon",[t._v("mdi-cancel")]),t._v("Peruuta valinta ")],1)],1),a("v-col",[a("v-dialog",{attrs:{scrollable:"","max-width":"300px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:t.$store.getters.getTheme,large:"",color:"red lighten-2",outlined:"",loading:t.loading_competition,disabled:!t.biggest_amounts_results.length||!t.competition}},"v-btn",s,!1),i),[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa kaikki tulokset ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-text",{staticStyle:{"margin-top":"20px"}},[a("h1",[t._v("PDF Asetukset")]),a("v-checkbox",{attrs:{label:"Pfd Vaakatasossa"},model:{value:t.isLandscape,callback:function(e){t.isLandscape=e},expression:"isLandscape"}})],1),a("v-card-title",[t._v("Valitse mitä lataus sisältää")]),a("v-divider"),a("v-card-text",{staticStyle:{height:"300px",width:"100%"}},[a("v-checkbox",{attrs:{label:"Tilastoja",disabled:!t.biggest_amounts_results.length,color:"indigo darken-3",value:"stats"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Normaalikilpailun tulokset",color:"indigo darken-3",value:"normal"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),t.isTeamCompetition?a("v-checkbox",{attrs:{disabled:!t.team_results.length,label:"Tiimikilpailun tulokset",color:"indigo darken-3",value:"team"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}):t._e(),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Suurimmat kalat ja kalasaaliit (Kaikki kalat samassa taulukossa)",color:"indigo darken-3",value:"all_biggest"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_fishes_results.length,label:"Suurimmat yksittäiset kalat (Kalalajeittain taulukossa)",color:"indigo darken-3",value:"biggest_fishes"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length,label:"Suurimmat kalasaaliit (Kalalajeittain taulukossa)",color:"indigo darken-3",value:"biggest_amounts"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}}),a("v-checkbox",{attrs:{disabled:!t.biggest_amounts_results.length&&!t.biggest_amounts_results.length,label:"Suurimmat yksittäiset kalat / kalasaaliit (Voittajat)",color:"indigo darken-3",value:"biggest_winners"},model:{value:t.selected_print,callback:function(e){t.selected_print=e},expression:"selected_print"}})],1),a("v-divider"),a("v-card-actions",[a("v-col",[a("v-btn",{attrs:{outlined:"",color:"red darken-4",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Sulje")])],1),a("v-col",[a("v-btn",{attrs:{outlined:"",color:"green darken-4",text:""},on:{click:t.choosePrints}},[t._v("Lataa")])],1)],1)],1)],1)],1)],1),a("v-tabs",{attrs:{"background-color":"blue lighten-2",color:"blue darken-4",grow:"","show-arrows":"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"blue darken-4"}}),a("v-tab",{attrs:{href:"#stats"}},[t._v("Tilastoja")]),a("v-tab",{attrs:{href:"#normal-competition",disabled:!t.selected_competition}},[t._v("Normaalikilpailu")]),t.isTeamCompetition?a("v-tab",{attrs:{href:"#team-competition",disabled:!t.selected_competition}},[t._v("Tiimikilpailu")]):a("v-tab",{attrs:{href:"#team-competition",disabled:""}},[t._v("Ei Tiimikilpailua")]),a("v-tab",{attrs:{href:"#biggest-fishes",disabled:!t.selected_competition}},[t._v("Suurimmat Kalat")]),a("v-tab",{attrs:{href:"#biggest-fish-amounts",disabled:!t.selected_competition}},[t._v("Suurimmat Kalasaaliit")])],1),t.loading?a("v-row",{staticStyle:{margin:"50px"}},[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan kilpailuja... ")]),a("ProgressBarQuery")],1)],1):t._e(),!t.loading&&t.selected_competition?a("v-tabs-items",{staticStyle:{background:"rgba(0, 0, 0, 0.4)"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"stats"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"8"}},[a("v-btn",{staticStyle:{"margin-bottom":"20px"},attrs:{large:"",outlined:"",color:"red lighten-2",dark:t.$store.getters.getTheme,loading:t.loading_competition,disabled:!t.biggest_amounts_results.length},on:{click:function(e){t.pdf="Tilastoja",t.pdfDialog=!0}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf")],1)],1)],1),t.competition?a("v-row",[a("v-col",[t.competition.normal_points.length?a("v-row",{staticStyle:{"min-height":"400px"}},[a("v-col",{staticStyle:{"margin-bottom":"50px"},attrs:{sm:"12",md:"5","offset-md":"1"}},[t.fishes_chart_data?a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-card-title",[a("h4",{staticClass:"headline mb-1"},[t._v(" "+t._s(t.fishes_chart_title)+" ")])]),a("doughnut-chart",{attrs:{"chart-data":t.fishes_chart_data,"chart-id":"fishes_chart",title:t.fishes_chart_title}})],1)]}}],null,!1,1847150614)})],1):t._e()]),a("v-col",{attrs:{sm:"12",md:"5"}},[t.signee_chart_data?a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-card-title",[a("h4",{staticClass:"headline mb-1"},[t._v(" "+t._s(t.signee_chart_title)+" ")])]),a("pie-chart",{attrs:{"chart-data":t.signee_chart_data,"chart-id":"signee_chart",title:t.signee_chart_title}})],1)]}}],null,!1,4159745268)})],1):t._e()])],1):a("v-row",[a("v-col",{attrs:{md:"12"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1):t._e(),t.competition?a("v-row",[a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return[a("v-card",{class:{"on-hover":i},staticStyle:{padding:"20px"},attrs:{dark:t.$store.getters.getTheme,elevation:i?20:5}},[a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" Kalalajien määritykset ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[t._l(t.calculated_fish_weights,(function(e,i){return a("div",{key:i},[a("v-list-item",[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(" x "+t._s(e.multiplier))])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"blue-text"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on,n=i.attrs;return[a("span",t._g(t._b({},"span",n,!1),s),[a("b",[t._v(t._s(e.minsize)+" cm")])])]}}],null,!0)},[a("span",[t._v(t._s(e.minsize))])])],1),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[t._v(" "+t._s(e.weights?Math.round(100*(e.weights/1e3+Number.EPSILON))/100:0)+" kg ")])],1),a("v-divider")],1)})),a("v-list-item",[a("v-list-item-title",[t._v(" Saalista yhteensä ")]),a("v-list-item-subtitle",[a("h4",{staticClass:"green-text"},[a("b",[t._v(t._s(Math.round(100*(t.calculated_total_weights/1e3+Number.EPSILON))/100)+" kg")])])])],1)],2)],1)],1)],1),a("v-row",[a("v-col",[a("v-card",{attrs:{dark:t.$store.getters.getTheme,elevation:"20",outlined:""}},[a("v-card-title",{staticClass:"text-center"},[a("p",{staticClass:"display-1"},[t._v(" Yleisiä tilastoja ")])]),a("v-list",{attrs:{outlined:"",elevation:"10"}},[a("v-list-item",[a("v-list-item-title",[t._v("Cup pistekerroin")]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v("x "+t._s(t.competition.cup_points_multiplier))])])],1),a("v-divider"),a("v-list-item",[a("v-list-item-title",[a("b",[t._v("Ilmoittautuneita yhteensä")])]),a("v-divider",{attrs:{vertical:""}}),a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(t.signees.length))]),t._v(" venettä ")])],1),a("v-divider"),a("v-list-item",[a("v-list-item-title",[a("b",[t._v("Saalista saaneita")])]),a("v-divider",{attrs:{vertical:""}}),t.$store.getters.getPointSignees.length?a("v-list-item-subtitle",{staticClass:"green-text"},[a("b",[t._v(t._s(Math.round(t.$store.getters.getPointSignees.length/t.competition.signees.length*100*100)/100)+"% ("+t._s(t.$store.getters.getPointSignees.length)+" / "+t._s(t.signees.length)+")")])]):a("v-list-item-subtitle",{staticClass:"red-text"},[a("b",[t._v("0% (0/0)")])])],1)],1)],1)],1)],1)],1)]}}],null,!1,140323890)})],1)],1):t._e()],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"normal-competition"}},[a("v-row",[a("v-col",{staticStyle:{"padding-top":"50px","padding-bottom":"20px"},attrs:{md:"10","offset-md":"1"}},[a("v-row",[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.normal_options},on:{input:t.switchNormalResults},model:{value:t.selected_normal,callback:function(e){t.selected_normal=e},expression:"selected_normal"}})],1),t.normal_points.length||t.signees.length&&"Ilmoittautuneet"===t.selected_normal?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{large:"",outlined:"",color:"red lighten-2",dark:t.$store.getters.getTheme,loading:t.loading_competition},on:{click:function(e){t.pdf="#normal-table",t.pdfDialog=!0}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.normal_points.length||t.signees.length&&"Ilmoittautuneet"===t.selected_normal?a("v-row",{staticClass:"row"},[a("v-col",{attrs:{md:"12"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text"},[t._v(" Normaalikilpailu ("+t._s(t.selected_normal)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{attrs:{headers:t.headers,items:t.results,search:t.search},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},"Ilmoittautuneet"===t.selected_normal?{key:"item.boat_number",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.boat_number))])]}}:null,{key:"item.total_points",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.total_points.toLocaleString())+" p")])]}},{key:"item.cup_points_total",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-chip",t._g(t._b({attrs:{color:t.getColorPoints(i.cup_points_total)}},"v-chip",n,!1),s),[t._v(t._s(i.cup_points_total)+" p")])]}}],null,!0)},[a("span",[a("b",[t._v("Sijoittumispisteet + Osallistumispisteet = Cup pisteet")]),a("br"),t._v(" "+t._s(i.cup_placement_points)+" + "+t._s(i.cup_participation_points)+" = "+t._s(i.cup_points_total)+" ")])])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1)],1),t.isTeamCompetition?a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"team-competition"}},[t.team_results.length?a("v-row",[a("v-col",{staticStyle:{"padding-top":"50px"},attrs:{md:"3","offset-md":"8"}},[a("v-btn",{attrs:{large:"",outlined:"",color:"red lighten-2",dark:t.$store.getters.getTheme,loading:t.loading_competition},on:{click:function(e){t.pdf="#team-table",t.pdfDialog=!0}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1)],1):t._e(),a("v-row",[t.team_results.length?a("v-col",{staticStyle:{"padding-bottom":"20px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Tiimikilpailu ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_team,callback:function(e){t.search_team=e},expression:"search_team"}})],1),a("v-data-table",{attrs:{headers:t.team_headers,items:t.team_results,search:t.search_team},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.points",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.points.toLocaleString())+" p")])]}}],null,!0)})],1)],1):a("v-col",[t.loading?t._e():a("v-col"),t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])],1)],1)],1):t._e(),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fishes"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_names},on:{input:t.calculateBiggestFishes},model:{value:t.selected_biggest_fish,callback:function(e){t.selected_biggest_fish=e},expression:"selected_biggest_fish"}})],1),t.biggest_fishes_results.length?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{large:"",outlined:"",color:"red lighten-2",dark:t.$store.getters.getTheme,loading:t.loading_competition},on:{click:function(e){t.pdf="#biggest-fishes-table",t.pdfDialog=!0}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.biggest_fishes_results.length?a("v-row",[a("v-col",{staticStyle:{"margin-bottom":"40px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t.results_found_fishes?a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalat ("+t._s(t.selected_biggest_fish)+" "+t._s(t.results_found_fishes)+") ")]):a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalat ("+t._s(t.selected_biggest_fish)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_fishes,callback:function(e){t.search_fishes=e},expression:"search_fishes"}})],1),a("v-data-table",{attrs:{headers:t.biggest_fishes_headers,items:t.biggest_fishes_results,search:t.search_fishes},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.name",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.name))])]}},{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1),a("v-tab-item",{class:{inputarea:!t.$store.getters.getTheme,"inputarea-dark":t.$store.getters.getTheme},attrs:{value:"biggest-fish-amounts"}},[a("v-row",{staticStyle:{"padding-top":"50px"}},[a("v-col",{attrs:{md:"3","offset-md":"4"}},[a("v-select",{attrs:{dark:t.$store.getters.getTheme,"menu-props":t.$store.getters.getTheme?"dark":"light",label:"Valitse näytettävät tulokset",outlined:"",items:t.fish_amount_names},on:{input:t.calculateBiggestAmounts},model:{value:t.selected_biggest_amount,callback:function(e){t.selected_biggest_amount=e},expression:"selected_biggest_amount"}})],1),t.biggest_amounts_results.length?a("v-col",{attrs:{md:"3","offset-md":"1"}},[a("v-btn",{attrs:{large:"",outlined:"",color:"red lighten-2",dark:t.$store.getters.getTheme,loading:t.loading_competition,disabled:!t.biggest_amounts_results.length},on:{click:function(e){t.pdf="#biggest-amounts-table",t.pdfDialog=!0}}},[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-file-pdf-box")]),t._v(" Lataa pdf ")],1)],1):t._e()],1),t.biggest_amounts_results.length?a("v-row",[t._v("> "),a("v-col",[t.results_found_amounts?a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+" "+t._s(t.results_found_amounts)+") ")]):a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+") ")])])],1):t._e(),t.biggest_amounts_results.length?a("v-row",[a("v-col",{staticStyle:{"margin-bottom":"40px"},attrs:{md:"10","offset-md":"1"}},[a("v-card",{attrs:{dark:t.$store.getters.getTheme}},[a("v-card-title",[t.results_found_amounts?a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+" "+t._s(t.results_found_amounts)+") ")]):a("p",{staticClass:"flow-text"},[t._v(" Suurimmat kalasaaliit ("+t._s(t.selected_biggest_amount)+") ")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Hae kilpailijaa","single-line":"","hide-details":""},model:{value:t.search_amounts,callback:function(e){t.search_amounts=e},expression:"search_amounts"}})],1),a("v-data-table",{attrs:{headers:t.biggest_amounts_headers,items:t.biggest_amounts_results,search:t.search_amounts},scopedSlots:t._u([{key:"item.placement",fn:function(e){var i=e.item;return[a("v-chip",{attrs:{outlined:t.$store.getters.getTheme,color:t.getColor(i.placement)}},[t._v(t._s(i.placement)+".")])]}},{key:"item.name",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.name))])]}},{key:"item.weight",fn:function(e){var i=e.item;return[a("v-chip",[t._v(t._s(i.weight.toLocaleString())+" g")])]}}],null,!0)})],1)],1)],1):a("v-row",[t.loading?a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1):a("v-col",{attrs:{md:"8","offset-md":"2"}},[a("p",{staticClass:"flow-text",class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei tuloksia, vielä... ")])])],1)],1)],1):a("v-row",{staticStyle:{margin:"20px"}},[t.loading_competition||t.loading?t._e():a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Kilpailua ei valittuna ")])])],1),t.competition?a("div",{staticStyle:{margin:"20px"}},[t.loading_competition?a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Päivitetään tuloksia tietokannasta... ")]),a("ProgressBarQuery")],1)],1):a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"updatebtn",large:"",tile:"",loading:t.loading_competition,color:"blue darken-4"},on:{click:function(e){return t.refreshCompetition(!0)}}},[a("v-icon",[t._v("mdi-update")]),t._v("Päivitä tulokset ")],1)],1)],1)],1):t._e()],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)],1)],1)},s=[],n=a("5530"),o=a("1da1"),r=(a("96cf"),a("ac1f"),a("5319"),a("5b81"),a("d3b7"),a("159b"),a("99af"),a("b0c0"),a("4e827"),a("b64b"),a("7db0"),a("4de4"),a("e9c4"),a("7149")),l=a("a822"),c=a("de30"),u=a("748a"),d=a("e5e9"),m=a("e0b1"),p={name:"PublicResults",components:{ProgressBarQuery:l["default"],PieChart:u["a"],DoughnutChart:d["a"],PublicNavigation:c["a"]},data:function(){return{pdfDialog:!1,pdf:null,isLandscape:!1,competitions:[],competition:null,selected_competition:null,loading:!1,loading_competition:!1,tab:null,signees:[],fish_names:[],fish_amount_names:[],table_fish_names:[],results:[],normal_points:[],normal_weights:[],team_results:[],biggest_fishes:{},biggest_fishes_results:[],selected_biggest_fish:null,biggest_amounts:{},biggest_amounts_results:[],selected_biggest_amount:null,results_found_fishes:"",results_found_amounts:"",isTeamCompetition:!0,calculated_total_weights:null,calculated_fish_weights:null,selected_normal:null,fishes_chart:null,signees_chart:null,normal_options:["Pisteet","Kalat","Ilmoittautuneet"],headers:[],biggest_fishes_headers:[],biggest_amounts_headers:[],normal_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Tulos",value:"total_points"},{text:"Cup pisteet",value:"cup_points_total"}],signee_headers:[],team_headers:[{text:"Sijoitus",value:"placement"},{text:"Tiimi",value:"name"},{text:"Jäsen 1",value:"captain_name_1"},{text:"Jäsen 2",value:"captain_name_2"},{text:"Jäsen 3",value:"captain_name_3"},{text:"Pisteet",value:"points"}],winner_headers:[{text:"Kalalaji",value:"name"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],all_fishes_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Kala",value:"fish"},{text:"Paino",value:"weight"}],biggest_headers:[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Paino",value:"weight"}],search:"",search_team:"",search_fishes:"",search_amounts:"",selected_print:[],dialog:!1,signee_chart_data:null,fishes_chart_data:null,fishes_chart_title:null,signee_chart_title:null,selectedItem:0,items:[{text:"Kilpailujen tuloksia",icon:"mdi-seal",path:"/public-results",disabled:!0},{text:"Cuppien tuloksia",icon:"mdi-trophy",path:"/public-cups",disabled:!1}],snackbar:!1,text:"",timeout:5e3}},created:function(){this.saveAllAsPDF=m["default"].saveAllAsPDF,this.saveStatsAsPDF=m["default"].saveStatsAsPDF,this.saveAsPDF=m["default"].saveAsPDF,this.dictToArray=m["default"].dictToArray,this.capitalize_words=m["default"].capitalize_words,this.replaceAll=m["default"].replaceAll,this.formatDate=m["default"].formatDate,this.range=m["default"].range,this.getColorPoints=m["default"].getColorPoints,this.getColor=m["default"].getColor,this.drawCharts=m["default"].drawCharts,this.sortDict=m["default"].sortDict,this.onafterprint=m["default"].onafterprint,this.onBeforePrint=m["default"].onBeforePrint},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,a={isPublic:!0},e.next=5,r["a"].getCompetitions(a);case 5:t.competitions=e.sent,t.competitions.length?(t.competitions.forEach((function(e){e.start_date=t.$moment(e.start_date),e.end_date=t.$moment(e.end_date),e.select="".concat(e.name,", ").concat(e.start_date.year(),"  (").concat(e.cup_name,")")})),t.competitions.sort((function(t,e){return e.start_date.isAfter(t.start_date)})),t.$store.commit("refreshCompetition",t.competition),t.refreshCompetition(!1)):(t.signees=[],t.biggest_fishes=[],t.biggest_amounts=[]),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error(e.t0.message);case 12:t.loading=!1,location.href="#",location.href="#app";case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))()},methods:{pdfWrapper:function(){"Tilastoja"===this.pdf&&this.saveStatsAsPDF(this.pdf,this.isLandscape?"landscape":"portrait"),"#normal-table"===this.pdf&&this.saveAsPDF("Normaalikilpailun tulokset (".concat(this.selected_normal,")"),this.pdf,this.isLandscape?"landscape":"portrait"),"#team-table"===this.pdf&&this.saveAsPDF("Tiimikilpailun tulokset","#team-table",this.isLandscape?"landscape":"portrait"),"#biggest-fishes-table"===this.pdf&&this.saveAsPDF("Suurimmat kalat (".concat(this.selected_biggest_fish,")"),"#biggest-fishes-table",this.isLandscape?"landscape":"portrait"),"#biggest-amounts-table"===this.pdf&&this.saveAsPDF("Suurimmat kalat (".concat(this.selected_biggest_amount,")"),"#biggest-amounts-table",this.isLandscape?"landscape":"portrait")},choosePrints:function(){this.dialog=!1,this.selected_print.length&&this.saveAllAsPDF(this.tab,this.isLandscape?"landscape":"portrait")},changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):(this.text="Olet jo tällä sivulla!",this.snackbar=!0)},cancelSelection:function(){this.competition=null,this.selected_competition=null,localStorage.removeItem("competition")},calculateBiggestFishes:function(){var t=this,e=this.biggest_fishes,a=1;if(this.results_found_fishes=null,this.selected_biggest_fish||(this.selected_biggest_fish="Voittajat"),"Voittajat"===this.selected_biggest_fish)this.biggest_fishes_headers=this.winner_headers,this.biggest_fishes,this.biggest_fishes_results=this.sortDict(e);else if("Kaikki"===this.selected_biggest_fish)(function(){t.biggest_fishes_headers=t.all_fishes_headers;for(var i=[],s=function(){var t=o[n];e[t].forEach((function(e){e.fish=t,i.push(e)}))},n=0,o=Object.keys(e);n<o.length;n++)s();i.length?(i.sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),t.results_found_amounts=""):t.results_found_fishes="- Ei tuloksia";var r=-1,l=-1;t.biggest_fishes_results=i,t.biggest_fishes_results.forEach((function(t){r===t.weight?t.placement=l:(t.placement=l=a,r=t.weight),a++}))})();else{var i=[];this.biggest_fishes_headers=this.biggest_headers,e[this.selected_biggest_fish]?(i=e[this.selected_biggest_fish].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),this.results_found_amounts=""):this.results_found_fishes="- Ei tuloksia";var s=-1,n=-1;this.biggest_fishes_results=i,this.biggest_fishes_results.forEach((function(t){s===t.weight?t.placement=n:(t.placement=n=a,s=t.weight),a++}))}},calculateBiggestAmounts:function(){var t=this,e=this.biggest_amounts,a=1;if(this.results_found_amount="",this.selected_biggest_amount||(this.selected_biggest_amount="Voittajat"),"Voittajat"===this.selected_biggest_amount)this.biggest_amounts_headers=this.winner_headers,this.biggest_amounts,this.biggest_amounts_results=this.sortDict(e);else if("Kaikki"===this.selected_biggest_amount)(function(){t.biggest_amounts_headers=t.all_fishes_headers;for(var i=[],s=function(){var t=r[o];e[t].forEach((function(e){e.fish=t;var a=i.find((function(t){return t.boat_number===e.boat_number}));a?a.weight<e.weight&&(a=Object(n["a"])(Object(n["a"])({},e),{},{fish:t})):i.push(e)}))},o=0,r=Object.keys(e);o<r.length;o++)s();i.length?(i.sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),t.results_found_amounts=""):t.results_found_amount="- Ei tuloksia";var l=-1,c=-1;t.biggest_amounts_results=i,t.biggest_amounts_results.forEach((function(t){l===t.weight?t.placement=c:(t.placement=c=a,l=t.weight),a++}))})();else{this.biggest_amounts_headers=this.biggest_headers;var i=[];e[this.selected_biggest_amount]?(i=e[this.selected_biggest_amount].sort((function(t,e){return parseInt(e.weight)-parseInt(t.weight)})),i=i.filter((function(t){return parseInt(t.weight)>0})),this.results_found_amounts=""):this.results_found_amount="- Ei tuloksia";var s=-1,o=-1;this.biggest_amounts_results=i,this.biggest_amounts_results.forEach((function(t){s===t.weight?t.placement=o:(t.placement=o=a,s=t.weight),a++}))}},calculateAll:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.calculateBiggestFishes(),t.calculateBiggestAmounts();case 2:case"end":return e.stop()}}),e)})))()},switchNormalResults:function(){var t=this;this.selected_normal||(this.selected_normal="Pisteet"),"Pisteet"===this.selected_normal&&(this.headers=this.normal_headers,this.results=this.normal_points),"Kalat"===this.selected_normal&&(this.headers=[{text:"Sijoitus",value:"placement"},{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"}],this.results=this.normal_weights,this.table_fish_names.forEach((function(e){t.headers.push({text:e,value:e})})),this.headers.push({text:"Tulos",value:"total_points"})),"Ilmoittautuneet"===this.selected_normal&&(this.headers=this.signee_headers,this.results=this.$store.getters.getSignees)},refreshCompetition:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s,n,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.competition){a.next=15;break}if(e.loading_competition=!0,!t){a.next=7;break}return a.next=5,r["a"].getCompetitions({_id:e.competition._id});case 5:i=a.sent,i&&(e.competition=i,e.$store.commit("refreshCompetition",e.competition),localStorage.setItem("competition",JSON.stringify({id:i._id,start_date:i.start_date,end_date:i.end_date})));case 7:e.fish_names=[],e.fish_amount_names=[],e.table_fish_names=[],e.selected_print=[],e.signee_headers=[{text:"Kilp. numero",value:"boat_number"},{text:"Kippari",value:"captain_name"},{text:"Varakippari",value:"temp_captain_name"},{text:"Paikkakunta",value:"locality"},{text:"Lähtöpaikka",value:"starting_place"}],s=1;try{e.isTeamCompetition=e.$store.getters.isTeamCompetition,e.signees=e.$store.getters.getResultSignees,e.normal_points=e.competition.normal_points,e.normal_weights=e.competition.normal_weights,e.isTeamCompetition&&(e.signee_headers.push({text:"Tiimi",value:"team"}),e.team_results=e.competition.team_results,n=-1,o=-1,e.team_results.forEach((function(t){n===t.points?t.placement=o:(t.placement=o=s,n=t.points),s++}))),e.biggest_fishes=e.$store.getters.getBiggestFishes,e.biggest_amounts=e.$store.getters.getBiggestAmounts,e.calculated_total_weights=e.$store.getters.getCompetitionTotalWeights,e.calculated_fish_weights=e.competition.fishes,e.selected_normal="Pisteet",l=e.$store.getters.getCompetitionFishes,e.fish_names.push("Voittajat"),e.fish_amount_names.push("Voittajat"),e.fish_names.push("Kaikki"),e.fish_amount_names.push("Kaikki"),l.forEach((function(t){e.fish_names.push(t.name),e.fish_amount_names.push(t.name),e.table_fish_names.push(t.name)})),e.calculateAll(),e.fishes_chart&&e.signees_chart&&(e.fishes_chart.destroy(),e.signees_chart.destroy()),e.$nextTick((function(){return e.drawCharts(e.tab)})),e.normal_points.length?(e.results=e.normal_points,e.headers=e.normal_headers):(e.results=e.$store.getters.getSignees,e.headers=e.signee_headers,e.selected_normal="Ilmoittautuneet"),t&&(e.text="Tiedot ajantasalla!",e.snackbar=!0)}catch(c){console.error(c)}e.loading_competition=!1;case 15:case"end":return a.stop()}}),a)})))()},pickCompetition:function(){this.$store.commit("refreshCompetition",this.selected_competition),this.competition=this.selected_competition,localStorage.setItem("competition",JSON.stringify({id:this.competition._id,start_date:this.competition.start_date,end_date:this.competition.end_date})),this.refreshCompetition(!1)}}},h=p,g=a("2877"),_=a("6544"),v=a.n(_),f=a("8336"),b=a("b0af"),k=a("99d9"),x=a("ac7c"),w=a("cc20"),y=a("62ad"),C=a("a523"),$=a("8fea"),S=a("169a"),T=a("ce7e"),P=a("ce87"),V=a("132d"),j=a("8860"),I=a("da13"),L=a("5d23"),E=a("34c3"),F=a("0fd9"),K=a("b974"),A=a("2db4"),D=a("2fa4"),R=a("71a3"),N=a("c671"),B=a("fe57"),O=a("aac8"),H=a("9a96"),Q=a("8654"),Y=a("3a2f"),J=Object(g["a"])(h,i,s,!1,null,null,null);e["default"]=J.exports;v()(J,{VBtn:f["a"],VCard:b["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:k["c"],VCheckbox:x["a"],VChip:w["a"],VCol:y["a"],VContainer:C["a"],VDataTable:$["a"],VDialog:S["a"],VDivider:T["a"],VHover:P["a"],VIcon:V["a"],VList:j["a"],VListItem:I["a"],VListItemContent:L["a"],VListItemIcon:E["a"],VListItemSubtitle:L["b"],VListItemTitle:L["c"],VRow:F["a"],VSelect:K["a"],VSnackbar:A["a"],VSpacer:D["a"],VTab:R["a"],VTabItem:N["a"],VTabs:B["a"],VTabsItems:O["a"],VTabsSlider:H["a"],VTextField:Q["a"],VTooltip:Y["a"]})},"64ee":function(t,e,a){},"8be3":function(t,e,a){"use strict";a("64ee")},a404:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PublicNavigation"),a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[a("v-card",{staticStyle:{background:"transparent"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[a("v-row",[a("v-col",{attrs:{md:"6","offset-md":"3"}},[a("h1",[t._v("Cuppien tuloksia")])])],1),t.cups.length?a("v-row",{staticClass:"scroll_table"},[a("v-col",{attrs:{md:"4","offset-md":"4"}},[a("v-select",{attrs:{"menu-props":t.$store.getters.getTheme?"dark":"light",dark:t.$store.getters.getTheme,items:t.cups,"item-text":"select","item-value":"_id",label:"Valitse näytettävä Cup",outlined:"","return-object":"","single-line":""},on:{input:t.pickCup},model:{value:t.selected_cup,callback:function(e){t.selected_cup=e},expression:"selected_cup"}})],1)],1):a("v-row",[t.loading?a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Ei cuppeja saatavilla :( ")])]):a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan cuppeja... ")]),a("ProgressBarQuery")],1)],1),a("v-row",[a("v-col",[a("v-btn",{attrs:{large:"",outlined:"",color:"yellow",disabled:!t.selected_cup},on:{click:function(e){t.selected_cup=null,t.competitions=[],t.results=[]}}},[a("v-icon",[t._v("mdi-cancel")]),t._v("Peruuta valinta ")],1)],1)],1),t.selected_cup&&!t.loading?a("cup-points",{attrs:{competitions:t.competitions,headers:t.headers,cup:t.selected_cup,isResults:t.isResults,loading:t.loading,notFinishedCount:t.notFinishedCount,results:t.results,selectNumbers:t.selectNumbers},on:{change:function(e){return t.changeHeaders(e)},refresh:function(e){return t.refreshCup(e)},calculate:function(e){return t.calculateAll(t.competitions,e)},save:function(e){t.selectedCompetitions=e.selectedCompetitions,t.isLandscape=e.isLandscape,t.showInfoInPdf=e.showInfoInPdf,t.saveAsPDF("Tulokset")}}}):t._e(),t.loading?a("v-row",{staticStyle:{margin:"20px"}},[a("v-row",[a("v-col",[a("h2",{class:{"white--text":t.$store.getters.getTheme}},[t._v(" Haetaan cupin kilpailuja... ")]),a("ProgressBarQuery")],1)],1)],1):t._e(),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)],1)],1)},s=[],n=a("2909"),o=a("1da1"),r=(a("96cf"),a("d3b7"),a("159b"),a("99af"),a("b0c0"),a("c740"),a("a434"),a("7db0"),a("4e827"),a("4de4"),a("a15b"),a("d81d"),a("e9c4"),a("ac1f"),a("1276"),a("5319"),a("4fadc"),a("07ac"),a("fb6a"),a("5b81"),a("3ca3"),a("ddb0"),a("51dd")),l=a("7149"),c=a("8baf"),u=(a("0da4"),a("a822")),d=a("de30"),m=a("e650"),p={name:"PublicCups",components:{ProgressBarQuery:u["default"],CupPoints:m["a"],PublicNavigation:d["a"]},data:function(){return{dialog:!1,isLandscape:!1,cup:null,cups:[],competitions:[],headers:[],results:[],loading:!1,selectNumbers:[],selectedCompetitions:0,selected_cup:null,tab:null,search:"",notFinishedCount:0,selectedItem:1,items:[{text:"Kilpailujen tuloksia",icon:"mdi-seal",path:"/public-results",disabled:!1},{text:"Cuppien tuloksia",icon:"mdi-trophy",path:"/public-cups",disabled:!0}],snackbar:!1,text:"",timeout:5e3,isResults:!1,showInfoInPdf:!0}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].getCups({isPublic:!0});case 2:t.cups=e.sent,t.cups.length&&t.cups.forEach((function(t){t.select="".concat(t.name," (").concat(t.year,")")})),location.href="#",location.href="#app";case 6:case"end":return e.stop()}}),e)})))()},methods:{pickCup:function(){this.refreshCup(this.selected_cup)},changePage:function(t){this.$router.currentRoute.path!==t?(this.$router.push(t),this.drawer=!this.drawer):(this.text="Olet jo tällä sivulla!",this.snackbar=!0)},calculateAll:function(t,e){var a=this,i=[];if(this.isResults=!1,t.forEach((function(t){t.normal_points.length&&t.normal_points.forEach((function(e){var s=i.findIndex((function(t){return parseInt(e.boat_number)===parseInt(t.boat_number)}));if(s>-1){var n=i[s];n.points_compare.push(e.cup_points_total),n.cup_results[t.key_name]={points:e.cup_points_total,placement:e.placement},i.splice(s,1,n)}else{var o=a.selected_cup.signees.find((function(t){return t.boat_number===e.boat_number}));e.captain_name=o.captain_name,e.temp_captain_name=o.temp_captain_name,e.locality=o.locality,e.cup_results=[],e.points_compare=[],e.points_compare.push(e.cup_points_total),e.cup_results[t.key_name]={points:e.cup_points_total,placement:e.placement},i.push(e)}}))})),i.length){this.isResults=!0,i=this.limitCompetitions(i,e),this.results=i.sort((function(t,e){return parseInt(e.cup_results["total"])-parseInt(t.cup_results["total"])})),this.changeHeaders("Paikkakunta");var s=1,n=-1,o=-1;this.results.forEach((function(t){n===t.cup_results["total"]?t.final_placement=o:(t.final_placement=s,n=t.cup_results["total"],o=t.final_placement),t.final_cup_points=t.cup_results["total"],s++}))}},limitCompetitions:function(t,e){var a=this;return e=e<0?0:e,t.forEach((function(t){if(a.competitions.length>=e){t.points_compare.sort((function(t,e){return parseInt(e)-parseInt(t)})),t.cup_results["total"]=0;var i=0;a.competitions.forEach((function(a){t.cup_results[a.key_name]&&(t.cup_results[a.key_name].placement=a.normal_points.find((function(e){return e.boat_number===t.boat_number})).placement,t.cup_results[a.key_name].points<t.points_compare[e]&&(t.cup_results[a.key_name].points=a.cup_participation_points),t.cup_results[a.key_name].points===t.points_compare[e]&&(1!==i&&(t.cup_results[a.key_name].points=a.cup_participation_points),i++))}))}t.cup_results.forEach((function(e){t.cup_results["total"]+=e.points}))})),t},refreshCup:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.$store.commit("refreshCup",t),a.prev=2,a.next=5,l["a"].getCompetitions({cup_id:t.id});case 5:e.competitions=a.sent,i=1,e.competitions=e.competitions.filter((function(t){return t.isPublic})),e.competitions.forEach((function(t){e.selectNumbers.push(i),t.start_date=e.$moment(t.start_date),t.end_date=e.$moment(t.end_date),t.key_name=i,i++})),e.competitions.sort((function(t,e){return e.start_date.isBefore(t.start_date)})),e.selectedCompetitions=e.competitions.length,e.calculateAll(e.competitions,e.selectedCompetitions),e.text="Tiedot ajantasalla!",e.snackbar=!0,e.loading=!1,a.next=21;break;case 17:a.prev=17,a.t0=a["catch"](2),e.loading=!1,console.error(a.t0);case 21:case"end":return a.stop()}}),a,null,[[2,17]])})))()},getCompetitionFinishedColor:function(t){return t?"red":"primary"},replaceAllChars:function(t,e){return Object(n["a"])(t).map((function(t){for(var a in e)t==a&&(t=e[a]);return t})).join("")},changeHeaders:function(t){var e=this;this.headers=[],this.headers.push({text:"Sijoitus",highlight:!1,align:"center",value:"final_placement"}),this.headers.push({text:"Kilp. Nro",align:"center",highlight:!1,value:"boat_number"}),this.headers.push({text:"Kippari",align:"center",highlight:!1,value:"captain_name"}),this.headers.push({text:"Paikkakunta",align:"center",highlight:!1,value:"locality"}),this.notFinishedCount=0,this.competitions.forEach((function(a){if(a.isFinished||e.notFinishedCount++,"Paikkakunta"===t){var i=e.headers.filter((function(t){return a.locality===t.text}));if(i.length){var s=" ".concat(a.locality," #").concat(i.length+1);e.headers.push({text:s,align:"center",highlight:!0,isFinished:!a.isFinished,value:"cup_results[".concat(a.key_name,"].points")})}else e.headers.push({text:a.locality,align:"center",highlight:!0,isFinished:!a.isFinished,value:"cup_results[".concat(a.key_name,"].points")})}else e.headers.push({text:a.name,align:"center",highlight:!0,isFinished:!a.isFinished,value:"cup_results[".concat(a.key_name,"].points")})})),this.headers.push({text:"Yhteensä",align:"center",highlight:!1,value:"final_cup_points"})},pickCompetition:function(t){this.$store.state.competition=t,localStorage.setItem("competition",JSON.stringify({id:t._id,start_date:t.start_date,end_date:t.end_date})),this.$router.push({path:"/overview"})},replaceAll:function(t,e,a){return t.split(e).join(a)},capitalize_words:function(t){return t.replace(/(?:^|\s|['`‘’.-])[^\x60^\x7B-\xDF](?!(\s|$))/g,(function(t){return t.toUpperCase()}))},dictToArray:function(t){var e=this,a=Object.entries(t),i=[];return a.forEach((function(t){var a=Object.values(t[1]),s=a[9];a[0]=String(a[11])+".",a[1]="("+String(a[1])+")",a[3]=a[4];var n=4;e.competitions.forEach((function(t){s[t.key_name]?a[n]="".concat(s[t.key_name].points,"p (").concat(s[t.key_name].placement,".)"):a[n]="-",n++})),a[n]="".concat(s["total"],"p"),i.push(a)})),i},saveAsPDF:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var s,o,r,l,u,d,m,p,h,g,_,v,f,b,k,x,w;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=new c["default"]({orientation:e.isLandscape?"landscape":"portrait"}),o="".concat(e.selected_cup.name," (").concat(e.selected_cup.year,")"),l=[],m=Object(n["a"])(e.competitions),p=m.slice().reverse().findIndex((function(t){return!0===t.isFinished})),h=m.length-1,g=p>=0?h-p:p,_=m[g],v=e.$moment(_.start_date),f="".concat(v.date(),".").concat(v.month()+1,".").concat(v.year()),s.setFontSize(24),s.text(13,15,o,{align:"left"}),s.line(0,20,400,20),s.setFontSize(14),0,b=0,e.competitions.forEach((function(t){t.isFinished?0:b++})),r=0===b?"Tulokset ".concat(f):"Tilanne ".concat(f,", ").concat(_.name," (").concat(_.locality,") jälkeen (").concat(b," kpl kilpailuja kesken)"),s.text(13,30,r,{align:"left"}),e.showInfoInPdf&&s.text(13,40,t+" (".concat(e.selectedCompetitions,"/").concat(e.competitions.length," parasta kilpailua otettu huomioon)"),{align:"left"}),e.headers.forEach((function(t){l.push(t.text)})),u=e.dictToArray(e.results,1),d=45,s.autoTable({head:[l],body:u,styles:{overflow:"linebreak",halign:"justify",fontSize:"8",lineColor:100,lineWidth:.25},columnStyles:{cellwidth:"auto"},headStyles:{cellwidth:"wrap"},theme:"striped",pageBreak:"auto",tableWidth:"auto",startY:d,margin:{top:20}}),k="".concat(e.selected_cup.year,"_").concat(e.replaceAll("Cup"," ",""),"_").concat(e.replaceAll(e.capitalize_words(t)," ",""),".pdf"),i.next=27,Promise.resolve().then(a.bind(null,"e0b1"));case 27:x=i.sent,w=x.default,w.openPdfOnNewTab(s,k);case 30:case"end":return i.stop()}}),i)})))()}}},h=p,g=(a("8be3"),a("2877")),_=a("6544"),v=a.n(_),f=a("8336"),b=a("b0af"),k=a("62ad"),x=a("a523"),w=a("132d"),y=a("0fd9"),C=a("b974"),$=a("2db4"),S=Object(g["a"])(h,i,s,!1,null,"3a57043f",null);e["default"]=S.exports;v()(S,{VBtn:f["a"],VCard:b["a"],VCol:k["a"],VContainer:x["a"],VIcon:w["a"],VRow:y["a"],VSelect:C["a"],VSnackbar:$["a"]})},a55b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{class:{mobile:t.$vuetify.breakpoint.width<800,browser:t.$vuetify.breakpoint.width>=800,wide:t.$vuetify.breakpoint.width>=1200}},[a("v-card",{staticStyle:{background:"transparent",padding:"20px"},attrs:{elevation:"10",outlined:"",dark:t.$store.getters.getTheme}},[t.errors.length?a("v-card",{attrs:{dark:t.$store.getters.getTheme,id:"errordiv",elevation:"20"}},[a("v-alert",{attrs:{type:"error"}},[t._v(" Korjaa seuraavat virheet: ")]),a("v-list",t._l(t.errors,(function(e,i){return a("v-list-item",{key:i},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e))])],1)],1)})),1)],1):t._e(),a("h1",{staticStyle:{margin:"50px"}},[t._v("Login")]),a("form",[a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,id:"name",label:"Käyttäjänimi",maxlength:"40",loading:t.loading,counter:40},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),a("v-row",[a("v-col",{staticClass:"input-fields",attrs:{md:"8","offset-md":"2"}},[a("v-text-field",{attrs:{dark:t.$store.getters.getTheme,label:"Salasana",id:"password",type:"password",maxlength:"40",loading:t.loading,counter:40},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t.loading?a("v-row",[a("ProgressBarQuery",{staticStyle:{"margin-bottom":"20px"}})],1):a("v-row",[a("v-col",[a("v-btn",{staticClass:"white--text",attrs:{id:"sbtn",large:"",tile:"",outlined:"",color:"white"},on:{click:t.handleSubmit}},[a("v-icon",[t._v("mdi-login")]),t._v("Kirjaudu ")],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:t.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=a("1da1"),o=(a("96cf"),a("b0c0"),a("3faa")),r=a("a822"),l={data:function(){return{errors:[],name:null,password:null,loading:!1,snackbar:!1,text:"",timeout:5e3}},components:{ProgressBarQuery:r["default"]},mounted:function(){var t=document.getElementById("password");t.addEventListener("keyup",(function(t){13===t.keyCode&&(t.preventDefault(),document.getElementById("sbtn").click())})),location.href="#",location.href="#app"},methods:{showError:function(t){this.errors.push(t),location.href="#",location.href="#app"},handleSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.errors=[],e.name||e.showError("Syötä Käyttäjänimi!"),e.password||e.showError("Syötä salasana!"),e.errors.length){a.next=34;break}return e.loading=!0,i={name:e.name,email:e.name,password:e.password},a.prev=7,a.next=10,o["a"].loginUser(i);case 10:if(s=a.sent,!s.success){a.next=18;break}e.$store.state.is_admin=s.is_admin,e.$store.state.logged_in=!0,null!=e.$route.params.nextUrl?e.$router.push(e.$route.params.nextUrl):e.$router.push({path:"/dashboard"}),e.loading=!1,a.next=27;break;case 18:if(401!==s.status&&404!==s.status){a.next=24;break}return e.loading=!1,e.showError("Käyttäjänimi tai salasana ei täsmää!"),a.abrupt("return");case 24:e.loading=!1,e.showError("Jokin meni vikaan, yritä uudestaan!"),console.log(s.error,s.status);case 27:a.next=34;break;case 29:a.prev=29,a.t0=a["catch"](7),console.log(a.t0),e.showError("Näillä tiedoilla ei löytynyt käyttäjää!"),e.$router.push({path:"/login"});case 34:case"end":return a.stop()}}),a,null,[[7,29]])})))()}}},c=l,u=a("2877"),d=a("6544"),m=a.n(d),p=a("0798"),h=a("8336"),g=a("b0af"),_=a("62ad"),v=a("a523"),f=a("132d"),b=a("8860"),k=a("da13"),x=a("5d23"),w=a("34c3"),y=a("0fd9"),C=a("2db4"),$=a("8654"),S=Object(u["a"])(c,i,s,!1,null,null,null);e["default"]=S.exports;m()(S,{VAlert:p["a"],VBtn:h["a"],VCard:g["a"],VCol:_["a"],VContainer:v["a"],VIcon:f["a"],VList:b["a"],VListItem:k["a"],VListItemContent:x["a"],VListItemIcon:w["a"],VListItemTitle:x["c"],VRow:y["a"],VSnackbar:C["a"],VTextField:$["a"]})}}]);
//# sourceMappingURL=about~b1bc70ec.ffd21a47.js.map